### Writing Warning Logs with Attributes in JavaScript

Source: https://pocketbase.io/docs/js-logging

Shows how to log warning messages with associated attributes in PocketBase JavaScript. Warnings indicate potential issues that do not necessarily stop the application.

```javascript
const app = require('pocketbase');

// Example of a warning message without attributes
$app.logger().warn("Warning message!");

// Example of a warning message with attributes
$app.logger().warn( "Warning message with attributes!", "name", "John Doe", "id", 123, );
```

--------------------------------

### Register Custom Console Command (JavaScript)

Source: https://pocketbase.io/docs/use-as-framework

This JavaScript code registers a custom console command named 'hello' within PocketBase. Executing this command logs 'Hello world!' to the console.

```JavaScript
$app.rootCmd.addCommand(new Command({
    use: "hello",
    run: (cmd, args) => {
        console.log("Hello world!")
    },
}))
```

--------------------------------

### PocketBase App Store Methods (JavaScript)

Source: https://pocketbase.io/docs/go-miscellaneous

Illustrates how to interact with the PocketBase application memory store using JavaScript. The store provides methods for managing application-level data, such as caching and configuration settings.

```JavaScript
// Note: Direct access to app.Store() might not be available in client-side JS.
// This example assumes a server-side or build-time context where app is accessible.
// Example of setting and getting a value:
app.Store().Set("example", 123);
let v1 = app.Store().Get("example"); // v1 will be 123

// Example of GetOrSet:
let v2 = app.Store().GetOrSet("example2", () => {
    // This function will be called only if "example2" does not exist
    return 456;
}); // v2 will be 456
```

--------------------------------

### Intercept Record Creation Event Hook (JavaScript)

Source: https://pocketbase.io/docs/use-as-framework

This JavaScript code snippet shows how to bind to the `onRecordCreateRequest` event for 'posts' in PocketBase. If the request is not from a superuser, it sets the record's 'status' field to 'pending' before proceeding.

```JavaScript
onRecordCreateRequest((e) => {
// if not superuser, overwrite the newly submitted "posts" record status to pending
if (!e.hasSuperuserAuth()) {
        e.record.set("status", "pending")
}
     e.next()
}, "posts")
```

--------------------------------

### Create Collections (JavaScript)

Source: https://pocketbase.io/docs/api-collections

Provides examples of creating different types of collections (base, auth, view) using the PocketBase JavaScript SDK. Superuser authentication is required.

```javascript
import PocketBase from 'pocketbase';
const pb = new PocketBase('http://127.0.0.1:8090');

await pb.collection("_superusers").authWithPassword('test@example.com', '1234567890');

// create base collection
const base = await pb.collections.create({
  name: 'exampleBase',
  type: 'base',
  fields: [
    { name: 'title', type: 'text', required: true, min: 10 },
    { name: 'status', type: 'bool' },
  ],
});

// create auth collection
const auth = await pb.collections.create({
  name: 'exampleAuth',
  type: 'auth',
  createRule: 'id = @request.auth.id',
  updateRule: 'id = @request.auth.id',
  deleteRule: 'id = @request.auth.id',
  fields: [
    { name: 'name', type: 'text' },
  ],
  passwordAuth: {
    enabled: true,
    identityFields: ['email']
  },
});

// create view collection
const view = await pb.collections.create({
  name: 'exampleView',
  type: 'view',
  listRule: '@request.auth.id != ""',
  viewRule: null,
  // the schema will be autogenerated from the below query
  viewQuery: 'SELECT id, name from posts',
});
```

--------------------------------

### Subscribe to Realtime Events (JavaScript)

Source: https://pocketbase.io/docs/go-realtime

Subscribes to a custom realtime topic named 'example' from the client-side using the PocketBase JavaScript SDK. It logs any received event data to the console. Requires the PocketBase JavaScript SDK and an active PocketBase instance.

```JavaScript
import PocketBase from 'pocketbase';

const pb = new PocketBase('http://127.0.0.1:8090');

// ... other client-side logic

await pb.realtime.subscribe('example', (e) => {
    console.log(e);
});
```

--------------------------------

### Writing Error Logs with Attributes in JavaScript

Source: https://pocketbase.io/docs/js-logging

Demonstrates how to log error messages along with relevant attributes, including potential error objects, using PocketBase JavaScript. This is crucial for diagnosing and resolving issues.

```javascript
const app = require('pocketbase');

// Example of an error message without attributes
$app.logger().error("Error message!");

// Example of an error message with attributes, including an error object
let err = new Error("Something went wrong");
$app.logger().error( "Error message with attributes!", "id", 123, "error", err, );
```

--------------------------------

### Execute Raw SQL Queries in JavaScript

Source: https://pocketbase.io/docs/js-database

Demonstrates how to execute various types of SQL statements using the PocketBase JavaScript SDK. This includes DELETE statements, fetching a single row into a DynamicModel, and fetching multiple rows into an array.

```javascript
const result = arrayOf(new DynamicModel({
  // describe the shape of the data (used also as initial values)
  // the keys cannot start with underscore and must be a valid Go struct field name
  "id": "",
  "status": false,
  "age": 0, // use -0 for a float value
  "roles": [] // serialized json db arrays are decoded as plain arrays
}))

$app.db()
  .newQuery("SELECT id, status, age, roles FROM users WHERE id=1")
  .one(result) // throw an error on db failure or missing row

console.log(result.id)
```

```javascript
const result = arrayOf(new DynamicModel({
  // describe the shape of the data (used also as initial values)
  // the keys cannot start with underscore and must be a valid Go struct field name
  "id": "",
  "status": false,
  "age": 0, // use -0 for a float value
  "roles": [] // serialized json db arrays are decoded as plain arrays
}))

$app.db()
  .newQuery("SELECT id, status, age, roles FROM users LIMIT 100")
  .all(result) // throw an error on db failure

if (result.length > 0) {
    console.log(result[0].id)
}
```

```javascript
$app.db()
  .newQuery("DELETE FROM articles WHERE status = 'archived'")
  .execute() // throw an error on db failure
```

--------------------------------

### JavaScript: Log messages using PocketBase Logger

Source: https://pocketbase.io/docs/go-logging

Shows how to log messages using the PocketBase logger in JavaScript. While the core logger is Go-based, this snippet illustrates the JavaScript client's potential interaction if such functionality were exposed or through custom hooks.

```javascript
// Example illustrating the conceptual usage in JavaScript, assuming a client-side or server-side SDK method.
// Direct `app.Logger()` access is primarily a Go construct within PocketBase's server.
// For client-side, you'd typically interact with PocketBase's API to retrieve logs.

// If PocketBase's JS SDK were to expose logging methods (conceptual):
// pb.getLogger().log('Info message from JS!');
// pb.getLogger().warn('Warning message from JS!', { userId: '123' });
```

--------------------------------

### Upload Multiple Files (JavaScript)

Source: https://pocketbase.io/docs/files-handling

Creates a new record and uploads multiple files to a 'documents' file field using the PocketBase JavaScript SDK. Requires files to be Blob or File instances.

```javascript
import PocketBase from 'pocketbase';
const pb = new PocketBase('http://127.0.0.1:8090');

// create a new record and upload multiple files
// (files must be Blob or File instances)
const createdRecord = await pb.collection('example').create({
  title: 'Hello world!', // regular text field
  'documents': [
    new File(['content 1...'], 'file1.txt'),
    new File(['content 2...'], 'file2.txt'),
  ]
});
```

```javascript
import PocketBase from 'pocketbase';
const pb = new PocketBase('http://127.0.0.1:8090');

const fileInput = document.getElementById('fileInput');
const formData = new FormData();

// set regular text field
formData.append('title', 'Hello world!');

// listen to file input changes and add the selected files to the form data
fileInput.addEventListener('change', function () {
  for (let file of fileInput.files) {
    formData.append('documents', file);
  }
});

// upload and create new record
const createdRecord = await pb.collection('example').create(formData);
```

--------------------------------

### Binding Event Handlers in JavaScript

Source: https://pocketbase.io/docs/go-event-hooks

Illustrates how to attach event handlers to PocketBase hooks using JavaScript. It covers the basic `bind` method and the event handler function signature, which receives an event object. Developers can perform custom logic and call `event.next()` to continue the hook chain.

```javascript
import PocketBase from 'pocketbase';

// Assuming 'pb' is an initialized PocketBase instance
// const pb = new PocketBase('YOUR_PB_URL');

// Example: Binding to a 'before create' record hook
// This is a conceptual example as direct hook manipulation from client-side JS
// is usually done via server-side extensions or Admin UI scripts.

// In a server-side extension (e.g., using server hooks in PocketBase):
// pb.collection('your_collection_name').beforeCreate((event) => {
//   console.log('Record before creation:', event.record);
//   // Custom logic can go here
//   // To continue the hook chain:
//   // return event.next();
//   // To stop the hook chain and return an error:
//   // return new Error('Validation failed');
// });

// Note: The exact API for client-side vs server-side JavaScript hooks
// might differ. The server-side extension API is more common for
// modifying core behavior.

// Example of how the event object might look (conceptual):
// const mockEvent = {
//   record: { /* record data */ },
//   locals: { /* request-local data */ },
//   app: { /* PocketBase app instance */ },
//   next: () => {
//     console.log('Proceeding to next hook...');
//     return Promise.resolve(); // Or resolve with an error if stopping
//   },
//   preventDefault: () => {
//     console.log('Preventing default action...');
//     return Promise.reject(new Error('Action prevented'));
//   }
// };

```

--------------------------------

### Bind Parameters to SQL Queries in JavaScript

Source: https://pocketbase.io/docs/js-database

Shows how to securely pass user-provided data into SQL queries using named parameters to prevent SQL injection. It demonstrates binding parameters with the `bind()` method for WHERE clauses.

```javascript
const result = arrayOf(new DynamicModel({
  "name": "",
  "created": "",
}))

$app.db()
  .newQuery("SELECT name, created FROM posts WHERE created >= {:from} and created <= {:to}")
  .bind({
    "from": "2023-06-25 00:00:00.000Z",
    "to": "2023-06-28 23:59:59.999Z",
  })
  .all(result)

console.log(result.length)
```

--------------------------------

### Combining Expressions with OR using dbx.or()

Source: https://pocketbase.io/docs/js-database

Shows how to combine multiple expressions with the `OR` operator using `dbx.or()`. This is used when at least one of the sub-conditions needs to be met.

```javascript
// (status = 1 OR username like "%john%")
$dbx.or($dbx.exp("status = 1"), $dbx.like("username", "john"))
```

--------------------------------

### Querying Logs by Level and Data in JavaScript

Source: https://pocketbase.io/docs/js-logging

Shows how to programmatically query stored logs in PocketBase using the `$app.logQuery()` builder in JavaScript. This example filters for debug and info logs, and specific data within the log's JSON payload.

```javascript
const app = require('pocketbase');
const dbx = require('pocketbase/dbx');

// Define the structure for log results
let logs = arrayOf(new DynamicModel({ id: "", created: "", message: "", level: 0, data: {}, }));

// Build and execute the log query
$app.logQuery()
  .where($dbx.in("level", -4, 0)) // Target debug and info logs
  .andWhere($dbx.exp("json_extract(data, '$.type') = 'request'")) // Filter data column for specific type
  .orderBy("created DESC")
  .limit(100)
  .all(logs);
```

--------------------------------

### Register Custom HTTP Route in PocketBase (JavaScript)

Source: https://pocketbase.io/docs/use-as-framework

This JavaScript code snippet shows how to register a custom HTTP GET route '/hello' within PocketBase using the `routerAdd` function. It defines a handler that returns a 'Hello world!' string.

```JavaScript
routerAdd("GET", "/hello", (e) => { return e.string(200, "Hello world!") })
```

--------------------------------

### Creating a Logger with Injected Attributes in JavaScript

Source: https://pocketbase.io/docs/js-logging

Explains how to create a new logger instance that automatically includes specific attributes with every subsequent log entry using the `with()` method in PocketBase JavaScript. This simplifies logging of common context.

```javascript
const app = require('pocketbase');

// Create a logger with a pre-defined 'total' attribute
const l = $app.logger().with("total", 123);

// Logs from 'l' will include {"total": 123}
l.info("message A");

// This log will include {"total": 123, "name": "john"}
l.info("message B", "name", "john");
```

--------------------------------

### List Auth Methods (JavaScript)

Source: https://pocketbase.io/docs/api-records

Shows how to retrieve a public list of allowed authentication methods for a collection using the PocketBase JavaScript SDK. It requires initializing the SDK with the API endpoint.

```javascript
import PocketBase from 'pocketbase';
const pb = new PocketBase('http://127.0.0.1:8090');

// ...

const result = await pb.collection('users').listAuthMethods();
```

--------------------------------

### Delete All Files from Field (JavaScript)

Source: https://pocketbase.io/docs/files-handling

Deletes all files associated with a 'documents' file field in a PocketBase record using the JavaScript SDK by setting the field to an empty array.

```javascript
import PocketBase from 'pocketbase';
const pb = new PocketBase('http://127.0.0.1:8090');

// delete all "documents" files
await pb.collection('example').update('RECORD_ID', {
  'documents': [],
});
```

--------------------------------

### Combining Expressions with AND using dbx.and()

Source: https://pocketbase.io/docs/js-database

Explains how to combine multiple expressions with the `AND` operator using `dbx.and()`. This allows for building compound conditions where all sub-conditions must be true.

```javascript
// (status = 1 AND username like "%john%")
$dbx.and($dbx.exp("status = 1"), $dbx.like("username", "john"))
```

--------------------------------

### Generating NOT LIKE Expressions with dbx.notLike()

Source: https://pocketbase.io/docs/js-database

Shows how to construct `NOT LIKE` conditions using `dbx.notLike()`. Similar to `like()`, it supports multiple values combined with `AND` and handles escaping.

```javascript
// name NOT LIKE "%test1%" AND name NOT LIKE "%test2%"
$dbx.notLike("name", "test1", "test2")

// name NOT LIKE "test1%"
$dbx.notLike("name", "test1").match(false, true)
```

--------------------------------

### Writing Info Logs with Attributes in JavaScript

Source: https://pocketbase.io/docs/js-logging

Illustrates how to log informational messages with additional context using key-value attributes in PocketBase JavaScript. This is useful for tracking normal application flow.

```javascript
const app = require('pocketbase');

// Example of an info message without attributes
$app.logger().info("Info message!");

// Example of an info message with attributes
$app.logger().info( "Info message with attributes!", "name", "John Doe", "id", 123, );
```

--------------------------------

### Record Copying Methods (JavaScript)

Source: https://pocketbase.io/docs/go-records

Explains and demonstrates the different methods for creating copies of a record object. These include `Original()` for accessing original database state, `Fresh()` for the latest data state, and `Clone()` for a complete copy including custom fields and expand data.

```javascript
// returns a shallow copy of the current record model populated
// with its ORIGINAL db data state and everything else reset to the defaults
record.Original()

// returns a shallow copy of the current record model populated
// with its LATEST data state and everything else reset to the defaults
record.Fresh()

// returns a shallow copy of the current record model populated
// with its ALL collection and custom fields data, expand and visibility flags
record.Clone()
```

--------------------------------

### Writing Debug Logs with Attributes in JavaScript

Source: https://pocketbase.io/docs/js-logging

Demonstrates how to write debug messages with optional key-value attributes using the PocketBase logger in JavaScript. This helps in adding context to logs for easier debugging.

```javascript
const app = require('pocketbase');

// Example of a debug message without attributes
$app.logger().debug("Debug message!");

// Example of a debug message with attributes
$app.logger().debug( "Debug message with attributes!", "name", "John Doe", "id", 123, );
```

--------------------------------

### Building Complex WHERE Clauses with PocketBase.io

Source: https://pocketbase.io/docs/js-database

Demonstrates how to chain `where()`, `andWhere()`, and `orWhere()` to construct sophisticated SQL WHERE conditions. It utilizes various `dbx.Expression` methods for different comparison types and logical operators.

```javascript
$app.db()
  .select("users.*")
  .from("users")
  .where($dbx.exp("id = {:id}", { id: "someId" }))
  .andWhere($dbx.hashExp({ status: "public" }))
  .andWhere($dbx.like("name", "john"))
  .orWhere($dbx.and(
    $dbx.hashExp({
      role: "manager",
      fullTime: true
    }),
    $dbx.exp("experience > {:exp}", { exp: 10 })
  ))...
```

--------------------------------

### Generating BETWEEN Expressions with dbx.between()

Source: https://pocketbase.io/docs/js-database

Demonstrates how to create `BETWEEN` clauses using `dbx.between()`. This method checks if a column's value falls within a specified inclusive range.

```javascript
// age BETWEEN 3 and 99
$dbx.between("age", 3, 99)
```

--------------------------------

### Use Select and Join Methods in Query Builder (JavaScript)

Source: https://pocketbase.io/docs/js-database

Details the usage of `select()`, `andSelect()`, `distinct()`, and `from()` methods for constructing the initial part of a SQL query. Also explains the `join()` method and its shortcuts for specifying different types of JOIN clauses.

```javascript
$app.db()
  .select("id", "avatar as image")
  .andSelect("(firstName || ' ' || lastName) as fullName")
  .distinct(true)
  ...
```

```javascript
$app.db()
  .select("table1.id", "table2.name")
  .from("table1", "table2")
  ...
```

```javascript
$app.db()
  .select("users.*")
  .from("users")
  .innerJoin("profiles", $dbx.exp("profiles.user_id = users.id"))
  .join("FULL OUTER JOIN", "department", $dbx.exp("department.id = {:id}", {id: "someId"}))
  ...
```

--------------------------------

### Migration File Structure - JavaScript

Source: https://pocketbase.io/docs/js-migrations

The standard structure for a PocketBase migration file using JavaScript. It defines an `upFunc` for applying changes and an optional `downFunc` for reverting them. Both functions receive a transactional `app` instance for interacting with the database and application settings.

```javascript
// pb_migrations/1687801097_your_new_migration.js
migrate((app) => {
  // add up queries...
}, (app) => {
  // add down queries...
})
```

--------------------------------

### Creating a Logger with Grouped Attributes in JavaScript

Source: https://pocketbase.io/docs/js-logging

Illustrates how to create a logger that prefixes all its log attributes under a specified group name using the `withGroup()` method in PocketBase JavaScript. This helps in organizing logs from different parts of the application.

```javascript
const app = require('pocketbase');

// Create a logger that groups attributes under 'sub'
const l = $app.logger().withGroup("sub");

// This log will be structured as {"sub": {"total": 123}}
l.info("message A", "total", 123);
```

--------------------------------

### Generating LIKE Expressions with dbx.like()

Source: https://pocketbase.io/docs/js-database

Explains how to build `LIKE` conditions using `dbx.like()`. It supports multiple values, which are combined with `AND` by default, and handles automatic wildcard and special character escaping.

```javascript
// name LIKE "%test1%" AND name LIKE "%test2%"
$dbx.like("name", "test1", "test2")

// name LIKE "test1%"
$dbx.like("name", "test1").match(false, true)
```

--------------------------------

### Update PocketBase Settings (JavaScript)

Source: https://pocketbase.io/docs/api-settings

Performs a bulk update of PocketBase application settings using the JavaScript SDK. This action is restricted to superusers. Returns the updated settings list.

```javascript
import PocketBase from 'pocketbase';
const pb = new PocketBase('http://127.0.0.1:8090');

// Authenticate as a superuser
await pb.collection("_superusers").authWithPassword('test@example.com', '123456');

// Update settings, for example, the app name and URL
const settings = await pb.settings.update({
  meta: {
    appName: 'YOUR_APP',
    appUrl: 'http://127.0.0.1:8090',
  },
});
```

--------------------------------

### List PocketBase Settings (JavaScript)

Source: https://pocketbase.io/docs/api-settings

Retrieves a list of all application settings from PocketBase. Requires authentication as a superuser. Secret fields are redacted. Uses the PocketBase JavaScript SDK.

```javascript
import PocketBase from 'pocketbase';
const pb = new PocketBase('http://127.0.0.1:8090');

// Authenticate as a superuser
await pb.collection("_superusers").authWithPassword('test@example.com', '1234567890');

// Fetch all settings
const settings = await pb.settings.getAll();
```

--------------------------------

### Delete Individual Files (JavaScript)

Source: https://pocketbase.io/docs/files-handling

Deletes specific files ('file1.pdf', 'file2.txt') from a 'documents' multiple file upload field in PocketBase using the JavaScript SDK by suffixing the field name with '-' and providing a list of filenames.

```javascript
import PocketBase from 'pocketbase';
const pb = new PocketBase('http://127.0.0.1:8090');

// delete individual files
await pb.collection('example').update('RECORD_ID', {
  'documents-': ["file1.pdf", "file2.txt"],
});
```

--------------------------------

### Intercepting Log Creation with Model Hooks in JavaScript

Source: https://pocketbase.io/docs/js-logging

Demonstrates how to use PocketBase's `onModelCreate` hook to intercept log entries before they are persisted to the database in JavaScript. This allows for modification or forwarding of log data.

```javascript
const app = require('pocketbase');

// Attach a hook to the '_logs' model to process created logs
onModelCreate((e) => {
    // Access and log properties of the created log model
    console.log(e.model.id);
    console.log(e.model.created);
    console.log(e.model.level);
    console.log(e.model.message);
    console.log(e.model.data);

    // Proceed with the default create operation
    e.next();
}, "_logs");
```

--------------------------------

### Fetch Multiple Records by ID, Count, Filter, or Pagination (JS)

Source: https://pocketbase.io/docs/js-records

Demonstrates various methods for retrieving multiple records from a collection. Includes fetching by IDs, counting records with expressions, finding records with filters and expressions, and paginated results with sorting and parameters. Handles cases where no records are found by returning an empty array.

```javascript
// retrieve multiple "articles" records by their ids
let records = $app.findRecordsByIds("articles", ["RECORD_ID1", "RECORD_ID2"])

// retrieve the total number of "articles" records in a collection with optional dbx expressions
let totalPending = $app.countRecords("articles", $dbx.hashExp({"status": "pending"}))

// retrieve multiple "articles" records with optional dbx expressions
let records = $app.findAllRecords("articles",     $dbx.exp("LOWER(username) = {:username}", {"username": "John.Doe"}),     $dbx.hashExp({"status": "pending"}), 
)

// retrieve multiple paginated "articles" records by a string filter expression
// (NB! use "{:placeholder}" to safely bind untrusted user input parameters)
let records = $app.findRecordsByFilter(
  "articles", // collection
  "status = 'public' && category = {:category}", // filter
  "-published", // sort
  10, // limit
  0, // offset
  { "category": "news" }, // optional filter params
)
```

--------------------------------

### Append Files to Existing Upload (JavaScript)

Source: https://pocketbase.io/docs/files-handling

Appends a new file to an existing multiple file upload field ('documents') in PocketBase using the JavaScript SDK. This is useful when the 'Max Files' option for the field is 2 or more.

```javascript
import PocketBase from 'pocketbase';
const pb = new PocketBase('http://127.0.0.1:8090');

const createdRecord = await pb.collection('example').update('RECORD_ID', {
  'documents+': new File(['content 3...'], 'file3.txt')
});
```

--------------------------------

### Create Record Copies in JavaScript

Source: https://pocketbase.io/docs/js-records

Illustrates how to create shallow copies of a record model using `original()`, `fresh()`, and `clone()`. These methods are useful for comparing data states or creating independent record instances.

```javascript
record.original()
record.fresh()
record.clone()
```

--------------------------------

### Generating OR NOT LIKE Expressions with dbx.orNotLike()

Source: https://pocketbase.io/docs/js-database

Demonstrates the creation of `OR NOT LIKE` conditions using `dbx.orNotLike()`. This method checks if a column does not match any of the provided values, combining them with `OR`.

```javascript
// name NOT LIKE "%test1%" OR name NOT LIKE "%test2%"
$dbx.orNotLike("name", "test1", "test2")

// name NOT LIKE "test1%" OR name NOT LIKE "test2%"
$dbx.orNotLike("name", "test1", "test2").match(false, true)
```

--------------------------------

### Fetch Single Record (JavaScript)

Source: https://pocketbase.io/docs/go-records

Shows how to retrieve a single record by its ID, by a unique data pair, or by a filter expression. It also highlights the use of placeholders for safely binding user input parameters in filter queries.

```javascript
// retrieve a single "articles" record by its id
app.FindRecordById("articles", "RECORD_ID")

// retrieve a single "articles" record by a single key-value pair
app.FindFirstRecordByData("articles", "slug", "test")

// retrieve a single "articles" record by a string filter expression
// (NB! use "{:placeholder}" to safely bind untrusted user input parameters)
app.FindFirstRecordByFilter(
    "articles",
    "status = 'public' && category = {:category}",
    dbx.Params{
        "category": "news"
    },
)
```

--------------------------------

### Generating NOT BETWEEN Expressions with dbx.notBetween()

Source: https://pocketbase.io/docs/js-database

Explains how to build `NOT BETWEEN` clauses using `dbx.notBetween()`. This method checks if a column's value falls outside a specified inclusive range.

```javascript
// age NOT BETWEEN 3 and 99
$dbx.notBetween("age", 3, 99)
```

--------------------------------

### Fetch Single Record by Data in JavaScript

Source: https://pocketbase.io/docs/js-records

Demonstrates fetching a single record based on a specific key-value pair using `$app.findFirstRecordByData()`. Useful for retrieving records by unique fields like slugs.

```javascript
let record = $app.findFirstRecordByData("articles", "slug", "test")
```

--------------------------------

### Update Collection (JavaScript)

Source: https://pocketbase.io/docs/api-collections

Updates a single collection by its ID or name using the PocketBase JavaScript SDK. Requires authentication as a superuser. Expects collection ID and a map of fields to update.

```javascript
import PocketBase from 'pocketbase';

const pb = new PocketBase('http://127.0.0.1:8090');

// Authenticate as superuser (example)
await pb.collection("_superusers").authWithPassword('test@example.com', '123456');

// Update the collection
const collection = await pb.collections.update('demo', {
  name: 'new_demo',
  listRule: 'created > "2022-01-01 00:00:00"',
});
```

--------------------------------

### Access Authentication Fields in JavaScript

Source: https://pocketbase.io/docs/js-records

Provides examples for accessing authentication-related record fields such as `isSuperuser()`, `email()`, `verified()`, and `tokenKey()`. It also includes methods for setting passwords and generating random passwords.

```javascript
record.isSuperuser()
record.email() // alias for record.get("email")
record.setEmail(email) // alias for record.set("email", email)
record.verified() // alias for record.get("verified")
record.setVerified(false) // alias for record.set("verified", false)
record.tokenKey() // alias for record.get("tokenKey")
record.setTokenKey(key)
record.refreshTokenKey()
record.validatePassword(pass)
record.setPassword(pass) // alias for record.set("password", pass)
record.setRandomPassword()
```

--------------------------------

### Get All Logs with Filtering and Sorting - JavaScript SDK

Source: https://pocketbase.io/docs/api-logs

Retrieves a paginated list of logs using the PocketBase JavaScript SDK. Supports filtering with complex expressions and custom sorting. Requires an active connection to the PocketBase instance and authentication.

```javascript
import PocketBase from 'pocketbase';

const pb = new PocketBase('http://127.0.0.1:8090');

// Authenticate if necessary (e.g., for superuser actions)
// await pb.collection("_superusers").authWithEmail('test@example.com', '123456');

// Example: Fetch logs, sorted by date descending, filtered by level greater than 0
const logs = await pb.logs.getFullList(undefined, {
    sort: '-created',
    filter: 'level>0'
});

console.log(logs);
```

--------------------------------

### Creating Hash Expressions with dbx.hashExp()

Source: https://pocketbase.io/docs/js-database

Illustrates the use of `dbx.hashExp()` to generate SQL conditions based on a key-value map. This is useful for filtering columns against specific values, including nested conditions like `IS TRUE` and `IS NULL`.

```javascript
// slug = "example" AND active IS TRUE AND tags in ("tag1", "tag2", "tag3") AND parent IS NULL
$dbx.hashExp({
  slug: "example",
  active: true,
  tags: ["tag1", "tag2", "tag3"],
  parent: null
})
```

--------------------------------

### Generating OR LIKE Expressions with dbx.orLike()

Source: https://pocketbase.io/docs/js-database

Illustrates how to create `OR LIKE` conditions using `dbx.orLike()`. This method is used when a column should match any of the provided values, combining them with `OR`.

```javascript
// name LIKE "%test1%" OR name LIKE "%test2%"
$dbx.orLike("name", "test1", "test2")

// name LIKE "test1%" OR name LIKE "test2%"
$dbx.orLike("name", "test1", "test2").match(false, true)
```

--------------------------------

### Negating Expressions with dbx.not()

Source: https://pocketbase.io/docs/js-database

Demonstrates how to prepend `NOT` to an existing expression using `dbx.not()`. This is useful for conditions where you want to exclude specific criteria.

```javascript
// NOT(status = 1)
$dbx.not($dbx.exp("status = 1"))
```

--------------------------------

### Create Post Record with Multiple Tags in PocketBase

Source: https://pocketbase.io/docs/working-with-relations

Demonstrates how to create a new 'posts' record and assign multiple tags using their IDs. This requires the PocketBase SDK for either JavaScript or Dart.

```javascript
import PocketBase from 'pocketbase';
const pb = new PocketBase('http://127.0.0.1:8090');

const post = await pb.collection('posts').create({
  'title': 'Lorem ipsum...',
  'tags': ['TAG_ID1', 'TAG_ID2'],
});
```

```dart
import 'package:pocketbase/pocketbase.dart';

final pb = PocketBase('http://127.0.0.1:8090');

final post = await pb.collection('posts').create(body: {
  'title': 'Lorem ipsum...',
  'tags': ['TAG_ID1', 'TAG_ID2'],
});
```

--------------------------------

### Filtering Grouped Results (having, andHaving, orHaving)

Source: https://pocketbase.io/docs/js-database

Specifies the HAVING clause for database queries, used to filter results after grouping. It accepts a `dbx.Expression`. `andHaving` and `orHaving` allow appending multiple conditions.

```javascript
const app = require("pocketbase");
const dbx = require("pocketbase/utils"); // Assuming dbx is available for Expression

// Example usage:
const result = await app.db()
    .select("users.*")
    .from("users")
    .groupBy("department", "level")
    .having(dbx.exp("sum(level) > {:sum}", { sum: 10 }))
    .get();
```

--------------------------------

### Initialize Application with Bootstrap Hook

Source: https://pocketbase.io/docs/js-overview

This code snippet illustrates the use of the `onBootstrap` hook, which executes once when the PocketBase application initializes. It logs a message to the console indicating successful initialization and then calls `e.next()` to continue the bootstrap process. This hook is useful for one-time setup tasks.

```javascript
/// <reference path="../pb_data/types.d.ts" />
onBootstrap((e) => {
    e.next()
    console.log("App initialized!")
})
```

--------------------------------

### Hide/Unhide Record Fields in JavaScript

Source: https://pocketbase.io/docs/js-records

Details how to dynamically control the visibility of record fields during serialization using `hide()` and `unhide()`. This is often used within hooks like `onRecordEnrich` to manage field access based on user roles or other conditions.

```javascript
record.hide(fieldNames...)
record.unhide(fieldNames...)
onRecordEnrich((e) => {
    if (!e.requestInfo.auth || (!e.requestInfo.auth.isSuperuser() && e.requestInfo.auth.get("role") != "staff")) {
        e.record.hide("someStaffOnlyField")
    }
    e.next()
}, "articles")
record.withCustomData(true)
```

--------------------------------

### Authentication Accessors (JavaScript)

Source: https://pocketbase.io/docs/go-records

Provides examples for accessing and modifying authentication-related fields on a record, such as email, verification status, and tokens. Includes password validation and setting.

```javascript
record.IsSuperuser() // alias for record.Collection().Name == "_superusers"

record.Email() // alias for record.Get("email")
record.SetEmail(email) // alias for record.Set("email", email)

record.Verified() // alias for record.Get("verified")
record.SetVerified(false) // alias for record.Set("verified", false)

record.TokenKey() // alias for record.Get("tokenKey")
record.SetTokenKey(key) // alias for record.Set("tokenKey", key)
record.RefreshTokenKey() // alias for record.Set("tokenKey:autogenerate", "")

record.ValidatePassword(pass)
record.SetPassword(pass) // alias for record.Set("password", pass)
record.SetRandomPassword() // sets cryptographically random 30 characters string as password
```

--------------------------------

### Authenticate with OTP (JavaScript)

Source: https://pocketbase.io/docs/authentication

Handles user authentication using a One-Time Password (OTP) via the PocketBase JavaScript SDK. It includes requesting an OTP email, authenticating with the received OTP and ID, and managing the authentication state.

```javascript
import PocketBase from 'pocketbase';

const pb = new PocketBase('http://127.0.0.1:8090');

// ...

// send OTP email to the provided auth record
const result = await pb.collection('users').requestOTP('test@example.com');

// ... show a screen/popup to enter the password from the email ...

// authenticate with the requested OTP id and the email password
const authData = await pb.collection('users').authWithOTP(result.otpId, "YOUR_OTP");

// after the above you can also access the auth data from the authStore
console.log(pb.authStore.isValid);
console.log(pb.authStore.token);
console.log(pb.authStore.record.id);

// "logout"
pb.authStore.clear();
```

--------------------------------

### Create PocketBase Collection using JavaScript

Source: https://pocketbase.io/docs/api-collections

Example of creating a new collection in PocketBase using JavaScript. This snippet demonstrates how to structure the request, including the authorization header and the JSON body containing collection definition parameters. It assumes you have a PocketBase client initialized.

```javascript
async function createCollection(pb) {
    const data = {
        "name": "my_new_collection",
        "type": "base",
        "fields": [
            {
                "name": "title",
                "type": "text",
                "required": true
            },
            {
                "name": "description",
                "type": "text",
                "required": false
            }
        ],
        "listRule": "@request.auth.id != ''",
        "createRule": "@request.auth.id != ''"
    };

    try {
        const record = await pb.collection('collections').create(data);
        console.log('Collection created successfully:', record);
    } catch (error) {
        console.error('Error creating collection:', error);
    }
}

// Assuming 'pb' is an initialized PocketBase client instance
// createCollection(pb);
```

--------------------------------

### Fetch Single Record by Filter Expression in JavaScript

Source: https://pocketbase.io/docs/js-records

Explains how to retrieve a single record using a filter expression with `$app.findFirstRecordByFilter()`. Supports safe parameter binding using placeholders like `{:placeholder}` to prevent injection vulnerabilities.

```javascript
let record = $app.findFirstRecordByFilter(
  "articles",
  "status = 'public' && category = {:category}",
  { "category": "news" },
)
```

--------------------------------

### Get a Single Log by ID - JavaScript SDK

Source: https://pocketbase.io/docs/api-logs

Fetches a specific log entry by its unique ID using the PocketBase JavaScript SDK. This action is typically restricted to superusers and requires authentication.

```javascript
import PocketBase from 'pocketbase';

const pb = new PocketBase('http://127.0.0.1:8090');

// Authenticate as a superuser is required for this operation
await pb.collection('_superusers').authWithEmail('test@example.com', '123456');

const logId = 'LOG_ID'; // Replace with the actual log ID
const log = await pb.logs.getOne(logId);

console.log(log);
```

--------------------------------

### Send Request to Custom Route (JavaScript)

Source: https://pocketbase.io/docs/go-routing

Demonstrates sending a request to a custom route '/hello' using the PocketBase JavaScript SDK. It utilizes the `pb.send()` method and includes an example of passing query parameters. This method allows interaction with custom API endpoints defined in your PocketBase backend.

```javascript
import PocketBase from 'pocketbase';

const pb = new PocketBase('http://127.0.0.1:8090');

await pb.send("/hello", {
  // for other options check
  // https://developer.mozilla.org/en-US/docs/Web/API/fetch#options
  query: { "abc": 123 },
});
```

--------------------------------

### Authenticate User with Password (JavaScript)

Source: https://pocketbase.io/docs/api-records

Authenticates a user in PocketBase using their email and password. It utilizes the PocketBase JavaScript SDK. After successful authentication, user details and tokens are stored in the authStore, which can be accessed or cleared for logout.

```javascript
import PocketBase from 'pocketbase';
const pb = new PocketBase('http://127.0.0.1:8090');

...

const authData = await pb.collection('users').authWithPassword(
  'YOUR_USERNAME_OR_EMAIL',
  'YOUR_PASSWORD',
);

// after the above you can also access the auth data from the authStore
console.log(pb.authStore.isValid);
console.log(pb.authStore.token);
console.log(pb.authStore.record.id);

// "logout" the last authenticated record
pb.authStore.clear();
```

--------------------------------

### Filter Posts via Back-Relation Comments (JavaScript)

Source: https://pocketbase.io/docs/working-with-relations

This JavaScript snippet demonstrates how to fetch posts that have comments containing a specific keyword. It uses the `filter` option to query based on a back-relation field (`comments_via_post.message`) and `expand` to include related user data from the comments.

```javascript
await pb.collection("posts").getList(1, 30, {
  filter: "comments_via_post.message ?~ 'hello'"
  expand: "comments_via_post.user",
})
```

--------------------------------

### Authenticate with Password (JavaScript)

Source: https://pocketbase.io/docs/authentication

Authenticates a user with their email and password using the PocketBase JavaScript SDK. After successful authentication, it shows how to check the validity of the authentication, access the token and user record, and clear the authentication store to log out.

```javascript
import PocketBase from 'pocketbase';

const pb = new PocketBase('http://127.0.0.1:8090');

// ...

const authData = await pb.collection("users").authWithPassword('test@example.com', '1234567890');

// after the above you can also access the auth data from the authStore
console.log(pb.authStore.isValid);
console.log(pb.authStore.token);
console.log(pb.authStore.record.id);

// "logout" the last authenticated record
pb.authStore.clear();
```

--------------------------------

### Subscribe to Custom Realtime Topic (JavaScript)

Source: https://pocketbase.io/docs/js-realtime

This snippet shows how a client-side JavaScript application can subscribe to a custom realtime topic named 'example' using the PocketBase SDK. It initializes a PocketBase instance and then uses the realtime.subscribe method to listen for messages on the specified topic. The provided callback function will be executed when a message is received.

```javascript
import PocketBase from 'pocketbase';

const pb = new PocketBase('http://127.0.0.1:8090');

// ...

await pb.realtime.subscribe('example', (e) => {
  console.log(e)
});
```

--------------------------------

### Email Change Request and Confirmation in JavaScript

Source: https://pocketbase.io/docs/api-records

Demonstrates how to request an email change and confirm it using the PocketBase JavaScript SDK. Note that after initiating an email change, all prior auth tokens for the user are invalidated. This function requires authentication.

```javascript
import PocketBase from 'pocketbase';

const pb = new PocketBase('http://127.0.0.1:8090');

// Authenticate the user first
await pb.collection('users').authWithPassword('test@example.com', '1234567890');

// Request email change
await pb.collection('users').requestEmailChange('new@example.com');

// --- 
// (optional) in your custom confirmation page:
// ---
// Confirm email change
await pb.collection('users').confirmEmailChange('EMAIL_CHANGE_TOKEN', 'YOUR_PASSWORD');
```

--------------------------------

### Register Custom Routes in PocketBase (JavaScript)

Source: https://pocketbase.io/docs/js-routing

Demonstrates how to register custom GET and POST routes with optional authentication middleware in PocketBase using JavaScript. It shows how to define the HTTP method, path, handler function, and apply authentication checks.

```javascript
// register "GET /hello/{name}" route (allowed for everyone)
routerAdd("GET", "/hello/{name}", (e) => {
  let name = e.request.pathValue("name")
  return e.json(200, { "message": "Hello " + name })
})

// register "POST /api/myapp/settings" route (allowed only for authenticated users)
routerAdd("POST", "/api/myapp/settings", (e) => {
  // do something ...
  return e.json(200, {"success": true})
}, $apis.requireAuth())
```

--------------------------------

### Fetch Multiple PocketBase Collections (JavaScript)

Source: https://pocketbase.io/docs/js-collections

Retrieves multiple collections, optionally filtered by type. Returns an empty array if no collections are found. Uses the $app.findAllCollections method.

```javascript
let allCollections = $app.findAllCollections() // only specific types let authAndViewCollections = $app.findAllCollections("auth", "view")
```

--------------------------------

### Loading Local CommonJS Modules in PocketBase Hooks

Source: https://pocketbase.io/docs/js-overview

Demonstrates how to load local JavaScript modules using `require()` within PocketBase hooks. This approach is useful for organizing shared helper functions or configuration. It assumes the module is available via a local path.

```javascript
// pb_hooks/utils.js
module.exports = {
    hello: (name) => {
        console.log("Hello " + name)
    }
}
```

```javascript
// pb_hooks/main.pb.js
onBootstrap((e) => {
    e.next()
    const utils = require(`${__hooks}/utils.js`)
    utils.hello("world")
})
```

--------------------------------

### Fetch Single Record by ID in JavaScript

Source: https://pocketbase.io/docs/js-records

Shows how to retrieve a single record from a collection by its unique identifier using `$app.findRecordById()`. This method throws an error if no record matches the provided ID.

```javascript
let record = $app.findRecordById("articles", "RECORD_ID")
```

--------------------------------

### Generating IN Expressions with dbx.in()

Source: https://pocketbase.io/docs/js-database

Illustrates how to create `IN` clauses using `dbx.in()`. This method checks if a column's value exists within a provided list of values.

```javascript
// status IN ("public", "reviewed")
$dbx.in("status", "public", "reviewed")
```

--------------------------------

### Authenticate and Get Collection (JavaScript)

Source: https://pocketbase.io/docs/api-collections

Demonstrates authenticating with PocketBase using superuser credentials and retrieving a collection by its ID. Requires the 'pocketbase' package.

```javascript
import PocketBase from 'pocketbase';
const pb = new PocketBase('http://127.0.0.1:8090');

// Authenticate as a superuser
await pb.collection("_superusers").authWithPassword('test@example.com', '1234567890');

// Get a collection by ID
const collection = await pb.collections.getOne('demo');
```

--------------------------------

### Set Record Field Value (JavaScript)

Source: https://pocketbase.io/docs/go-records

Demonstrates how to set individual field values on a record object. It includes examples for setting a string value and appending to an existing value. The `Load` method can populate a record from a data map.

```javascript
record.Set("title", "example")
record.Set("users+", "6jyr1y02438et52") // append to existing value
record.Load(data)
```

--------------------------------

### PocketBase dbx.Expression: And() Combination

Source: https://pocketbase.io/docs/go-database

Explains how to combine multiple expressions using the `dbx.And()` function, resulting in a concatenated condition with `AND` operators.

```go
// (status = 1 AND username like "%john%")
dbx.And(
    dbx.NewExp("status = 1"),
    dbx.Like("username", "john"),
)
```

--------------------------------

### PocketBase dbx.Expression: Or() Combination

Source: https://pocketbase.io/docs/go-database

Illustrates combining multiple expressions with the `dbx.Or()` function, creating a condition linked by `OR` operators.

```go
// (status = 1 OR username like "%john%")
dbx.Or(
    dbx.NewExp("status = 1"),
    dbx.Like("username", "john")
)
```

--------------------------------

### Construct SQL Queries with Query Builder in JavaScript

Source: https://pocketbase.io/docs/js-database

Illustrates how to build SQL queries programmatically using PocketBase's query builder methods instead of writing raw SQL. This includes selecting columns, specifying tables, applying filters, limiting results, and ordering.

```javascript
const result = arrayOf(new DynamicModel({
  "id": "",
  "email": "",
}))

$app.db()
  .select("id", "email")
  .from("users")
  .andWhere($dbx.like("email", "example.com"))
  .limit(100)
  .orderBy("created ASC")
  .all(result)
```

--------------------------------

### Send Test Email (JavaScript)

Source: https://pocketbase.io/docs/api-settings

Sends a test email to a specified address using a given template. This action is restricted to superusers. Supported templates include 'verification', 'password-reset', and 'email-change'.

```javascript
import PocketBase from 'pocketbase';
const pb = new PocketBase('http://127.0.0.1:8090');

// ... authenticate as superuser
await pb.collection("_superusers").authWithPassword('test@example.com', '1234567890');

// Send a verification test email
await pb.settings.testEmail("test@example.com", "verification");
```

--------------------------------

### Register Custom Console Command (Go)

Source: https://pocketbase.io/docs/use-as-framework

This Go code registers a custom console command named 'hello' with PocketBase. When executed, this command prints 'Hello world!' to the console.

```Go
app.RootCmd.AddCommand(&cobra.Command{
    Use: "hello",
    Run: func(cmd *cobra.Command, args []string) {
        print("Hello world!")
    },
})
```

--------------------------------

### Handle File Download Requests (JavaScript)

Source: https://pocketbase.io/docs/js-event-hooks

The `onFileDownloadRequest` hook is executed before each API File download request. It provides capabilities to validate access or modify the file response before it's sent to the client.

```javascript
onFileDownloadRequest((e) => {
  // e.app
  // e.collection
  // e.record
  // e.fileField
  // e.servedPath
  // e.servedName
  // and all RequestEvent fields...
  e.next()
})
```

--------------------------------

### Execute Raw SQL - PocketBase Migration

Source: https://pocketbase.io/docs/js-migrations

Example of executing raw SQL statements within a PocketBase migration using JavaScript. The `app.db().newQuery(...).execute()` method allows for direct database manipulation, such as updating records.

```javascript
// pb_migrations/1687801090_set_pending_status.js
migrate((app) => {
    app.db().newQuery("UPDATE articles SET status = 'pending' WHERE status = ''").execute()
})
```

--------------------------------

### Writing Response Body

Source: https://pocketbase.io/docs/js-routing

Handles sending different types of responses to the client, including JSON, string, HTML, redirects, and file streams. It also supports serving blobs and empty responses.

```javascript
e.json(200, {"name": "John"})
e.string(200, "Lorem ipsum...")
e.html(200, "<h1>Hello!</h1>")
e.redirect(307, "https://example.com")
e.noContent(204)
e.fileFS($os.dirFS("..."), "example.txt")
e.stream(200, "application/octet-stream", reader)
e.blob(200, "application/octet-stream", [ ... ])
```

--------------------------------

### React Native File Upload - Conditional Object Syntax

Source: https://pocketbase.io/docs/how-to-use

Demonstrates how to handle file uploads in React Native for Android and iOS, which require a specific object format for FormData. It includes conditional logic to append files correctly based on the operating platform, ensuring compatibility with PocketBase.

```javascript
const data = new FormData(); // result is the resolved promise of ImagePicker.launchImageLibraryAsync let imageUri = result.assets[0].uri; if (Platform.OS === 'web') { const req = await fetch(imageUri); const blob = await req.blob();   data.append('avatar', blob); // regular File/Blob value } else { // the below object format works only on Android and iOS // (FormData.set() also doesn't seem to be supported so we use FormData.append())   data.append('avatar', { uri:  imageUri, type: 'image/*', name: imageUri.split('/').pop(), }); } ... await pb.collection('example').create(data)
```

--------------------------------

### Create PocketBase Collection Programmatically with JavaScript

Source: https://pocketbase.io/docs/js-migrations

Demonstrates how to create a new 'clients' collection using PocketBase's Collection API within a JavaScript migration file. It defines the collection type, name, access rules, fields (company, url), authentication settings (passwordAuth, otp), and an SQL index. The migration includes both an up and down function for saving and deleting the collection.

```javascript
// migrations/1687801090_create_clients_collection.js
migrate((app) => {
  // missing default options, system fields like id, email, etc. are initialized automatically
  // and will be merged with the provided configuration
  let collection = new Collection({
    type: "auth",
    name: "clients",
    listRule: "id = @request.auth.id",
    viewRule: "id = @request.auth.id",
    fields: [
      {
        type: "text",
        name: "company",
        required: true,
        max: 100,
      },
      {
        name: "url",
        type: "url",
        presentable: true,
      },
    ],
    passwordAuth: {
      enabled: false,
    },
    otp: {
      enabled: true,
    },
    indexes: [
      "CREATE INDEX idx_clients_company ON clients (company)"
    ]
  })

  app.save(collection)
}, (app) => {
  let collection = app.findCollectionByNameOrId("clients")

  app.delete(collection)
})
```

--------------------------------

### Generating NOT IN Expressions with dbx.notIn()

Source: https://pocketbase.io/docs/js-database

Demonstrates the creation of `NOT IN` clauses using `dbx.notIn()`. This method checks if a column's value is not present in a specified list of values.

```javascript
// status NOT IN ("public", "reviewed")
$dbx.notIn("status", "public", "reviewed")
```

--------------------------------

### Saving a File to a Record (JavaScript)

Source: https://pocketbase.io/docs/js-filesystem

Attaches a file to a collection record. This demonstrates how to create a file object from a local path and set it to a record's file field before saving the record. PocketBase handles file persistence, validation, and deletion of old files automatically.

```javascript
let record = $app.findRecordById("articles", "RECORD_ID")
// Other available File factories
// - $filesystem.fileFromBytes(content, name)
// - $filesystem.fileFromURL(url)
// - $filesystem.fileFromMultipart(mfh)
let file = $filesystem.fileFromPath("/local/path/to/file")
// set new file (can be single or array of File values)
// (if the record has an old file it is automatically deleted on successful save)
record.set("yourFileField", file)
$app.save(record)
```

--------------------------------

### OAuth2 Authentication using JavaScript SDK

Source: https://pocketbase.io/docs/authentication

This JavaScript snippet demonstrates the 'all-in-one' OAuth2 authentication flow using the PocketBase JS SDK. It opens a popup for the OAuth2 provider, automatically closes it upon completion, and sends the OAuth2 data via a realtime connection. Ensure your click handler is not using async/await if popups are blocked on Safari.

```javascript
import PocketBase from 'pocketbase';

const pb = new PocketBase('https://pocketbase.io');

// This method initializes a one-off realtime subscription and will
// open a popup window with the OAuth2 vendor page to authenticate.
// 
// Once the external OAuth2 sign-in/sign-up flow is completed, the popup
// window will be automatically closed and the OAuth2 data sent back
// to the user through the previously established realtime connection.
// 
// If the popup is being blocked on Safari, make sure that your click handler is not using async/await.
pb.collection('users').authWithOAuth2({ provider: 'google' }).then((authData) => {
    console.log(authData)
    // after the above you can also access the auth data from the authStore
    console.log(pb.authStore.isValid);
    console.log(pb.authStore.token);
    console.log(pb.authStore.record.id);

    // "logout" the last authenticated record
    pb.authStore.clear();
});
```

--------------------------------

### Use Superuser Client in Server Actions (JavaScript)

Source: https://pocketbase.io/docs/how-to-use

Shows how to import and use a pre-initialized superuser PocketBase client within a server-side action function. This allows for performing actions such as creating data entries with superuser privileges after necessary validations.

```javascript
import superuserClient from './src/superuser.js'
async function serverAction(req, resp) {
  // ... do some extra data validations or handling ...
  // send a create request as superuser
  await superuserClient.collection('example').create({
    ...
  })
}
```

--------------------------------

### Set Record Field Values in JavaScript

Source: https://pocketbase.io/docs/js-records

Demonstrates how to set single field values, append to existing values (e.g., for relation lists), and populate a record from a data map using the `set()` and `load()` methods. Supports type-specific modifiers and custom data.

```javascript
record.set("title", "example")
record.set("users+", "6jyr1y02438et52") // append to existing value
record.load(data)
```

--------------------------------

### PocketBase Realtime API Subscription in JavaScript

Source: https://pocketbase.io/docs/api-realtime

This snippet demonstrates how to subscribe to real-time updates for records in PocketBase using the JavaScript SDK. It covers subscribing to all records within a collection ('*') or to a specific record by its ID. Authorization can be optionally handled before subscribing. The callback function receives event data including the action and the record itself.

```javascript
import PocketBase from 'pocketbase';
const pb = new PocketBase('http://127.0.0.1:8090');

// (Optionally) authenticate
await pb.collection('users').authWithPassword('test@example.com', '1234567890');

// Subscribe to changes in any record in the collection
pb.collection('example').subscribe('*', function (e) {
    console.log(e.action);
    console.log(e.record);
}, { /* other options like expand, custom headers, etc. */ });

// Subscribe to changes only in the specified record
pb.collection('example').subscribe('RECORD_ID', function (e) {
    console.log(e.action);
    console.log(e.record);
}, { /* other options like expand, custom headers, etc. */ });

// Unsubscribe
pb.collection('example').unsubscribe('RECORD_ID'); // remove all 'RECORD_ID' subscriptions
pb.collection('example').unsubscribe('*'); // remove all '*' topic subscriptions
pb.collection('example').unsubscribe(); // remove all subscriptions in the collection
```

--------------------------------

### Truncate Collection (JavaScript)

Source: https://pocketbase.io/docs/api-collections

Removes all records, associated files, and relations from a collection. This is a superuser-only operation and requires authentication.

```javascript
import PocketBase from 'pocketbase';
const pb = new PocketBase('http://127.0.0.1:8090');

... await pb.collection("_superusers").authWithPassword('test@example.com', '1234567890');
await pb.collections.truncate('demo');
```

--------------------------------

### Delete Collection (JavaScript)

Source: https://pocketbase.io/docs/api-collections

Deletes a single collection by its ID or name. This action is restricted to superusers. Requires authentication.

```javascript
import PocketBase from 'pocketbase';
const pb = new PocketBase('http://127.0.0.1:8090');

... await pb.collection("_superusers").authWithPassword('test@example.com', '1234567890');
await pb.collections.delete('demo');
```

--------------------------------

### Set and Get GeoPoint in PocketBase (JavaScript)

Source: https://pocketbase.io/docs/collections

Illustrates setting and retrieving GeoPoint field values in PocketBase using JavaScript. The field can be set with a map containing 'lon' and 'lat' keys. The retrieved value is accessed via the `get` method.

```JavaScript
record.set("address", {"lon":12.34, "lat":45.67})
const address = record.get("address")
```

--------------------------------

### List Collections (JavaScript) - PocketBase

Source: https://pocketbase.io/docs/api-collections

Fetches a paginated list of collections from PocketBase. Requires superuser authentication. Supports filtering and sorting. Can also fetch all collections or the first matching item.

```javascript
import PocketBase from 'pocketbase';
const pb = new PocketBase('http://127.0.0.1:8090');

// Authenticate as superuser (required for this action)
await pb.collection('_superusers').authWithPassword('test@example.com', '1234567890');

// fetch a paginated collections list
const pageResult = await pb.collections.getList(1, 100, {
  filter: 'created >= "2022-01-01 00:00:00"',
});

// you can also fetch all collections at once via getFullList
const collections = await pb.collections.getFullList({
  sort: '-created'
});

// or fetch only the first collection that matches the specified filter
const collection = await pb.collections.getFirstListItem('type="auth"');
```

--------------------------------

### PocketBase Filter Operators

Source: https://pocketbase.io/docs/api-rules-and-filters

Lists and explains the available comparison and filtering operators supported by PocketBase's filter syntax. This includes standard equality, inequality, comparison, and 'like' operators, as well as 'any/at least one of' variants for array-like comparisons.

```plaintext
`=` Equal
`!=` NOT equal
`>` Greater than
`>=` Greater than or equal
`<` Less than
`<=` Less than or equal
`~` Like/Contains
`!~` NOT Like/Contains
`?= ` _Any/At least one of_ Equal
`?!= ` _Any/At least one of_ NOT equal
`?> ` _Any/At least one of_ Greater than
`?>= ` _Any/At least one of_ Greater than or equal
`?< ` _Any/At least one of_ Less than
`?<= ` _Any/At least one of_ Less than or equal
`?~ ` _Any/At least one of_ Like/Contains
`?!~ ` _Any/At least one of_ NOT Like/Contains
```

--------------------------------

### Load and Use a Local Module in a Hook

Source: https://pocketbase.io/docs/js-overview

This example demonstrates how to load and use a local JavaScript module within a PocketBase hook. It uses `require()` to load a `config.js` file from the `pb_hooks` directory (accessed via the `__hooks` global variable) and then accesses a `name` property from the loaded configuration. This is a workaround for sharing code across handlers.

```javascript
onBootstrap((e) => {
    e.next()
    const config = require(`${__hooks}/config.js`)
    console.log(config.name)
})
```

--------------------------------

### Reading a Record File as String (JavaScript)

Source: https://pocketbase.io/docs/js-filesystem

Retrieves and reads the content of a single record file as a plain string. It initializes the filesystem, gets a reader for the file key (constructed from record path and filename), and converts the reader's content to a string. Ensures resources (reader and filesystem) are closed to prevent leaks.

```javascript
let record = $app.findAuthRecordByEmail("users", "test@example.com")
// construct the full file key by concatenating the record storage path with the specific filename
let avatarKey = record.baseFilesPath() + "/" + record.get("avatar")
let fsys, reader, content;
try {
    // initialize the filesystem
    fsys = $app.newFilesystem();
    // retrieve a file reader for the avatar key
    reader = fsys.getReader(avatarKey)
    // copy as plain string
    content = toString(reader)
} finally {
    reader?.close();
    fsys?.close();
}
```

--------------------------------

### Custom PocketBase Collection Query (JavaScript)

Source: https://pocketbase.io/docs/js-collections

Constructs custom collection queries using a SELECT DB builder. Allows filtering with andWhere, ordering with orderBy, and retrieving all results with all().

```javascript
let collections = arrayOf(new Collection)
$app.collectionQuery(). andWhere($dbx.hashExp({"viewRule": null})). orderBy("created DESC"). all(collections)
```

--------------------------------

### List/Search Records - JavaScript

Source: https://pocketbase.io/docs/api-records

Fetches a paginated list of records from a specified collection. Supports filtering, sorting, and fetching all records or the first matching record. Requires the PocketBase SDK. Returns a list of records or a single record based on the method used.

```JavaScript
import PocketBase from 'pocketbase';
const pb = new PocketBase('http://127.0.0.1:8090');

// fetch a paginated records list
const resultList = await pb.collection('posts').getList(1, 50, {
    filter: 'created >= "2022-01-01 00:00:00" && someField1 != someField2',
});

// you can also fetch all records at once via getFullList
const records = await pb.collection('posts').getFullList({
    sort: '-created',
});

// or fetch only the first record that matches the specified filter
const record = await pb.collection('posts').getFirstListItem('someField="test"', {
    expand: 'relField1,relField2.subRelField',
});
```

--------------------------------

### Delete Record (JavaScript)

Source: https://pocketbase.io/docs/js-records

Deletes a specific record from a collection by its ID. It first finds the record using `$app.findRecordById('collectionName', 'RECORD_ID')` and then uses `$app.delete(record)` to remove it from the database.

```javascript
let record = $app.findRecordById("articles", "RECORD_ID")
$app.delete(record)
```

--------------------------------

### Create New PocketBase Collection (JavaScript)

Source: https://pocketbase.io/docs/js-collections

Creates a new collection with specified type, name, rules, fields, and indexes. System fields are automatically initialized. Uses $app.save() to persist the collection.

```javascript
// missing default options, system fields like id, email, etc. are initialized automatically // and will be merged with the provided configuration let collection = new Collection({
    type: "base", // base | auth | view
    name: "example",
    listRule: null,
    viewRule: "@request.auth.id != ''",
    createRule: "",
    updateRule: "@request.auth.id != ''",
    deleteRule: null,
    fields: [
        { name: "title", type: "text", required: true, max: 10 },
        {
            name: "user",
            type: "relation",
            required: true,
            maxSelect: 1,
            collectionId: "ae40239d2bc4477",
            cascadeDelete: true,
        },
    ],
    indexes: [
        "CREATE UNIQUE INDEX idx_user ON example (user)"
    ],
})
// validate and persist
// (use saveNoValidate to skip fields validation)
$app.save(collection)
```

--------------------------------

### Hide/Unhide Record Fields (JavaScript)

Source: https://pocketbase.io/docs/go-records

Details how to control the visibility of record fields during serialization using `Hide` and `Unhide` methods. This is often used in conjunction with `OnRecordEnrich` hooks to dynamically manage field visibility based on user roles or other conditions.

```javascript
app.OnRecordEnrich("articles").BindFunc(func(e *core.RecordEnrichEvent) error {
    // dynamically show/hide a record field depending on whether the current
    // authenticated user has a certain "role" (or any other field constraint)
    if e.RequestInfo.Auth == nil || (!e.RequestInfo.Auth.IsSuperuser() && e.RequestInfo.Auth.GetString("role") != "staff") {
        e.Record.Hide("someStaffOnlyField")
    }
    return e.Next()
})

// For custom fields, it's required to call explicitly record.WithCustomData(true)
// to allow them in the public serialization.
```

--------------------------------

### Fetch Single PocketBase Collection by Name or ID (JavaScript)

Source: https://pocketbase.io/docs/js-collections

Retrieves a single collection by its name or ID. Throws an error if no collection is found. Uses the $app.findCollectionByNameOrId method.

```javascript
let collection = $app.findCollectionByNameOrId("example")
```

--------------------------------

### Define a GET API Route with Path Parameter

Source: https://pocketbase.io/docs/js-overview

This snippet demonstrates how to define a custom HTTP GET route in PocketBase using JavaScript. It captures a 'name' parameter from the URL and returns a JSON response. The `routerAdd` function is used for route definition, and `e.request.pathValue` retrieves path parameters.

```javascript
routerAdd("GET", "/hello/{name}", (e) => {
  let name = e.request.pathValue("name")
  return e.json(200, { "message": "Hello " + name })
})
```

--------------------------------

### Accessing Request Data in PocketBase Handlers (JavaScript)

Source: https://pocketbase.io/docs/js-routing

Shows how to access various components of an incoming request within PocketBase route handlers using the `RequestEvent` object (`e`). This includes reading path parameters, query parameters, headers, uploaded files, and the request body.

```javascript
// Reading path parameters
let id = e.request.pathValue("id")

// Reading query parameters
let search = e.request.url.query().get("search") // or via the parsed request info
let search = e.requestInfo().query["search"]

// Reading request headers
let token = e.request.header.get("Some-Header") // or via the parsed request info
// (the header value is always normalized per the @request.headers.* API rules format)
let token = e.requestInfo().headers["some_header"]

// Retrieving uploaded files
// retrieve the uploaded files and parse the found multipart data into a ready-to-use []*filesystem.File
let files = e.findUploadedFiles("document")
// or retrieve the raw single multipart/form-data file and header
let [mf, mh] = e.request.formFile("document")

// Reading request body
// retrieve the entire raw body as string
console.log(toString(e.request.body))

// read the body fields via the parsed request object
let body = e.requestInfo().body
console.log(body.title)

// OR read/scan the request body fields into a typed object
const data = new DynamicModel({
  // describe the fields to read (used also as initial values)
  someTextField: "",
  someIntValue: 0,
  someFloatValue: -0,
  someBoolField: false,
  someArrayField: [],
  someObjectField: {},
  // object props are accessible via .get(key)
})
e.bindBody(data)
console.log(data.sometextField)
```

--------------------------------

### Impersonate User in JavaScript

Source: https://pocketbase.io/docs/api-records

Allows superusers to authenticate as another user by generating a temporary, non-refreshable auth token. This requires prior authentication as a superuser. The duration of the impersonated session can be specified in seconds.

```javascript
import PocketBase from 'pocketbase';

const pb = new PocketBase('http://127.0.0.1:8090');

// Authenticate as a superuser first
await pb.collection("_superusers").authWithPassword("test@example.com", "1234567890");

// Impersonate a user (optional duration in seconds)
const impersonateClient = pb.collection("users").impersonate("USER_RECORD_ID", 3600);

// Log the impersonated token and user data
console.log(impersonateClient.authStore.token);
console.log(impersonateClient.authStore.record);

// Send requests as the impersonated user
impersonateClient.collection("example").getFullList();
```

--------------------------------

### Create New Record Programmatically (JS)

Source: https://pocketbase.io/docs/js-records

Details how to programmatically create a new record. This involves finding a collection, instantiating a new `Record`, setting field values (including auto-generated slugs and files), and then saving the record. File handling includes creating files from paths, bytes, and URLs.

```javascript
let collection = $app.findCollectionByNameOrId("articles")
    let record = new Record(collection)

    record.set("title", "Lorem ipsum")
    record.set("active", true)
    // field type specific modifiers can also be used
    record.set("slug:autogenerate", "post-")
    // new files must be one or a slice of filesystem.File values
    // // note1: see all factories in /jsvm/modules/_filesystem.html
    // // note2: for reading files from a request event you can also use e.findUploadedFiles("fileKey")
    let f1 = $filesystem.fileFromPath("/local/path/to/file1.txt")
    let f2 = $filesystem.fileFromBytes("test content", "file2.txt")
    let f3 = $filesystem.fileFromURL("https://example.com/file3.pdf")
    record.set("documents", [f1, f2, f3])

    // validate and persist
    // (use saveNoValidate to skip fields validation)
    $app.save(record);
```

--------------------------------

### Send Custom Realtime Message (JavaScript)

Source: https://pocketbase.io/docs/js-realtime

This snippet demonstrates how to send a custom JSON payload to all clients subscribed to the 'example' topic using PocketBase's subscriptionsBroker in JavaScript. It retrieves all connected clients and checks if they have subscribed to the specified topic before sending the message. Requires PocketBase server-side.

```javascript
const message = new SubscriptionMessage({
  name: "example",
  data: JSON.stringify({ ... }),
});

// retrieve all clients (clients id indexed map)
const clients = $app.subscriptionsBroker().clients()

for (let clientId in clients) {
  if (clients[clientId].hasSubscription("example")) {
    clients[clientId].send(message)
  }
}
```

--------------------------------

### Get Collection Scaffolds in JavaScript and Dart

Source: https://pocketbase.io/docs/api-collections

Retrieves an object containing all collection types and their default fields, primarily used by the Dashboard UI. This action requires superuser privileges.

```javascript
import PocketBase from 'pocketbase';
const pb = new PocketBase('http://127.0.0.1:8090');

// Authenticate as superuser (example)
await pb.collection("_superusers").authWithPassword('test@example.com', '1234567890');

const scaffolds = await pb.collections.getScaffolds();
```

```dart
import 'package:pocketbase/pocketbase.dart';

final pb = PocketBase('http://127.0.0.1:8090');

// Authenticate as superuser (example)
await pb.collection("_superusers").authWithPassword('test@example.com', '1234567890');

final scaffolds = await pb.collections.getScaffolds();
```

--------------------------------

### Initialize PocketBase Superuser Client (JavaScript)

Source: https://pocketbase.io/docs/how-to-use

Demonstrates how to initialize a PocketBase client for superuser authentication in a Node.js environment. This client can be used for server-side actions requiring elevated privileges. It handles authentication via email/password or an API key and disables auto-cancellation for managing multiple async requests.

```javascript
// src/superuser.js
import PocketBase from "pocketbase"
const superuserClient = new PocketBase('https://example.com'); // disable autocancellation so that we can handle async requests from multiple users
superuserClient.autoCancellation(false); // option 1: authenticate as superuser using email/password (could be filled with ENV params)
await superuserClient.collection('_superusers').authWithPassword(SUPERUSER_EMAIL, SUPERUSER_PASS, { // This will trigger auto refresh or auto reauthentication in case // the token has expired or is going to expire in the next 30 minutes.
  autoRefreshThreshold: 30 * 60
})
// option 2: OR authenticate as superuser via long-lived "API key" // (see https://pocketbase.io/docs/authentication/#api-keys)
superuserClient.authStore.save('YOUR_GENERATED_SUPERUSER_TOKEN')
export default superuserClient;
```

--------------------------------

### PocketBase Go Basic Server Setup

Source: https://pocketbase.io/docs/go-overview

This Go code snippet demonstrates how to initialize and start a PocketBase application. It includes binding a function to the serve event to serve static files from the './pb_public' directory. Ensure Go 1.23+ is installed and dependencies are managed with `go mod`.

```go
package main

import (
	"log"
	"os"

	"github.com/pocketbase/pocketbase"
	"github.com/pocketbase/pocketbase/apis"
	"github.com/pocketbase/pocketbase/core"
)

func main() {
	app := pocketbase.New()

	app.OnServe().BindFunc(func(se *core.ServeEvent) error {
		// serves static files from the provided public dir (if exists)
		se.Router.GET("/{path...}", apis.Static(os.DirFS("./pb_public"), false))
		return se.Next()
	})

	if err := app.Start(); err != nil {
		log.Fatal(err)
	}
}
```

--------------------------------

### Binding Parameters for Security

Source: https://pocketbase.io/docs/js-database

Learn how to securely bind parameters to SQL queries using named placeholders (`{:paramName}`) to prevent SQL injection attacks.

```APIDOC
## Binding Parameters for Security

### Description
Prevent SQL injection by using named parameters (`{:paramName}`) in your SQL statements and providing their values via the `bind()` method. This ensures that user-provided input is treated as data, not executable SQL.

### Method
- `bind(params)`: Binds an object of named parameters to the query.

### Request Example
```javascript
const result = arrayOf(new DynamicModel({
  "name": "",
  "created": "",
}))

$app.db()
  .newQuery("SELECT name, created FROM posts WHERE created >= {:from} and created <= {:to}")
  .bind({
    "from": "2023-06-25 00:00:00.000Z",
    "to": "2023-06-28 23:59:59.999Z",
  })
  .all(result)

console.log(result.length)
```
```

--------------------------------

### Delete PocketBase Collection (JavaScript)

Source: https://pocketbase.io/docs/js-collections

Deletes an existing collection. First, the collection is fetched by name or ID, and then $app.delete() is called with the collection object.

```javascript
let collection = $app.findCollectionByNameOrId("example")
$app.delete(collection)
```

--------------------------------

### PocketBase Route Path Matching Examples (JavaScript)

Source: https://pocketbase.io/docs/js-routing

Illustrates various route path matching patterns in PocketBase, including host-specific routes, trailing slash wildcards, named wildcard parameters, and exact path matching. These examples leverage PocketBase's routing capabilities which are based on Go's `net/http.ServeMux`.

```javascript
// match "GET example.com/index.html"
routerAdd("GET", "example.com/index.html", ...)

// match "GET /index.html" (for any host)
routerAdd("GET", "/index.html", ...)

// match "GET /static/", "GET /static/a/b/c", etc.
routerAdd("GET", "/static/", ...)

// match "GET /static/", "GET /static/a/b/c", etc. // (similar to the above but with a named wildcard parameter)
routerAdd("GET", "/static/{path...}", ...)

// match only "GET /static/" (if no "/static" is registered, it is 301 redirected)
routerAdd("GET", "/static/{$}", ...)

// match "GET /customers/john", "GET /customers/jane", etc.
routerAdd("GET", "/customers/{name}", ...)
```

--------------------------------

### Registering Middlewares with Priority

Source: https://pocketbase.io/docs/js-routing

Illustrates registering global middlewares with custom priorities and attaching a middleware to a specific route. The example demonstrates the execution order of middlewares.

```javascript
routerUse((e) => {
    console.log(1)
    return e.next()
})
routerUse(new Middleware((e) => {
    console.log(2)
    return e.next()
}, -1))
routerAdd("GET", "/hello", (e) => {
    console.log(4)
    return e.string(200, "Hello!")
}, (e) => {
    console.log(3)
    return e.next()
})
```

--------------------------------

### Send HTTP Request in JavaScript (PocketBase)

Source: https://pocketbase.io/docs/js-sending-http-requests

Sends a generic HTTP request using the $http.send helper. It can be configured with URL, method, body, headers, and timeout. The response includes headers, cookies, status code, and body. Throws on timeout or network errors.

```javascript
// throws on timeout or network connectivity error
const res = $http.send({
  url: "",
  method: "GET",
  body: "", // ex. JSON.stringify({"test": 123}) or new FormData()
  headers: {},
  // ex. {"content-type": "application/json"}
  timeout: 120, // in seconds
})

console.log(res.headers) // the response headers (ex. res.headers['X-Custom'][0])
console.log(res.cookies) // the response cookies (ex. res.cookies.sessionId.value)
console.log(res.statusCode) // the response HTTP status code
console.log(res.body) // the response body as plain bytes array
console.log(res.json) // the response body as parsed json array or map
```

--------------------------------

### Generate File URL with Thumbnails (JavaScript)

Source: https://pocketbase.io/docs/files-handling

Generates a URL for accessing a file from PocketBase, with an option to create a thumbnail. This method is convenient when you have a record instance and need to construct a file URL, potentially with specific thumbnail dimensions. Ensure the 'pocketbase' SDK is imported and initialized.

```javascript
import PocketBase from 'pocketbase';

const pb = new PocketBase('http://127.0.0.1:8090');

// ... assuming 'record' is fetched and 'firstFilename' is obtained
const record = await pb.collection('example').getOne('RECORD_ID');
const firstFilename = record.documents[0];

// Generate URL with a thumbnail of 100x250 pixels
const url = pb.files.getURL(record, firstFilename, {'thumb': '100x250'});

console.log(url);
```

--------------------------------

### Generating EXISTS Expressions with dbx.exists()

Source: https://pocketbase.io/docs/js-database

Shows how to use `dbx.exists()` to create `EXISTS` clauses, typically used with subqueries. This checks for the existence of records matching a specified condition.

```javascript
// EXISTS (SELECT 1 FROM users WHERE status = 'active')
$dbx.exists(dbx.exp("SELECT 1 FROM users WHERE status = 'active'"))
```

--------------------------------

### Generating Raw SQL Expressions with dbx.exp()

Source: https://pocketbase.io/docs/js-database

Shows how to create custom SQL expressions using `dbx.exp()`. This method allows for raw SQL fragments and supports parameter binding for dynamic values, preventing SQL injection.

```javascript
$dbx.exp("status = 'public'")
$dbx.exp("total > {:min} AND total < {:max}", { min: 10, max: 30 })
```

--------------------------------

### Offsetting Query Results (offset)

Source: https://pocketbase.io/docs/js-database

Specifies the OFFSET clause of the query, determining how many records to skip from the beginning of the result set. Typically used with `limit` for pagination.

```javascript
const app = require("pocketbase");

// Example usage:
const result = await app.db()
    .select("users.*")
    .from("users")
    .offset(5)
    .limit(30)
    .get();
```

--------------------------------

### PocketBase dbx.Expression: Like() Clause

Source: https://pocketbase.io/docs/go-database

Explains how to create `LIKE` expressions for partial string matching using `dbx.Like()`. It supports multiple values combined with `AND` and provides options for custom matching behavior.

```go
// name LIKE "%test1%" AND name LIKE "%test2%"
dbx.Like("name", "test1", "test2")
// name LIKE "test1%"
dbx.Like("name", "test1").Match(false, true)
```

--------------------------------

### Create Custom Record Query (JS)

Source: https://pocketbase.io/docs/js-records

Explains how to create custom record queries using the `$app.recordQuery()` method. This method returns a SELECT DB builder that can be used with various methods for advanced querying, including filtering, ordering, and limiting results. It also demonstrates populating an array with `arrayOf(new Record)` for multiple results.

```javascript
function findTopArticle() {
      let record = new Record();
      $app.recordQuery("articles")
        .andWhere($dbx.hashExp({ "status": "active" }))
        .orderBy("rank ASC")
        .limit(1)
        .one(record)
      return record
    }
    let article = findTopArticle()

    // the below is identical to
    // $app.findRecordsByFilter("articles", "status = 'active'", '-published', 10)
    // but allows more advanced use cases and filtering (aggregations, subqueries, etc.)
    function findLatestArticles() {
      let records = arrayOf(new Record);
      $app.recordQuery("articles")
        .andWhere($dbx.hashExp({"status": "active"}))
        .orderBy("published DESC")
        .limit(10)
        .all(records)
      return records
    }
    let articles = findLatestArticles()
```

--------------------------------

### Constructing Multipart FormData for Batch Requests (JavaScript)

Source: https://pocketbase.io/docs/api-records

Demonstrates how to construct a FormData object for batch API requests when using multipart/form-data. This includes serializing JSON payloads and appending files with specific naming conventions. It's useful when not using SDKs or for manual FormData construction.

```javascript
const formData = new FormData();
formData.append("@jsonPayload", JSON.stringify({
  requests: [
    {
      method: "POST",
      url: "/api/collections/example/records?expand=user",
      body: { title: "test1" },
    },
    {
      method: "PATCH",
      url: "/api/collections/example/records/RECORD_ID",
      body: { title: "test2" },
    },
    {
      method: "DELETE",
      url: "/api/collections/example/records/RECORD_ID",
    },
  ]
}));

// file for the first request
formData.append("requests.0.document", new File(...)); // file for the second request
formData.append("requests.1.document", new File(...));
```

--------------------------------

### List API Logs (JavaScript)

Source: https://pocketbase.io/docs/api-logs

Retrieves a paginated list of API logs. This action requires superuser authentication. It accepts pagination parameters and an optional filter. Dependencies: PocketBase SDK.

```javascript
import PocketBase from 'pocketbase';
const pb = new PocketBase('http://127.0.0.1:8090');

// Authenticate as superuser
await pb.collection("_superusers").authWithPassword('test@example.com', '1234567890');

// Fetch logs with filtering
const pageResult = await pb.logs.getList(1, 20, { filter: 'data.status >= 400' });
```

--------------------------------

### Initialize Default Settings - PocketBase Migration

Source: https://pocketbase.io/docs/js-migrations

Example of initializing default application settings within a PocketBase migration using JavaScript. It demonstrates how to access and modify various settings related to metadata, logging, and other application configurations using the `app.settings()` and `app.save()` methods.

```javascript
// pb_migrations/1687801090_initial_settings.js
migrate((app) => {
    let settings = app.settings()
    // for all available settings fields you could check
    // /jsvm/interfaces/core.Settings.html
    settings.meta.appName = "test"
    settings.meta.appURL = "https://example.com"
    settings.logs.maxDays = 2
    settings.logs.logAuthId = true
    settings.logs.logIP = false

    app.save(settings)
})
```

--------------------------------

### Ordering Query Results (orderBy, andOrderBy)

Source: https://pocketbase.io/docs/js-database

Specifies the ORDER BY clause for database queries. Columns can be ordered ascending (ASC) or descending (DESC). `andOrderBy` appends additional columns to the existing order clause.

```javascript
const app = require("pocketbase");

// Example usage:
const result = await app.db()
    .select("users.*")
    .from("users")
    .orderBy("created ASC", "updated DESC")
    .andOrderBy("title ASC")
    .get();
```

--------------------------------

### Writing Response Headers in PocketBase (JavaScript)

Source: https://pocketbase.io/docs/js-routing

Demonstrates how to set custom response headers within PocketBase route handlers. This is achieved by accessing the response object from the `RequestEvent` and using the `header().set()` method.

```javascript
e.response.header().set("Some-Header", "123")
```

--------------------------------

### Impersonate User with Custom Token Duration (JavaScript)

Source: https://pocketbase.io/docs/authentication

This snippet demonstrates how a superuser can impersonate another user in PocketBase using JavaScript. It shows the process of authenticating as a superuser, generating an impersonation token with an optional custom duration (in seconds), and then using this token to make requests as the impersonated user. The generated token is not renewable.

```javascript
import PocketBase from 'pocketbase';

const pb = new PocketBase('http://127.0.0.1:8090');

// ... authenticate as superuser
await pb.collection("_superusers").authWithPassword("test@example.com", "1234567890");

// impersonate
// (the custom token duration is in seconds and it is optional)
const impersonateClient = await pb.collection("users").impersonate("USER_RECORD_ID", 3600)

// log the impersonate token and user data
console.log(impersonateClient.authStore.token);
console.log(impersonateClient.authStore.record);

// send requests as the impersonated user
const items = await impersonateClient.collection("example").getFullList();
```

--------------------------------

### Compare Strings with Constant Time (Go)

Source: https://pocketbase.io/docs/go-miscellaneous

Demonstrates secure string comparison using PocketBase's security.Equal function in Go. This method helps prevent timing attacks by comparing strings in constant time.

```Go
isEqual := security.Equal(hash1, hash2)
```

--------------------------------

### Upload Backup File (JavaScript)

Source: https://pocketbase.io/docs/api-backups

Uploads a zip archive as a backup file using multipart/form-data. Requires a valid authorization token. The response indicates success or specific validation errors.

```javascript
import PocketBase from 'pocketbase';
const pb = new PocketBase('http://127.0.0.1:8090');

// Authenticate as superuser first
await pb.collection("_superusers").authWithPassword('test@example.com', '1234567890');

// Assuming you have a File object named 'backupFile'
// const backupFile = ...;
// await pb.backups.upload(backupFile);
```

--------------------------------

### Import Collections in JavaScript and Dart

Source: https://pocketbase.io/docs/api-collections

Bulk imports a provided collections configuration. This action requires superuser privileges. The `deleteMissing` parameter controls whether existing collections not in the import will be deleted. The import data can be sent as JSON or multipart/form-data.

```javascript
import PocketBase from 'pocketbase';
const pb = new PocketBase('http://127.0.0.1:8090');

// Authenticate as superuser (example)
await pb.collection("_superusers").authWithPassword('test@example.com', '1234567890');

const importData = [
  {
    name: 'collection1',
    schema: [
      {
        name: 'status',
        type: 'bool',
      },
    ],
  },
  {
    name: 'collection2',
    schema: [
      {
        name: 'title',
        type: 'text',
      },
    ],
  },
];

await pb.collections.import(importData, false);
```

```dart
import 'package:pocketbase/pocketbase.dart';

final pb = PocketBase('http://127.0.0.1:8090');

// Authenticate as superuser (example)
await pb.collection("_superusers").authWithPassword('test@example.com', '1234567890');

final importData = [
  CollectionModel(
    name: "collection1",
    schema: [
      SchemaField(name: "status", type: "bool"),
    ],
  ),
  CollectionModel(
    name: "collection2",
    schema: [
      SchemaField(name: "title", type: "text"),
    ],
  ),
];

await pb.collections.import(importData, deleteMissing: false);
```

--------------------------------

### Load and Render HTML Templates in PocketBase

Source: https://pocketbase.io/docs/js-rendering-templates

Loads multiple HTML template files and renders them with provided data. Ensures contextual auto-escaping for secure output by default. Supports raw content rendering via the 'raw' function.

```javascript
const html = $template.loadFiles( 
  `${__hooks}/views/base.html`,
  `${__hooks}/views/partial1.html`,
  `${__hooks}/views/partial2.html`,
).render(data)
```

--------------------------------

### Programmatically Expand Record Relations (JavaScript)

Source: https://pocketbase.io/docs/js-records

Expands relations for single or multiple records programmatically. Use `$app.expandRecord(record, expands, customFetchFunc)` for a single record or `$app.expandRecords(records, expands, customFetchFunc)` for multiple records. Expanded relations can be accessed using `record.expandedOne(relName)` or `record.expandedAll(relName)`.

```javascript
let record = $app.findFirstRecordByData("articles", "slug", "lorem-ipsum")
// expand the "author" and "categories" relations
$app.expandRecord(record, ["author", "categories"], null)

// print the expanded records
console.log(record.expandedOne("author"))
console.log(record.expandedAll("categories"))
```

--------------------------------

### Intercept Record Creation Event Hook (Go)

Source: https://pocketbase.io/docs/use-as-framework

This Go code demonstrates how to bind to the `OnRecordCreateRequest` event for 'posts' in PocketBase. If the request is not from a superuser, it modifies the record's 'status' field to 'pending' before proceeding.

```Go
app.OnRecordCreateRequest("posts").BindFunc(func(e *core.RecordRequestEvent) error {
// if not superuser, overwrite the newly submitted "posts" record status to pending
if !e.HasSuperuserAuth() {
        e.Record.Set("status", "pending")
}
return e.Next()
})
```

--------------------------------

### Limiting Query Results (limit)

Source: https://pocketbase.io/docs/js-database

Specifies the LIMIT clause of the query, restricting the maximum number of records returned. This is commonly used with `offset` to implement pagination.

```javascript
const app = require("pocketbase");

// Example usage:
const result = await app.db()
    .select("users.*")
    .from("users")
    .limit(30)
    .get();
```

--------------------------------

### Managing Authentication State in PocketBase (JavaScript)

Source: https://pocketbase.io/docs/js-routing

Explains how to access and check the authentication status of a request within PocketBase route handlers. It covers retrieving the authenticated user record, checking if the request is from a guest, and determining if the user has superuser privileges.

```javascript
// Retrieving the current auth state
let authRecord = e.auth
let isGuest = !e.auth  // the same as "e.auth?.isSuperuser()"
let isSuperuser = e.hasSuperuserAuth()

// Alternatively you could also access the request data from the summarized request info instance _(usually used in hooks like the`onRecordEnrich` where there is no direct access to the request) _.
let info = e.requestInfo()
let authRecord = info.auth
let isGuest = !info.auth
// the same as "info.auth?.isSuperuser()"
let isSuperuser = info.hasSuperuserAuth()
```

--------------------------------

### Generating NOT EXISTS Expressions with dbx.notExists()

Source: https://pocketbase.io/docs/js-database

Illustrates the use of `dbx.notExists()` to create `NOT EXISTS` clauses. This is used to ensure that no records matching a subquery condition exist.

```javascript
// NOT EXISTS (SELECT 1 FROM users WHERE status = 'active')
$dbx.notExists(dbx.exp("SELECT 1 FROM users WHERE status = 'active'"))
```

--------------------------------

### Refresh Auth Token (JavaScript)

Source: https://pocketbase.io/docs/authentication

This JavaScript example demonstrates how to verify an existing authentication token in PocketBase by using the `authRefresh` method. If the token is valid, it returns a new token with an updated expiration claim and the latest user data. Invalid tokens will result in an error response. This method does not invalidate previously issued tokens.

```javascript
const pb = new PocketBase('http://127.0.0.1:8090');

// Assuming you have an existing auth token stored in pb.authStore

// Attempt to refresh the auth token
try {
    const updatedAuth = await pb.collection("users").authRefresh();
    // On success, updatedAuth contains the new token and user data
    console.log("Token refreshed successfully:", updatedAuth);
} catch (error) {
    // On failure, an error response is returned
    console.error("Token refresh failed:", error);
}
```

--------------------------------

### Delete Backup File (JavaScript)

Source: https://pocketbase.io/docs/api-backups

Deletes a single backup file by its key. This action is restricted to superusers and will fail if a restore operation is in progress. Requires a valid authorization token.

```javascript
import PocketBase from 'pocketbase';
const pb = new PocketBase('http://127.0.0.1:8090');

// Authenticate as superuser first
await pb.collection("_superusers").authWithPassword('test@example.com', '1234567890');

await pb.backups.delete('pb_data_backup.zip');
```

--------------------------------

### Deleting a File from a Record (JavaScript)

Source: https://pocketbase.io/docs/js-filesystem

Removes a file associated with a collection record. This can be done by setting the file field to null to delete all associated files, or by using the '-' modifier to remove specific files from a multi-file field. The database entry referencing the file is also removed.

```javascript
let record = $app.findRecordById("articles", "RECORD_ID")
// if you want to "reset" a file field (aka. deleting the associated single or multiple files)
// you can set it to null
record.set("yourFileField", null)
// OR if you just want to remove individual file(s) from a multiple file field you can use the "-" modifier
// (the value could be a single filename string or slice of filename strings)
record.set("yourFileField-", "example_52iWbGinWd.txt")
$app.save(record)
```

--------------------------------

### Get Record Field Values in JavaScript

Source: https://pocketbase.io/docs/js-records

Explains how to retrieve single record field values with type casting using methods like `getBool()`, `getString()`, `getInt()`, `getFloat()`, `getDateTime()`, and `getStringSlice()`. Also covers retrieving unsaved files and unmarshalling JSON fields.

```javascript
record.get("someField")
record.getBool("someField")
record.getString("someField")
record.getInt("someField")
record.getFloat("someField")
record.getDateTime("someField")
record.getStringSlice("someField")
record.getUnsavedFiles("someFileField")
let result = new DynamicModel({ ... })
record.unmarshalJSONField("someJsonField", result)
```

--------------------------------

### Database Transaction (JavaScript)

Source: https://pocketbase.io/docs/js-records

Executes multiple database operations within a single transaction using `$app.runInTransaction(fn)`. Operations are persisted only if the transaction completes without errors. Nested transactions are supported using the `txApp` argument provided within the callback function. Avoid long-running tasks within transactions.

```javascript
let titles = ["title1", "title2", "title3"]
let collection = $app.findCollectionByNameOrId("articles")

$app.runInTransaction((txApp) => {
  // create new record for each title
  for (let title of titles) {
    let record = new Record(collection)
    record.set("title", title)
    txApp.save(record)
  }
})
```

--------------------------------

### Remove a Scheduled Cron Job in JavaScript

Source: https://pocketbase.io/docs/js-jobs-scheduling

Removes a previously registered cron job using its unique identifier. The `cronRemove` function takes the job ID as an argument to stop the scheduled execution.

```javascript
cronRemove("hello")
```

--------------------------------

### Add a Periodic Cron Job in JavaScript

Source: https://pocketbase.io/docs/js-jobs-scheduling

Schedules a function to run periodically using a cron expression. The `cronAdd` function takes a job ID, a cron expression string (supporting numeric lists, steps, ranges, or macros), and a handler function to execute. The handler function runs in its own goroutine.

```javascript
cronAdd("hello", "*/2 * * * *", () => {
    console.log("Hello!")
})
```

--------------------------------

### Go: Query Builder - Select and From

Source: https://pocketbase.io/docs/go-database

Demonstrates programmatic SQL statement construction using the db query builder. Shows how to use `Select()`, `From()`, `AndWhere()`, `Limit()`, and `OrderBy()` methods to build a SELECT query.

```Go
users := []struct { 
    Id    string `db:"id" json:"id"` 
    Email string `db:"email" json:"email"` 
}{}

app.DB(). Select("id", "email"). From("users"). AndWhere(dbx.Like("email", "example.com")). Limit(100). OrderBy("created ASC"). All(&users)
```

--------------------------------

### Upload Backup (JavaScript)

Source: https://pocketbase.io/docs/api-backups

Uploads an existing backup zip file to the PocketBase server. This operation requires superuser authentication. The backup file should be provided as a Blob object in the request body.

```javascript
import PocketBase from 'pocketbase';
const pb = new PocketBase('http://127.0.0.1:8090');

// Authenticate as superuser (replace with actual credentials)
await pb.collection("_superusers").authWithPassword('test@example.com', '1234567890');

// Assume 'backupData' is a Uint8Array or ArrayBuffer containing your backup file content
// Example: const backupData = new Uint8Array([...]);
// const blob = new Blob([backupData]);

// Upload the backup file
// await pb.backups.upload({ file: blob });
// console.log('Backup uploaded successfully.');

// Placeholder for actual file upload logic
console.log('Placeholder for backup upload. Provide actual file data.');
```

--------------------------------

### PocketBase dbx.Expression: NewExp() Examples

Source: https://pocketbase.io/docs/go-database

Illustrates the usage of `dbx.NewExp()` to create raw SQL expressions, with and without parameter binding. This is useful for custom WHERE conditions and injecting dynamic values securely.

```go
dbx.NewExp("status = 'public'")
dbx.NewExp("total > {:min} AND total < {:max}", dbx.Params{ "min": 10, "max": 30 })
```

--------------------------------

### Update Existing Record Programmatically (JS)

Source: https://pocketbase.io/docs/js-records

Demonstrates how to update an existing record programmatically. This involves fetching the record by its ID, modifying its fields, deleting existing files by name, and appending new files using various factory methods. The changes are then saved and validated.

```javascript
let record = $app.findRecordById("articles", "RECORD_ID")

    record.set("title", "Lorem ipsum")
    // delete existing record files by specifying their file names
    record.set("documents-", ["file1_abc123.txt", "file3_abc123.txt"])
    // append one or more new files to the already uploaded list
    // // note1: see all factories in /jsvm/modules/_filesystem.html
    // // note2: for reading files from a request event you can also use e.findUploadedFiles("fileKey")
    let f1 = $filesystem.fileFromPath("/local/path/to/file1.txt")
    let f2 = $filesystem.fileFromBytes("test content", "file2.txt")
    let f3 = $filesystem.fileFromURL("https://example.com/file3.pdf")
    record.set("documents+", [f1, f2, f3])

    // validate and persist
    // (use saveNoValidate to skip fields validation)
    $app.save(record);
```

--------------------------------

### PocketBase: Record Delete Hooks (JavaScript)

Source: https://pocketbase.io/docs/js-event-hooks

Handles different stages of record deletion in PocketBase. It includes hooks for before validation (onRecordDelete), before DB execution (onRecordDeleteExecute), after successful persistence (onRecordAfterDeleteSuccess), and after errors (onRecordAfterDeleteError). These hooks can be applied globally or to specific collections.

```javascript
// fires for every record
onRecordDelete((e) => {
  // e.app
  // e.record
  e.next()
})

// fires only for "users" and "articles" records
onRecordDelete((e) => {
  // e.app
  // e.record
  e.next()
}, "users", "articles")
```

```javascript
// fires for every record
onRecordDeleteExecute((e) => {
  // e.app
  // e.record
  e.next()
})

// fires only for "users" and "articles" records
onRecordDeleteExecute((e) => {
  // e.app
  // e.record
  e.next()
}, "users", "articles")
```

```javascript
// fires for every record
onRecordAfterDeleteSuccess((e) => {
  // e.app
  // e.record
  e.next()
})

// fires only for "users" and "articles" records
onRecordAfterDeleteSuccess((e) => {
  // e.app
  // e.record
  e.next()
}, "users", "articles")
```

```javascript
// fires for every record
onRecordAfterDeleteError((e) => {
  // e.app
  // e.record
  // e.error
  e.next()
})

// fires only for "users" and "articles" records
onRecordAfterDeleteError((e) => {
  // e.app
  // e.record
  // e.error
  e.next()
}, "users", "articles")
```

--------------------------------

### PocketBase Authentication with OAuth2 (JavaScript)

Source: https://pocketbase.io/docs/api-records

Authenticates a user using an OAuth2 provider (e.g., Google) by exchanging an authorization code for an authentication token. It supports optional data for new account creation during sign-up and provides access to the authentication store after successful login.

```javascript
import PocketBase from 'pocketbase';

const pb = new PocketBase('http://127.0.0.1:8090');

async function authWithOAuth2(code, verifier, redirectUrl) {
  try {
    const authData = await pb.collection('users').authWithOAuth2Code(
      'google', // OAuth2 provider name
      code,
      verifier,
      redirectUrl,
      // optional data that will be used for the new account on OAuth2 sign-up
      { 'name': 'test' }
    );

    // after the above you can also access the auth data from the authStore
    console.log(pb.authStore.isValid);
    console.log(pb.authStore.token);
    console.log(pb.authStore.record.id);

    // "logout" the last authenticated record
    pb.authStore.clear();
  } catch (error) {
    console.error('OAuth2 authentication failed:', error);
  }
}

// Example usage:
// authWithOAuth2('AUTHORIZATION_CODE', 'VERIFIER_TOKEN', 'YOUR_REDIRECT_URL');
```

--------------------------------

### Grouping Query Results (groupBy, andGroupBy)

Source: https://pocketbase.io/docs/js-database

Specifies the GROUP BY clause for database queries. `andGroupBy` appends additional columns to the existing group by clause. This is often used with aggregate functions.

```javascript
const app = require("pocketbase");

// Example usage:
const result = await app.db()
    .select("users.*")
    .from("users")
    .groupBy("department", "level")
    .get();
```

--------------------------------

### Log User Update Event

Source: https://pocketbase.io/docs/js-overview

This example shows how to create a hook that triggers after a user record is successfully updated. It logs the user's email to the console using `console.log` and then proceeds to the next hook in the chain with `e.next()`. The hook is registered for the 'users' collection using `onRecordAfterUpdateSuccess`.

```javascript
onRecordAfterUpdateSuccess((e) => {
    console.log("user updated...", e.record.get("email"))
    e.next()
}, "users")
```

--------------------------------

### PocketBase dbx.Expression: HashExp() Usage

Source: https://pocketbase.io/docs/go-database

Shows how to use `dbx.HashExp()` to generate equality conditions for multiple columns based on a map. It supports various data types including slices for 'IN' clauses and nil for 'IS NULL'.

```go
// slug = "example" AND active IS TRUE AND tags in ("tag1", "tag2", "tag3") AND parent IS NULL
dbx.HashExp{
    "slug": "example",
    "active": true,
    "tags": []any{"tag1", "tag2", "tag3"},
    "parent": nil,
}
```

--------------------------------

### Delete a Single Collection Record - JavaScript

Source: https://pocketbase.io/docs/api-records

Deletes a single record from a collection by its ID. Access to this action may be restricted based on the collection's 'deleteRule'. This function requires the collection name and the record ID to be deleted.

```javascript
import PocketBase from 'pocketbase';
const pb = new PocketBase('http://127.0.0.1:8090');

// Example: Delete a record
await pb.collection('demo').delete('YOUR_RECORD_ID');

```

--------------------------------

### PocketBase: Collection Validation Hook (JavaScript)

Source: https://pocketbase.io/docs/js-event-hooks

Intercepts collection validation events in PocketBase. The `onCollectionValidate` hook is triggered before a collection is saved or validated, allowing for custom validation logic. It can be applied globally or to specific collections.

```javascript
// fires for every collection
onCollectionValidate((e) => {
  // e.app
  // e.collection
  e.next()
})

// fires only for "users" and "articles" collections
onCollectionValidate((e) => {
  // e.app
  // e.collection
  e.next()
}, "users", "articles")
```

--------------------------------

### Validate Record Token (JavaScript)

Source: https://pocketbase.io/docs/js-records

Validates a record token using `$app.findAuthRecordByToken(token, type)`. The method returns the associated auth record only if the token is not expired and its signature is valid.

```javascript
let record = $app.findAuthRecordByToken("YOUR_TOKEN", "auth")
```

--------------------------------

### PocketBase App Hook: onBootstrap

Source: https://pocketbase.io/docs/js-event-hooks

The onBootstrap hook is triggered during the initialization of PocketBase's main application resources. It's essential to call `e.next()` to proceed; attempting to access the database before this call will result in an error.

```javascript
onBootstrap((e) => {
    e.next() // e.app
})
```

--------------------------------

### PocketBase dbx.Expression: Between() Range

Source: https://pocketbase.io/docs/go-database

Illustrates the use of `dbx.Between()` to create a `BETWEEN` expression for checking if a column's value falls within a specified range.

```go
// age BETWEEN 3 and 99
dbx.Between("age", 3, 99)
```

--------------------------------

### PocketBase App Hook: onSettingsReload

Source: https://pocketbase.io/docs/js-event-hooks

The onSettingsReload hook is invoked whenever PocketBase's application settings are updated. Calling `e.next()` allows access to the new settings state via `e.app.settings()`.

```javascript
onSettingsReload((e) => {
    e.next() // e.app.settings()
})
```

--------------------------------

### Batch Create/Update/Upsert/Delete Records - JavaScript

Source: https://pocketbase.io/docs/api-records

Performs batch and transactional operations (create, update, upsert, delete) on multiple records within a single request. The batch Web API must be enabled in the PocketBase Dashboard. This method is efficient for multiple operations but should be used with care to avoid performance degradation.

```javascript
import PocketBase from 'pocketbase';
const pb = new PocketBase('http://127.0.0.1:8090');

// Example: Batch operations
const batch = pb.createBatch();

batch.collection('example1').create({ "field": "value1" });
batch.collection('example2').update('RECORD_ID', { "field": "value2" });
batch.collection('example3').delete('RECORD_ID');
batch.collection('example4').upsert({ "id": "RECORD_ID_OR_DATA", "field": "value3" });

const result = await batch.send();

```

--------------------------------

### Request Store Operations

Source: https://pocketbase.io/docs/js-routing

Demonstrates how to use the local request store to share data between middlewares and route actions. Data can be set using `e.set()` and retrieved using `e.get()` within the scope of a single request.

```javascript
e.set("someKey", 123)
let val = e.get("someKey") // 123
```

--------------------------------

### Registering Global Middleware

Source: https://pocketbase.io/docs/js-routing

Shows how to register a global middleware function that intercepts requests. This example checks for a specific header and throws an error if it's missing, otherwise proceeding to the next middleware.

```javascript
routerUse((e) => {
  if (e.request.header.get("Something") == "") {
    throw new BadRequestError("Something header value is missing!")
  }
  return e.next()
})
```

--------------------------------

### Run a Specific Cron Job with PocketBase (JavaScript, Dart)

Source: https://pocketbase.io/docs/api-crons

Triggers a single cron job identified by its unique ID. This operation is exclusive to superusers and necessitates prior authentication. A successful execution returns a 204 No Content status.

```javascript
import PocketBase from 'pocketbase';
const pb = new PocketBase('http://127.0.0.1:8090');

// Authenticate as a superuser
await pb.collection("_superusers").authWithPassword('test@example.com', '1234567890');

// Run a specific cron job by its ID
await pb.crons.run('__pbLogsCleanup__');
```

```dart
import 'package:pocketbase/pocketbase.dart';

final pb = PocketBase('http://127.0.0.1:8090');

// Authenticate as a superuser
await pb.collection('_superusers').authWithPassword('test@example.com', '1234567890');

// Run a specific cron job by its ID
await pb.crons.run('__pbLogsCleanup__');
```

--------------------------------

### PocketBase Authentication with Password (JavaScript)

Source: https://pocketbase.io/docs/api-records

Authenticates a user with a username and password against a specified collection. It sends credentials in the request body and returns an authentication token and user record upon success. Handles potential validation errors for missing fields.

```javascript
import PocketBase from 'pocketbase';

const pb = new PocketBase('http://127.0.0.1:8090');

async function authenticateUser(email, password) {
  try {
    const authData = await pb.collection('users').authWithPassword(email, password);
    // Authenticated successfully
    console.log(pb.authStore.isValid);
    console.log(pb.authStore.token);
    console.log(pb.authStore.record.id);
  } catch (error) {
    // Handle authentication errors
    console.error('Authentication failed:', error);
  }
}

// Example usage:
// authenticateUser('test@example.com', 'your_password');
```

--------------------------------

### Get Record Field Value (JavaScript)

Source: https://pocketbase.io/docs/go-records

Illustrates retrieving single record field values with type-specific casting methods. It also shows how to access unsaved files, unmarshal JSON fields, retrieve expanded data, and export public fields.

```javascript
// retrieve a single record field value
record.Get("someField") // -> any (without cast)
record.GetBool("someField") // -> cast to bool
record.GetString("someField") // -> cast to string
record.GetInt("someField") // -> cast to int
record.GetFloat("someField") // -> cast to float64
record.GetDateTime("someField") // -> cast to types.DateTime
record.GetStringSlice("someField") // -> cast to []string

// retrieve the new uploaded files
record.GetUnsavedFiles("someFileField")

// unmarshal a single "json" field value into the result
record.UnmarshalJSONField("someJSONField", &result)

// retrieve a single or multiple expanded data
record.ExpandedOne("author") // -> nil|*core.Record
record.ExpandedAll("categories") // -> []*core.Record

// export all the public safe record fields as map[string]any
record.PublicExport()
```

--------------------------------

### Restore Backup File (JavaScript)

Source: https://pocketbase.io/docs/api-backups

Restores a single backup file by its key and restarts the PocketBase process. This action is for superusers only and cannot be performed if another backup/restore operation is active. Requires a valid authorization token.

```javascript
import PocketBase from 'pocketbase';
const pb = new PocketBase('http://127.0.0.1:8090');

// Authenticate as superuser first
await pb.collection("_superusers").authWithPassword('test@example.com', '1234567890');

await pb.backups.restore('pb_data_backup.zip');
```

--------------------------------

### Handle Record Authenticate with OTP (JavaScript)

Source: https://pocketbase.io/docs/js-event-hooks

The `onRecordAuthWithOTPRequest` hook is triggered for each Record authentication request using OTP. It can be used to implement custom authentication flows or validation. This hook supports both global and collection-specific configurations.

```javascript
onRecordAuthWithOTPRequest((e) => {
  // e.app
  // e.collection
  // e.record
  // e.otp
  // and all RequestEvent fields...
  e.next()
})

onRecordAuthWithOTPRequest((e) => {
  // e.app
  // e.collection
  // e.record
  // e.otp
  // and all RequestEvent fields...
  e.next()
}, "users", "managers")
```

--------------------------------

### Handle Record Confirm Email Change (JavaScript)

Source: https://pocketbase.io/docs/js-event-hooks

The `onRecordConfirmEmailChangeRequest` hook is invoked upon confirmation of an email change for a Record. It enables custom validation or alternative persistence strategies. This hook can be applied universally or to selected collections.

```javascript
onRecordConfirmEmailChangeRequest((e) => {
  // e.app
  // e.collection
  // e.record
  // e.newEmail
  // and all RequestEvent fields...
  e.next()
})

onRecordConfirmEmailChangeRequest((e) => {
  // e.app
  // e.collection
  // e.record
  // e.newEmail
  // and all RequestEvent fields...
  e.next()
}, "users", "managers")
```

--------------------------------

### List Cron Jobs with PocketBase (JavaScript, Dart)

Source: https://pocketbase.io/docs/api-crons

Retrieves a list of all registered application-level cron jobs. This action is restricted to superusers and requires authentication. The response is an array of cron job objects, each with an 'id' and 'expression'.

```javascript
import PocketBase from 'pocketbase';
const pb = new PocketBase('http://127.0.0.1:8090');

// Authenticate as a superuser
await pb.collection("_superusers").authWithPassword('test@example.com', '1234567890');

// Get the list of cron jobs
const jobs = await pb.crons.getFullList();
```

```dart
import 'package:pocketbase/pocketbase.dart';

final pb = PocketBase('http://127.0.0.1:8090');

// Authenticate as a superuser
await pb.collection('_superusers').authWithPassword('test@example.com', '1234567890');

// Get the list of cron jobs
final jobs = await pb.crons.getFullList();
```

--------------------------------

### Access Protected Files with Tokens (JavaScript)

Source: https://pocketbase.io/docs/files-handling

Retrieves a URL for a protected file from PocketBase using a short-lived token. This is essential for securing sensitive files. The user must be authenticated, and the request must satisfy the collection's View API rule. Ensure the 'pocketbase' SDK is imported and initialized.

```javascript
import PocketBase from 'pocketbase';

const pb = new PocketBase('http://127.0.0.1:8090');

// Authenticate the user first
await pb.collection('users').authWithPassword('test@example.com', '1234567890');

// Generate a file token (valid for a short period)
const fileToken = await pb.files.getToken();

// Get the record and then construct the protected file URL
const record = await pb.collection('example').getOne('RECORD_ID');
const url = pb.files.getURL(record, record.myPrivateFile, {'token': fileToken});

console.log(url);
```

--------------------------------

### Test S3 Storage Connection (JavaScript)

Source: https://pocketbase.io/docs/api-settings

Tests the configured S3 storage connection for either the main storage or backups. Requires superuser authentication. This function takes the filesystem type ('storage' or 'backups') as an argument.

```javascript
import PocketBase from 'pocketbase';
const pb = new PocketBase('http://127.0.0.1:8090');

// ... authenticate as superuser
await pb.collection("_superusers").authWithPassword('test@example.com', '1234567890');

// Test the 'backups' S3 storage
await pb.settings.testS3("backups");
```

--------------------------------

### Create Backup (JavaScript)

Source: https://pocketbase.io/docs/api-backups

Creates a new application data backup file on the PocketBase server. This operation requires superuser authentication and will return an error if another backup or restore operation is in progress. An optional name for the backup file can be provided.

```javascript
import PocketBase from 'pocketbase';
const pb = new PocketBase('http://127.0.0.1:8090');

// Authenticate as superuser (replace with actual credentials)
await pb.collection("_superusers").authWithPassword('test@example.com', '1234567890');

// Create a new backup with an optional name
await pb.backups.create('my_app_backup.zip');
console.log('Backup created successfully.');
```

--------------------------------

### Update Existing PocketBase Collection (JavaScript)

Source: https://pocketbase.io/docs/js-collections

Updates an existing collection by modifying its properties like name, fields, or indexes. Changes can be made directly to field objects or by adding new indexes. Uses $app.save() to persist changes.

```javascript
let collection = $app.findCollectionByNameOrId("example")
// change the collection name
collection.name = "example_update"
// add new editor field
collection.fields.add(new EditorField({ name: "description", required: true }))
// change existing field
// (returns a pointer and direct modifications are allowed without the need of reinsert)
let titleField = collection.fields.getByName("title")
titleField.min = 10
// or: collection.indexes.push("CREATE INDEX idx_example_title ON example (title)")
collection.addIndex("idx_example_title", false, "title", "")
// validate and persist
// (use saveNoValidate to skip fields validation)
$app.save(collection)
```

--------------------------------

### Handle Record Request OTP (JavaScript)

Source: https://pocketbase.io/docs/js-event-hooks

The `onRecordRequestOTPRequest` hook processes API requests for One-Time Password (OTP) generation for a Record. It allows for custom logic, including handling cases where a user is not found (e.record could be null). The hook can be applied globally or to specific collections.

```javascript
onRecordRequestOTPRequest((e) => {
  // e.app
  // e.collection
  // e.record (could be null)
  // e.password
  // and all RequestEvent fields...
  e.next()
})

onRecordRequestOTPRequest((e) => {
  // e.app
  // e.collection
  // e.record (could be null)
  // e.password
  // and all RequestEvent fields...
  e.next()
}, "users", "managers")
```

--------------------------------

### Create Initial Superuser - PocketBase Migration

Source: https://pocketbase.io/docs/js-migrations

Example of creating an initial superuser record within a PocketBase migration using JavaScript. It shows how to find a collection, create a new record, set its fields (including email and password), and save it using the `app.save()` method. An optional revert function is included to delete the record.

```javascript
// pb_migrations/1687801090_initial_superuser.js
migrate((app) => {
    let superusers = app.findCollectionByNameOrId("_superusers")
    let record = new Record(superusers)
    // note: the values can be eventually loaded via $os.getenv(key)
    // or from a special local config file
    record.set("email", "test@example.com")
    record.set("password", "1234567890")

    app.save(record)
}, (app) => {
    // optional revert operation
    try {
        let record = app.findAuthRecordByEmail("_superusers", "test@example.com")
        app.delete(record)
    } catch {
        // silent errors (probably already deleted)
    }
})
```

--------------------------------

### Refresh Authentication Token (JavaScript)

Source: https://pocketbase.io/docs/api-records

Retrieves a new auth response (token and user data) for an already authenticated user. This is typically used on page reload to ensure the stored `pb.authStore` data is current. Requires an initialized PocketBase client.

```javascript
import PocketBase from 'pocketbase';

const pb = new PocketBase('http://127.0.0.1:8090');

// ... other operations

const authData = await pb.collection('users').authRefresh();

// Access refreshed auth data from the authStore
console.log(pb.authStore.isValid);
console.log(pb.authStore.token);
console.log(pb.authStore.record.id);
```

--------------------------------

### Handle File Token Requests (JavaScript)

Source: https://pocketbase.io/docs/js-event-hooks

The `onFileTokenRequest` hook is triggered for each authentication file token API request. It can be used to customize token generation or enforce access policies. The hook can be applied to all auth models or specific ones like 'users'.

```javascript
onFileTokenRequest((e) => {
  // e.app
  // e.record
  // e.token
  // and all RequestEvent fields...
  e.next();
})

onFileTokenRequest((e) => {
  // e.app
  // e.record
  // e.token
  // and all RequestEvent fields...
  e.next();
}, "users")
```

--------------------------------

### Get Backup Download URL (JavaScript)

Source: https://pocketbase.io/docs/api-backups

Generates a download URL for a specific backup file. Requires a superuser file token and the backup file key. The token grants temporary access to the backup file resource.

```javascript
import PocketBase from 'pocketbase';
const pb = new PocketBase('http://127.0.0.1:8090');

// Authenticate as superuser first
await pb.collection("_superusers").authWithPassword('test@example.com', '1234567890');

const token = await pb.files.getToken();
const url = pb.backups.getDownloadUrl(token, 'pb_data_backup.zip');
```

--------------------------------

### Go: Bind Parameters to SQL Queries

Source: https://pocketbase.io/docs/go-database

Illustrates safe parameter binding in SQL queries to prevent injection attacks. Uses named placeholders `{:paramName}` and the `Bind()` method with `dbx.Params`. Suitable for user-provided input in WHERE clauses.

```Go
type Post struct { 
    Name     string `db:"name" json:"name"` 
    Created  types.DateTime `db:"created" json:"created"` 
} 

posts := []Post{}
err := app.DB(). NewQuery("SELECT name, created FROM posts WHERE created >= {:from} and created <= {:to}"). Bind(dbx.Params{
 "from": "2023-06-25 00:00:00.000Z",
 "to": "2023-06-28 23:59:59.999Z",
}). All(&posts)
```

--------------------------------

### Handle Batch Requests (JavaScript)

Source: https://pocketbase.io/docs/js-event-hooks

The `onBatchRequest` hook intercepts all API batch requests, allowing for validation or modification of submitted batch operations. This hook also triggers corresponding record hooks (`onRecordCreateRequest`, `onRecordUpdateRequest`, `onRecordDeleteRequest`) within the batch's transactional context.

```javascript
onBatchRequest((e) => {
  // e.app
  // e.batch
  // and all RequestEvent fields...
  e.next()
})
```

--------------------------------

### List Backups (JavaScript)

Source: https://pocketbase.io/docs/api-backups

Retrieves a list of all available backup files from the PocketBase server. This operation requires superuser authentication. The function returns an array of backup objects, each containing details like key, modified date, and size.

```javascript
import PocketBase from 'pocketbase';
const pb = new PocketBase('http://127.0.0.1:8090');

// Authenticate as superuser (replace with actual credentials)
await pb.collection("_superusers").authWithPassword('test@example.com', '1234567890');

// List all backups
const backups = await pb.backups.getFullList();
console.log(backups);
```

--------------------------------

### PocketBase - Constructing API Errors

Source: https://pocketbase.io/docs/js-routing

Demonstrates how to construct custom API errors in PocketBase using the `ApiError` class and its factory methods. These errors can include custom status codes, messages, and validation data, which are then safely converted for API responses.

```javascript
throw new ApiError(500, "something went wrong", { "title": new ValidationError("invalid_title", "Invalid or missing title"), })
// if message is empty string, a default one will be set
throw new BadRequestError(optMessage, optData) // 400 ApiError
throw new UnauthorizedError(optMessage, optData) // 401 ApiError
throw new ForbiddenError(optMessage, optData) // 403 ApiError
throw new NotFoundError(optMessage, optData) // 404 ApiError
throw new TooManyrequestsError(optMessage, optData) // 429 ApiError
throw new InternalServerError(optMessage, optData) // 500 ApiError
```

--------------------------------

### Generate Apple Client Secret (JavaScript)

Source: https://pocketbase.io/docs/api-settings

Generates a new Apple OAuth2 client secret key. This operation requires superuser privileges and takes the client ID, team ID, key ID, private key, and duration as parameters.

```javascript
import PocketBase from 'pocketbase';
const pb = new PocketBase('http://127.0.0.1:8090');

// ... authenticate as superuser
await pb.collection("_superusers").authWithPassword('test@example.com', '1234567890');

// Generate a new Apple client secret
const clientId = 'YOUR_CLIENT_ID';
const teamId = 'YOUR_TEAM_ID';
const keyId = 'YOUR_KEY_ID';
const privateKey = '-----BEGIN PRIVATE KEY...END PRIVATE KEY-----';
const duration = 3600; // in seconds

await pb.settings.generateAppleClientSecret(clientId, teamId, keyId, privateKey, duration);
```

--------------------------------

### PocketBase - Serving Static Files

Source: https://pocketbase.io/docs/js-routing

Illustrates how to serve static files from a specified directory using PocketBase's `$apis.static()` helper. This function expects a wildcard path parameter in the route definition to handle nested file structures.

```javascript
// serves static files from the provided dir (if exists)
routerAdd("GET", "/{path...}", $apis.static($os.dirFS("/path/to/public"), false))
```

--------------------------------

### PocketBase onRecordCreate Hook Example

Source: https://pocketbase.io/docs/js-event-hooks

The onRecordCreate hook is triggered before record validation and database insertion. It allows operations before and after calling e.next(). This hook can be applied globally or to specific collections.

```javascript
// fires for every record
onRecordCreate((e) => {
  // e.app
  // e.record
  e.next()
})

// fires only for "users" and "articles" records
onRecordCreate((e) => {
  // e.app
  // e.record
  e.next()
}, "users", "articles")
```

--------------------------------

### PocketBase App Hook: onTerminate

Source: https://pocketbase.io/docs/js-event-hooks

The onTerminate hook is executed when PocketBase is in the process of being terminated, such as upon receiving a SIGTERM signal. Note that the application might terminate abruptly without waiting for this hook to complete. The `e` object provides `e.app` and `e.isRestart`.

```javascript
onTerminate((e) => {
    // e.app
    // e.isRestart
})
```

--------------------------------

### Register Custom Console Command (JavaScript)

Source: https://pocketbase.io/docs/js-console-commands

Register a new console command using `app.rootCmd.addCommand`. The command has a 'use' property for its name and a 'run' function that executes when the command is invoked. This function accepts command and arguments and can perform custom logic.

```javascript
app.rootCmd.addCommand(new Command({
    use: "hello",
    run: (cmd, args) => {
        console.log("Hello world!")
    },
}))
```

--------------------------------

### Intercept Record Create Request (JS)

Source: https://pocketbase.io/docs/js-records

Provides an example of intercepting a record creation request using the `onRecordCreateRequest` hook. This allows for custom logic, such as ignoring requests for superusers, overwriting field values, or preventing the creation based on specific conditions and user roles.

```javascript
onRecordCreateRequest((e) => {
      // ignore for superusers
      if (e.hasSuperuserAuth()) {
        return e.next()
      }
      // overwrite the submitted "status" field value
      e.record.set("status", "pending")
      // or you can also prevent the create event by returning an error
      let status = e.record.get("status")
      if (
        status != "pending" && // guest or not an editor
        (!e.auth || e.auth.get("role") != "editor")
      ) {
        throw new BadRequestError("Only editors can set a status different from pending")
      }
      e.next()
    }, "articles")
```

--------------------------------

### Authenticate with One-Time Password (OTP) using PocketBase SDK

Source: https://pocketbase.io/docs/api-records

This code demonstrates authenticating a user with a One-Time Password (OTP) using the PocketBase JavaScript SDK. It includes requesting an OTP via email, then authenticating with the received OTP ID and the password from the email. It also shows how to access authentication data and clear the store for logout.

```javascript
import PocketBase from 'pocketbase';
const pb = new PocketBase('http://127.0.0.1:8090');

// send OTP email to the provided auth record
const req = await pb.collection('users').requestOTP('test@example.com');

// ... show a screen/popup to enter the password from the email ...

// authenticate with the requested OTP id and the email password
const authData = await pb.collection('users').authWithOTP(req.otpId, "YOUR_OTP");

// after the above you can also access the auth data from the authStore
console.log(pb.authStore.isValid);
console.log(pb.authStore.token);
console.log(pb.authStore.record.id);

// "logout"
pb.authStore.clear();
```

--------------------------------

### Check Record Access (JavaScript)

Source: https://pocketbase.io/docs/js-records

Checks if a custom client request or user can access a single record using `$app.canAccessRecord(record, requestInfo, rule)`. This is useful for custom routes to enforce access control based on collection rules.

```javascript
routerAdd("GET", "/articles/{slug}", (e) => {
  let slug = e.request.pathValue("slug")
  let record = e.app.findFirstRecordByData("articles", "slug", slug)
  let canAccess = e.app.canAccessRecord(record, e.requestInfo(), record.collection().viewRule)
  if (!canAccess) {
    throw new ForbiddenError()
  }
  return e.json(200, record)
})
```

--------------------------------

### Write Response Body in Go

Source: https://pocketbase.io/docs/go-routing

Provides examples for sending various types of responses, including JSON, plain text, HTML, redirects, and binary data. Methods like `e.JSON()`, `e.String()`, `e.HTML()`, `e.Redirect()`, `e.NoContent()`, `e.FileFS()`, `e.Stream()`, and `e.Blob()` are demonstrated.

```go
// send response with JSON body
// (it also provides a generic response fields picker/filter if the "fields" query parameter is set)
e.JSON(http.StatusOK, map[string]any{"name": "John"})
// send response with string body
e.String(http.StatusOK, "Lorem ipsum...")
// send response with HTML body
// (check also the "Rendering templates" section)
e.HTML(http.StatusOK, "<h1>Hello!</h1>")
// redirect
e.Redirect(http.StatusTemporaryRedirect, "https://example.com")
// send response with no body
e.NoContent(http.StatusNoContent)
// serve a single file
e.FileFS(os.DirFS("..."), "example.txt")
// stream the specified reader
e.Stream(http.StatusOK, "application/octet-stream", reader)
// send response with blob (bytes slice) body
e.Blob(http.StatusOK, "application/octet-stream", []byte{ ... })
```

--------------------------------

### Executing Raw SQL Queries

Source: https://pocketbase.io/docs/js-database

Demonstrates how to execute raw SQL queries against the database using `$app.db()`. Supports `execute()` for non-SELECT statements, `one()` for single row retrieval, and `all()` for multiple row retrieval.

```APIDOC
## Executing Raw SQL Queries

### Description
Execute raw SQL statements against the database. Use `execute()` for statements that do not return data, `one()` to retrieve a single row into a `DynamicModel`, and `all()` to retrieve multiple rows into an array of `DynamicModel` objects.

### Methods
- `execute()`: For `INSERT`, `UPDATE`, `DELETE`, etc.
- `one(model)`: Retrieves a single row and populates the provided `DynamicModel`.
- `all(modelArray)`: Retrieves multiple rows and populates the provided array of `DynamicModel`.

### Request Example (execute)
```javascript
$app.db().newQuery("DELETE FROM articles WHERE status = 'archived'").execute()
```

### Request Example (one)
```javascript
const result = new DynamicModel({
  "id": "",
  "status": false,
  "age": 0,
  "roles": []
})

$app.db()
  .newQuery("SELECT id, status, age, roles FROM users WHERE id=1")
  .one(result)

console.log(result.id)
```

### Request Example (all)
```javascript
const result = arrayOf(new DynamicModel({
  "id": "",
  "status": false,
  "age": 0,
  "roles": []
}))

$app.db()
  .newQuery("SELECT id, status, age, roles FROM users LIMIT 100")
  .all(result)

if (result.length > 0) {
  console.log(result[0].id)
}
```
```

--------------------------------

### PocketBase: Listen for Specific Failed Model Deletions

Source: https://pocketbase.io/docs/js-event-hooks

This snippet shows how to use onModelAfterDeleteError to specifically catch errors during the deletion persistence of 'users' and 'articles' models.

```javascript
onModelAfterDeleteError((e) => {
  // e.app
  // e.model
  // e.error
  e.next()
}, "users", "articles")
```

--------------------------------

### Generate Authentication Tokens (JavaScript)

Source: https://pocketbase.io/docs/js-records

Generates various types of JWT tokens for a record, including authentication, verification, password reset, email change, file access, and static non-renewable auth tokens. Token duration is managed by collection auth options, except for static tokens.

```javascript
let token = record.newAuthToken()
let token = record.newVerificationToken()
let token = record.newPasswordResetToken()
let token = record.newEmailChangeToken(newEmail)
let token = record.newFileToken() // for protected files
let token = record.newStaticAuthToken(optCustomDuration) // nonrenewable auth token
```

--------------------------------

### Handle Record Request Email Change (JavaScript)

Source: https://pocketbase.io/docs/js-event-hooks

The `onRecordRequestEmailChangeRequest` hook intercepts API requests for changing a Record's email. It allows for extra validation or custom email change behavior. This hook supports global application or targeting specific collections.

```javascript
onRecordRequestEmailChangeRequest((e) => {
  // e.app
  // e.collection
  // e.record
  // e.newEmail
  // and all RequestEvent fields...
  e.next()
})

onRecordRequestEmailChangeRequest((e) => {
  // e.app
  // e.collection
  // e.record
  // e.newEmail
  // and all RequestEvent fields...
  e.next()
}, "users", "managers")
```

--------------------------------

### Manual OAuth2 Login Links using JavaScript

Source: https://pocketbase.io/docs/authentication

This HTML and JavaScript snippet generates dynamic links for OAuth2 providers. It fetches available authentication methods from PocketBase, iterates through OAuth2 providers, and constructs login links that include a redirect URL. The provider information is stored in local storage for verification on the redirect page.

```html
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>OAuth2 links page</title>
  <script src="https://code.jquery.com/jquery-3.7.1.slim.min.js"></script>
</head>
<body>
  <ul id="list">
    <li>Loading OAuth2 providers...</li>
  </ul>

  <script type="module">
    import PocketBase from "https://cdn.jsdelivr.net/gh/pocketbase/js-sdk@master/dist/pocketbase.es.mjs"

    const pb          = new PocketBase("http://127.0.0.1:8090");
    const redirectURL = "http://127.0.0.1:8090/redirect.html";

    const authMethods = await pb.collection("users").listAuthMethods();
    const providers   = authMethods.oauth2?.providers || [];
    const listItems   = [];

    for (const provider of providers) {
      const $li = $(`<li><a>Login with ${provider.name}</a></li>`);

      $li.find("a")
        .attr("href", provider.authURL + redirectURL)
        .data("provider", provider)
        .click(function () {
          // store provider's data on click for verification in the redirect page
          localStorage.setItem("provider", JSON.stringify($(this).data("provider")));
        });

      listItems.push($li);
    }

    $("#list").html(listItems.length ? listItems : "<li>No OAuth2 providers.</li>");
  </script>
</body>
</html>
```

--------------------------------

### Filtering Groups with Having Clause

Source: https://pocketbase.io/docs/js-database

The having() method, along with andHaving() and orHaving(), allows you to specify the HAVING clause to filter aggregated results. It accepts dbx.Expression objects.

```APIDOC
## POST /api/query

### Description
Allows specifying the HAVING clause to filter grouped results.

### Method
POST (or applicable HTTP method for query execution)

### Endpoint
`/api/query` (Illustrative endpoint, actual execution might differ)

### Parameters
#### Request Body
- **expression** (string) - Required - The HAVING clause expression.
- **params** (object) - Optional - Parameters for the expression.

### Request Example
```json
{
  "select": "users.*",
  "from": "users",
  "groupBy": ["department", "level"],
  "having": {
    "expression": "sum(level) > {:sum}",
    "params": {"sum": 10}
  }
}
```

### Response
#### Success Response (200)
- **data** (array) - The filtered aggregated query results.

#### Response Example
```json
{
  "data": [
    { "department": "Engineering", "level": "Senior", "sum(level)": 15 },
    { "department": "Management", "level": "Lead", "sum(level)": 12 }
  ]
}
```
```

--------------------------------

### Expand Relation Fields in PocketBase Queries (JS/Dart)

Source: https://pocketbase.io/docs/working-with-relations

Explains how to use the 'expand' query parameter to include related records directly in the API response, avoiding extra requests. Examples are provided for JavaScript and Dart.

```javascript
await pb.collection("comments").getList(1, 30, {
  expand: "user"
})
```

```dart
await pb.collection("comments").getList(perPage: 30, expand: "user")
```

--------------------------------

### PocketBase Mailer Hook: onMailerRecordVerificationSend

Source: https://pocketbase.io/docs/js-event-hooks

Allows modification of verification emails sent to authentication records. The `e` object contains `e.app`, `e.mailer`, `e.message`, `e.record`, and `e.meta`. Call `e.next()` to continue with sending the email.

```javascript
onMailerRecordVerificationSend((e) => {
    // e.app
    // e.mailer
    // e.message
    // e.record
    // e.meta
    // ex. change the mail subject
    e.message.subject = "new subject"

    e.next()
})
```

--------------------------------

### PocketBase: Specific Execute Hook on Model Create

Source: https://pocketbase.io/docs/js-event-hooks

Similar to the general onModelCreateExecute, this variant allows the hook to be triggered only for specified models like 'users' or 'articles', enabling targeted pre-database insertion logic.

```javascript
// fires only for "users" and "articles" models
onModelCreateExecute((e) => {
  // e.app
  // e.model
  e.next()
}, "users", "articles")
```

--------------------------------

### PocketBase: Execute Specific Model Delete DB Statement

Source: https://pocketbase.io/docs/js-event-hooks

This snippet demonstrates using onModelDeleteExecute to trigger actions specifically before the DELETE DB statement for 'users' and 'articles' models.

```javascript
onModelDeleteExecute((e) => {
  // e.app
  // e.model
  e.next()
}, "users", "articles")
```

--------------------------------

### Binding Event Handlers in Go

Source: https://pocketbase.io/docs/go-event-hooks

Demonstrates how to bind event handlers to PocketBase hooks using Go. It shows the use of `Bind` with optional Id and Priority, and `BindFunc` for simpler function registration. Handlers must adhere to the `func(e T) error` signature and optionally call `e.Next()`.

```go
package main

import (
	"github.com/labstack/echo/v5"
	"github.com/pocketbase/pocketbase"
	"github.com/pocketbase/pocketbase/apis"
	"github.com/pocketbase/pocketbase/core"
)

func main() {
	app := pocketbase.New()

	// Example of binding a hook handler with Id and Priority
	app.OnRecordBeforeCreateRequest().Bind(apis.RecordCreateAuthHandler2{
		// Handler ID (optional)
		Id: "myCustomAuthHandler",
		// Handler Priority (optional)
		Priority: 10,
		// Handler Function (required)
		Func: func(e *apis.RecordCreateAuthEvent) error {
			// Custom logic here
			// Call e.Next() to continue the execution chain
			return e.Next()
		},
	})

	// Example of binding a hook handler using BindFunc for simplicity
	app.OnRecordBeforeCreateRequest().BindFunc(func(e *apis.RecordCreateAuthEvent) error {
		// Simpler handler function, ID and Priority are autogenerated/default
		// Custom logic here
		return e.Next()
	})

	// To trigger an event hook manually (rarely needed):
	// app.OnRecordBeforeCreateRequest().Trigger(nil) // Pass appropriate event data

	// To remove a specific handler by ID:
	// app.OnRecordBeforeCreateRequest().Unbind("myCustomAuthHandler")

	// To remove all handlers for a specific hook:
	// app.OnRecordBeforeCreateRequest().UnbindAll()

	// Start the application (example)
	//apis.Serve(app) // This is a placeholder, actual serving logic depends on your setup
}

// Placeholder for the actual event signature, replace T with the correct event type
// type T interface {
// 	Next() error
// 	App *core.App
// }

```

--------------------------------

### Intercept Record Update Request (JavaScript)

Source: https://pocketbase.io/docs/js-records

Intercepts record update requests for a specific collection ('articles'). It allows for conditional logic, such as ignoring updates for superusers, overwriting specific fields (e.g., 'status'), or preventing updates based on user roles and current status. The function signature is `onRecordUpdateRequest((e) => { ... }, 'collectionName')`.

```javascript
onRecordUpdateRequest((e) => {
  // ignore for superusers
  if (e.hasSuperuserAuth()) {
    return e.next()
  }

  // overwrite the submitted "status" field value
  e.record.set("status", "pending")

  // or you can also prevent the update event by returning an error
  let status = e.record.get("status")
  if (
    status != "pending" && // guest or not an editor
    (!e.auth || e.auth.get("role") != "editor")
  ) {
    throw new BadRequestError("Only editors can set a status different from pending")
  }

  e.next()
}, "articles")
```

--------------------------------

### Executing Queries in a Transaction (runInTransaction)

Source: https://pocketbase.io/docs/js-database

Executes multiple database operations within a single transaction. Operations are only persisted if the transaction completes successfully. Use the `txApp` argument within the callback for operations.

```javascript
const app = require("pocketbase");

// Example usage:
await app.runInTransaction(async (txApp) => {
    // Update a record
    const record = await txApp.findRecordById("articles", "RECORD_ID");
    record.set("status", "active");
    await txApp.save(record);

    // Run a custom raw query (doesn't fire event hooks)
    await txApp.db().newQuery("DELETE FROM articles WHERE status = 'pending'").execute();
});
```

--------------------------------

### PocketBase onSettingsListRequest Hook

Source: https://pocketbase.io/docs/js-event-hooks

The onSettingsListRequest hook is triggered on all API Settings list requests. This hook is suitable for validating or modifying the response before it is sent to the client. The RequestEvent object contains e.app and e.settings. Call e.next() to proceed with the request.

```javascript
onSettingsListRequest((e) => {
  // e.app
  // e.settings
  // and all RequestEvent fields...
  e.next()
})
```

--------------------------------

### Built-in Authentication Middlewares

Source: https://pocketbase.io/docs/js-routing

Provides examples of using built-in PocketBase middlewares for authentication checks. These include requiring guest access, authenticated access, superuser access, or owner access based on route parameters.

```javascript
$apis.requireGuestOnly()
$apis.requireAuth(optCollectionNames...)
$apis.requireSuperuserAuth()
$apis.requireSuperuserOrOwnerAuth(ownerIdParam)
```

--------------------------------

### PocketBase dbx.Expression: NotBetween() Range

Source: https://pocketbase.io/docs/go-database

Explains how to use `dbx.NotBetween()` to generate a `NOT BETWEEN` expression, checking if a column's value is outside a specified range.

```go
// age NOT BETWEEN 3 and 99
dbx.NotBetween("age", 3, 99)
```

--------------------------------

### PocketBase Mailer Hook: onMailerRecordPasswordResetSend

Source: https://pocketbase.io/docs/js-event-hooks

Intercept and customize password reset emails sent to authentication records. The hook provides `e.app`, `e.mailer`, `e.message`, `e.record`, and `e.meta`. Ensure `e.next()` is called to send the email.

```javascript
onMailerRecordPasswordResetSend((e) => {
    // e.app
    // e.mailer
    // e.message
    // e.record
    // e.meta
    // ex. change the mail subject
    e.message.subject = "new subject"

    e.next()
})
```

--------------------------------

### Handle Record Confirm Verification Requests (JavaScript)

Source: https://pocketbase.io/docs/js-event-hooks

The `onRecordConfirmVerificationRequest` hook is triggered for each Record confirm verification API request. It can be used for additional data validation or custom persistence logic. The hook can be applied to all auth collections or specific ones like 'users' and 'managers'.

```javascript
onRecordConfirmVerificationRequest((e) => {
  // e.app
  // e.collection
  // e.record
  // and all RequestEvent fields...
  e.next()
})

onRecordConfirmVerificationRequest((e) => {
  // e.app
  // e.collection
  // e.record
  // and all RequestEvent fields...
  e.next()
}, "users", "managers")
```

--------------------------------

### Built-in Request Configuration Middlewares

Source: https://pocketbase.io/docs/js-routing

Demonstrates the usage of built-in middlewares for configuring request handling. This includes setting the request body size limit, enabling Gzip compression, and controlling activity log entries.

```javascript
$apis.bodyLimit(limitBytes)
$apis.gzip()
$apis.skipSuccessActivityLog()
```

--------------------------------

### Register Custom HTTP Route in PocketBase (Go)

Source: https://pocketbase.io/docs/use-as-framework

This Go code snippet demonstrates how to register a custom HTTP GET route '/hello' within PocketBase. It utilizes the `OnServe().BindFunc()` method to attach a handler that returns a 'Hello world!' string.

```Go
app.OnServe().BindFunc(func(se *core.ServeEvent) error {     se.Router.GET("/hello", func(e *core.RequestEvent) error { return e.String(http.StatusOK, "Hello world!") })
return se.Next()
})
```

--------------------------------

### PocketBase onRecordCreateExecute Hook Example

Source: https://pocketbase.io/docs/js-event-hooks

The onRecordCreateExecute hook runs after successful record validation and just before the database INSERT statement. It's part of the save process and can be filtered by collection.

```javascript
// fires for every record
onRecordCreateExecute((e) => {
  // e.app
  // e.record
  e.next()
})

// fires only for "users" and "articles" records
onRecordCreateExecute((e) => {
  // e.app
  // e.record
  e.next()
}, "users", "articles")
```

--------------------------------

### Remove IDs from Multiple Relation Fields in PocketBase

Source: https://pocketbase.io/docs/working-with-relations

Illustrates how to remove one or more relation IDs from an existing multiple relation field. This functionality is available in both JavaScript and Dart PocketBase SDKs.

```javascript
import PocketBase from 'pocketbase';
const pb = new PocketBase('http://127.0.0.1:8090');

const post = await pb.collection('posts').update('POST_ID', {
  // remove single tag
  'tags-': 'TAG_ID1',
  // remove multiple tags at once
  'tags-': ['TAG_ID1', 'TAG_ID2'],
})
```

```dart
import 'package:pocketbase/pocketbase.dart';

final pb = PocketBase('http://127.0.0.1:8090');

final post = await pb.collection('posts').update('POST_ID', body: {
  // remove single tag
  'tags-': 'TAG_ID1',
  // remove multiple tags at once
  'tags-': ['TAG_ID1', 'TAG_ID2'],
})
```

--------------------------------

### PocketBase onCollectionAfterCreateSuccess Hook

Source: https://pocketbase.io/docs/js-event-hooks

The onCollectionAfterCreateSuccess hook is triggered after each successful Collection DB create persistence. It is executed after the transaction commits, and can be filtered by collection name.

```javascript
// fires for every collection
onCollectionAfterCreateSuccess((e) => {
  // e.app
  // e.collection
  e.next()
})

// fires only for "users" and "articles" collections
onCollectionAfterCreateSuccess((e) => {
  // e.app
  // e.collection
  e.next()
}, "users", "articles")
```

--------------------------------

### PocketBase Filter Grouping and Comments

Source: https://pocketbase.io/docs/api-rules-and-filters

Illustrates how to group multiple filter expressions using parentheses and combine them with logical AND (`&&`) and OR (`||`) operators. Also shows the syntax for single-line comments within filter expressions.

```plaintext
`(...)` for grouping
`&&` for AND
`||` for OR
`// Example comment`
```

--------------------------------

### PocketBase Mobile Auth Persistence - React Native (JavaScript)

Source: https://pocketbase.io/docs/how-to-use

Initializes the PocketBase client in React Native with a custom asynchronous authentication store using AsyncStorage for persistence. This ensures authentication state is maintained across app sessions. Requires the 'react-native-sse' polyfill for real-time subscriptions.

```javascript
// Node.js and React Native doesn't have native EventSource implementation // so in order to use the realtime subscriptions you'll need to load EventSource polyfill, // for example: npm install react-native-sse --save import eventsource from 'react-native-sse'; import AsyncStorage from '@react-native-async-storage/async-storage'; import PocketBase, { AsyncAuthStore } from 'pocketbase'; // load the polyfill global.EventSource = eventsource; // initialize the async store const store = new AsyncAuthStore({ save: async (serialized) => AsyncStorage.setItem('pb_auth', serialized), initial: AsyncStorage.getItem('pb_auth'), }); // initialize the PocketBase client // (it is OK to have a single/global instance for the duration of your application) const pb = new PocketBase('http://127.0.0.1:8090', store); ... await pb.collection('users').authWithPassword('test@example.com', '1234567890');  console.log(pb.authStore.record)
```

--------------------------------

### Binding Parameters Safely

Source: https://pocketbase.io/docs/go-database

Explains how to use named parameters (`{:paramName}`) in SQL queries to prevent SQL injection and securely bind values.

```APIDOC
## Binding Parameters Safely

### Description
This section covers how to safely bind parameters to SQL queries using named placeholders to prevent SQL injection vulnerabilities.

### Method
Use named parameters `{:paramName}` in your SQL string and then use the `.Bind(dbx.Params{...})` method.

### Endpoint
N/A (Programmatic API usage).

### Usage Example
```go
type Post struct {
    Name    string         `db:"name" json:"name"`
    Created types.DateTime `db:"created" json:"created"`
}

posts := []Post{}
err := app.DB().NewQuery("SELECT name, created FROM posts WHERE created >= {:from} and created <= {:to}").
    Bind(dbx.Params{
        "from": "2023-06-25 00:00:00.000Z",
        "to":   "2023-06-28 23:59:59.999Z",
    }).
    All(&posts)
```

### Parameters
- **`{:paramName}`** (string): Placeholder in the SQL query string for a named parameter.
- **`dbx.Params`**: A map where keys are parameter names (matching `{:paramName}`) and values are the data to be bound.

### Response Example
```json
{
  "example": "[]Post slice populated with data"
}
```
```

--------------------------------

### Append Record Field to Password Reset Email Subject (JavaScript)

Source: https://pocketbase.io/docs/js-sending-emails

This example shows how to modify the subject of the system-generated password reset email by appending a value from a 'name' Record field. It uses the `onMailerRecordPasswordResetSend` hook to access and alter the email message before it's sent. This allows for personalized email subjects.

```javascript
onMailerRecordPasswordResetSend((e) => {
    // modify the subject
    e.message.subject += (" " + e.record.get("name"))
    e.next()
})
```

--------------------------------

### PocketBase: Listen for Specific Successful Model Deletions

Source: https://pocketbase.io/docs/js-event-hooks

This snippet demonstrates using onModelAfterDeleteSuccess to listen for successful deletions specifically on 'users' and 'articles' models, after database persistence.

```javascript
onModelAfterDeleteSuccess((e) => {
  // e.app
  // e.model
  e.next()
}, "users", "articles")
```

--------------------------------

### OAuth2 Redirect Handler with PocketBase JS SDK

Source: https://pocketbase.io/docs/authentication

Handles OAuth2 authentication redirects by parsing query parameters, validating state, and exchanging the authorization code for an authentication token using PocketBase's JavaScript SDK. It expects the provider's data to be stored in localStorage.

```html
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>OAuth2 redirect page</title>
</head>
<body>
  <pre id="content">Authenticating...</pre>
  <script type="module">
    import PocketBase from "https://cdn.jsdelivr.net/gh/pocketbase/js-sdk@master/dist/pocketbase.es.mjs"

    const pb = new PocketBase("http://127.0.0.1:8090");
    const redirectURL = "http://127.0.0.1:8090/redirect.html";
    const contentEl = document.getElementById("content");

    // parse the query parameters from the redirected url
    const params = (new URL(window.location)).searchParams;

    // load the previously stored provider's data
    const provider = JSON.parse(localStorage.getItem("provider"))

    // compare the redirect's state param and the stored provider's one
    if (provider.state !== params.get("state")) {
      contentEl.innerText = "State parameters don't match.";
    } else {
      // authenticate
      pb.collection("users").authWithOAuth2Code(
        provider.name,
        params.get("code"),
        provider.codeVerifier,
        redirectURL, // pass any optional user create data
        { emailVisibility: false, }
      ).then((authData) => {
        contentEl.innerText = JSON.stringify(authData, null, 2);
      }).catch((err) => {
        contentEl.innerText = "Failed to exchange code.\n" + err;
      });
    }
  </script>
</body>
</html>
```

--------------------------------

### PocketBase onCollectionsImportRequest Hook

Source: https://pocketbase.io/docs/js-event-hooks

The onCollectionsImportRequest hook is executed for each API collections import request. It allows for validation of imported collections or the implementation of custom import logic. The hook provides access to e.app, e.collectionsData, and e.deleteMissing within the RequestEvent. e.next() is used to continue.

```javascript
onCollectionsImportRequest((e) => {
  // e.app
  // e.collectionsData
  // e.deleteMissing
  e.next()
})
```

--------------------------------

### Fetch Auth Records by Email or JWT (JS)

Source: https://pocketbase.io/docs/js-records

Shows how to fetch authentication records. This includes retrieving a single user record by their email address and retrieving an auth record using a JWT, with an option to specify accepted token types.

```javascript
// retrieve a single auth record by its email
let user = $app.findAuthRecordByEmail("users", "test@example.com")

// retrieve a single auth record by JWT
// (you could also specify an optional list of accepted token types)
let user = $app.findAuthRecordByToken("YOUR_TOKEN", "auth")
```

--------------------------------

### PocketBase Realtime Subscription Hook

Source: https://pocketbase.io/docs/js-event-hooks

The onRealtimeSubscribeRequest hook is triggered when client subscriptions are updated, enabling validation and modification of the submitted changes. It provides access to application, client, and subscription details.

```javascript
onRealtimeSubscribeRequest((e) => {
  // e.app
  // e.client
  // e.subscriptions
  // and all RequestEvent fields...
  e.next()
})
```

--------------------------------

### PocketBase dbx.Expression: Not() Negation

Source: https://pocketbase.io/docs/go-database

Demonstrates how to negate a given expression using `dbx.Not()`. This is useful for creating `NOT()` conditions in your SQL queries.

```go
// NOT(status = 1)
dbx.Not(dbx.NewExp("status = 1"))
```

--------------------------------

### PocketBase Collection Update Hook: onCollectionAfterUpdateSuccess

Source: https://pocketbase.io/docs/js-event-hooks

The onCollectionAfterUpdateSuccess hook is triggered after each successful Collection DB update persistence, including delayed execution after transaction commits. It can be filtered to apply to specific collections.

```javascript
// fires for every collection
onCollectionAfterUpdateSuccess((e) => {
  // e.app
  // e.collection
  e.next()
})

// fires only for "users" and "articles" collections
onCollectionAfterUpdateSuccess((e) => {
  // e.app
  // e.collection
  e.next()
}, "users", "articles")
```

--------------------------------

### PocketBase: All Collections onCollectionAfterDeleteError Hook

Source: https://pocketbase.io/docs/js-event-hooks

This hook is triggered after each failed collection database deletion persistence. Its execution is either immediate on `$app.delete()` failure or delayed on transaction rollback. It allows for error handling related to collection deletion.

```javascript
onCollectionAfterDeleteError((e) => {
  // e.app
  // e.collection
  // e.error
  e.next()
})
```

--------------------------------

### PocketBase Collection Update Hook: onCollectionAfterUpdateError

Source: https://pocketbase.io/docs/js-event-hooks

The onCollectionAfterUpdateError hook is triggered after failed Collection DB update persistence, with immediate or delayed execution depending on the error type. It supports filtering by specific collections.

```javascript
// fires for every collection
onCollectionAfterUpdateError((e) => {
  // e.app
  // e.collection
  // e.error
  e.next()
})

// fires only for "users" and "articles" collections
onCollectionAfterUpdateError((e) => {
  // e.app
  // e.collection
  // e.error
  e.next()
}, "users", "articles")
```

--------------------------------

### Send Multipart Form Data Request (PocketBase)

Source: https://pocketbase.io/docs/js-sending-http-requests

Demonstrates how to send a `multipart/form-data` request, typically used for file uploads. It involves creating a `FormData` instance and appending fields, including files obtained using `$filesystem.fileFromBytes`. The `body` of the $http.send config is set to this `FormData` object.

```javascript
const formData = new FormData();

formData.append("title", "Hello world!")
formData.append("documents", $filesystem.fileFromBytes("doc1", "doc1.txt"))
formData.append("documents", $filesystem.fileFromBytes("doc2", "doc2.txt"))

const res = $http.send({
  url: "https://...",
  method: "POST",
  body: formData,
})

console.log(res.statusCode)
```

--------------------------------

### Modify Multiple Relation Fields in PocketBase

Source: https://pocketbase.io/docs/working-with-relations

Shows how to update a record's multiple relation fields by either prepending or appending single or multiple relation IDs. Supports both JavaScript and Dart PocketBase SDKs.

```javascript
import PocketBase from 'pocketbase';
const pb = new PocketBase('http://127.0.0.1:8090');

const post = await pb.collection('posts').update('POST_ID', {
  // prepend single tag
  '+tags': 'TAG_ID1',
  // append multiple tags at once
  'tags+': ['TAG_ID1', 'TAG_ID2'],
})
```

```dart
import 'package:pocketbase/pocketbase.dart';

final pb = PocketBase('http://127.0.0.1:8090');

final post = await pb.collection('posts').update('POST_ID', body: {
  // prepend single tag
  '+tags': 'TAG_ID1',
  // append multiple tags at once
  'tags+': ['TAG_ID1', 'TAG_ID2'],
})
```

--------------------------------

### PocketBase onRecordAfterCreateSuccess Hook Example

Source: https://pocketbase.io/docs/js-event-hooks

The onRecordAfterCreateSuccess hook executes after a record has been successfully persisted to the database. For transactions, it's delayed until commit. This hook can be applied to all or specific collections.

```javascript
// fires for every record
onRecordAfterCreateSuccess((e) => {
  // e.app
  // e.record
  e.next()
})

// fires only for "users" and "articles" records
onRecordAfterCreateSuccess((e) => {
  // e.app
  // e.record
  e.next()
}, "users", "articles")
```

--------------------------------

### PocketBase Realtime Message Send Hook

Source: https://pocketbase.io/docs/js-event-hooks

The onRealtimeMessageSend hook is triggered just before an SSE message is sent to a client. It allows inspection of the message and access to original connection request event fields.

```javascript
onRealtimeMessageSend((e) => {
  // e.app
  // e.client
  // e.message
  // and all original connect RequestEvent fields...
  e.next()
})
```

--------------------------------

### PocketBase Collection Update Hook: onCollectionUpdate

Source: https://pocketbase.io/docs/js-event-hooks

The onCollectionUpdate hook is triggered before Collection validation and the UPDATE DB statement. It can be used to execute logic before or after the main update process. Optionally, it can be filtered to specific collections.

```javascript
// fires for every collection
onCollectionUpdate((e) => {
  // e.app
  // e.collection
  e.next()
})

// fires only for "users" and "articles" collections
onCollectionUpdate((e) => {
  // e.app
  // e.collection
  e.next()
}, "users", "articles")
```

--------------------------------

### PocketBase Query WHERE Clause Construction

Source: https://pocketbase.io/docs/go-database

Demonstrates building a complex WHERE clause using PocketBase's query builder methods like `Select`, `From`, `Where`, `AndWhere`, and `OrWhere`. It showcases the use of different `dbx.Expression` types for varied conditions.

```go
/* SELECT users.* FROM users WHERE id = "someId" AND     status = "public" AND     name like "%john%" OR     (         role = "manager" AND         fullTime IS TRUE AND         experience > 10     ) */
app.DB(). Select("users.* "). From("users"). Where(dbx.NewExp("id = {:id}", dbx.Params{ "id": "someId" })). AndWhere(dbx.HashExp{"status": "public"}). AndWhere(dbx.Like("name", "john")). OrWhere(dbx.And(
        dbx.HashExp{ "role": "manager", "fullTime": true, },
        dbx.NewExp("experience > {:exp}", dbx.Params{ "exp": 10 })
    ))
```

--------------------------------

### Send Custom Email After User Registration (JavaScript)

Source: https://pocketbase.io/docs/js-sending-emails

This snippet demonstrates how to send a custom email notification after a new user is created. It utilizes the `$app.newMailClient().send(message)` method with a `MailerMessage` object, configuring sender, recipient, subject, and HTML content. Ensure mail settings are configured in the PocketBase dashboard.

```javascript
onRecordCreateRequest((e) => {
    e.next()
    const message = new MailerMessage({
        from: {
            address: e.app.settings().meta.senderAddress,
            name:    e.app.settings().meta.senderName,
        },
        to: [{address: e.record.email()}],
        subject: "YOUR_SUBJECT...",
        html: "YOUR_HTML_BODY...", // bcc, cc and custom headers are also supported...
    })

    e.app.newMailClient().send(message)
}, "users")
```

--------------------------------

### PocketBase onCollectionCreateRequest Hook

Source: https://pocketbase.io/docs/js-event-hooks

The onCollectionCreateRequest hook intercepts API Collection create requests. It is useful for additional data validation or implementing custom persistence logic. The hook's RequestEvent includes e.app and e.collection. Call e.next() to finalize the operation.

```javascript
onCollectionCreateRequest((e) => {
  // e.app
  // e.collection
  // and all RequestEvent fields...
  e.next()
})
```

--------------------------------

### PocketBase: Specific After Create Success Hook

Source: https://pocketbase.io/docs/js-event-hooks

This version of onModelAfterCreateSuccess allows developers to specify particular models, such as 'users' or 'articles', for which the success hook should be triggered after successful database persistence.

```javascript
// fires only for "users" and "articles" models
onModelAfterCreateSuccess((e) => {
  // e.app
  // e.model
  e.next()
}, "users", "articles")
```

--------------------------------

### PocketBase Realtime Connection Hook

Source: https://pocketbase.io/docs/js-event-hooks

The onRealtimeConnectRequest hook is triggered when an SSE client connection is established. It allows access to request event details and can be used to customize connection behavior. Execution after e.next() occurs after the client disconnects.

```javascript
onRealtimeConnectRequest((e) => {
  // e.app
  // e.client
  // e.idleTimeout
  // and all RequestEvent fields...
  e.next()
})
```

--------------------------------

### PocketBase Mailer Hook: onMailerSend

Source: https://pocketbase.io/docs/js-event-hooks

The onMailerSend hook intercepts every new email sent using the `$app.newMailClient()` instance. This allows for modification of the email message, such as changing the subject, or using a custom mailer client. Ensure `e.next()` is called to continue the email sending process.

```javascript
onMailerSend((e) => {
    // e.app
    // e.mailer
    // e.message
    // ex. change the mail subject
    e.message.subject = "new subject"

    e.next()
})
```

--------------------------------

### PocketBase App Hook: onBackupRestore

Source: https://pocketbase.io/docs/js-event-hooks

The onBackupRestore hook is triggered before an application backup is restored via `$app.restoreBackup`. The `e` object contains `e.app`, `e.name` (backup name to restore), and `e.exclude` (list of directory entries to exclude).

```javascript
onBackupRestore((e) => {
    // e.app
    // e.name    - the name of the backup to restore
    // e.exclude - list of dir entries to exclude from the backup
})
```

--------------------------------

### Paginating Query Results

Source: https://pocketbase.io/docs/js-database

The offset() method is used to skip a specified number of records before applying the limit, typically used for pagination alongside limit().

```APIDOC
## POST /api/query

### Description
Skips a specified number of records before returning results, used for pagination.

### Method
POST (or applicable HTTP method for query execution)

### Endpoint
`/api/query` (Illustrative endpoint, actual execution might differ)

### Parameters
#### Request Body
- **number** (integer) - Required - The number of records to skip.

### Request Example
```json
{
  "select": "users.*",
  "from": "users",
  "offset": 5,
  "limit": 30
}
```

### Response
#### Success Response (200)
- **data** (array) - The paginated query results.

#### Response Example
```json
{
  "data": [
    { "id": "6", ... },
    { "id": "7", ... }
  ]
}
```
```

--------------------------------

### PocketBase Mailer Hook: onMailerRecordOTPSend

Source: https://pocketbase.io/docs/js-event-hooks

This hook allows interception and customization of One-Time Password (OTP) emails sent to authentication records. The `e` object includes `e.app`, `e.mailer`, `e.message`, `e.record`, and `e.meta`. Ensure `e.next()` is called to send the email.

```javascript
onMailerRecordOTPSend((e) => {
    // e.app
    // e.mailer
    // e.message
    // e.record
    // e.meta
    // ex. change the mail subject
    e.message.subject = "new subject"

    e.next()
})
```

--------------------------------

### PocketBase Email Verification Request and Confirmation

Source: https://pocketbase.io/docs/api-records

Handles the process of requesting and confirming email verification for user accounts. The request function sends a verification email, and the confirm function uses a token received via email to complete the verification. Both JavaScript and Dart examples are provided.

```javascript
import PocketBase from 'pocketbase';
const pb = new PocketBase('http://127.0.0.1:8090');

// Request verification
await pb.collection('users').requestVerification('test@example.com');

// Confirm verification (in your custom confirmation page)
await pb.collection('users').confirmVerification('VERIFICATION_TOKEN');
```

```dart
import 'package:pocketbase/pocketbase.dart';

final pb = PocketBase('http://127.0.0.1:8090');

// Request verification
await pb.collection('users').requestVerification('test@example.com');

// Confirm verification (in your custom confirmation page)
await pb.collection('users').confirmVerification('VERIFICATION_TOKEN');
```

--------------------------------

### Update a Single Collection Record (PATCH) - JavaScript

Source: https://pocketbase.io/docs/api-records

Updates a single record within a specified collection. Requires the collection ID or name and the record ID. The request body can contain schema fields and optional authentication fields like oldPassword, password, and passwordConfirm. Supports JSON or multipart/form-data for body parameters, with file uploads only via multipart/form-data. Query parameters like 'expand' and 'fields' can modify the response.

```javascript
import PocketBase from 'pocketbase';
const pb = new PocketBase('http://127.0.0.1:8090');

// Example: Update a record
const recordId = 'YOUR_RECORD_ID';
const collectionName = 'demo';
const data = {
    "title": "Updated Title"
};

await pb.collection(collectionName).update(recordId, data);

```

--------------------------------

### PocketBase dbx.Expression: OrNotLike() Clause

Source: https://pocketbase.io/docs/go-database

Explains the `dbx.OrNotLike()` function for creating `NOT LIKE` conditions where the column must not match any of the provided values, combined with `OR`.

```go
// name NOT LIKE "%test1%" OR name NOT LIKE "%test2%"
dbx.OrNotLike("name", "test1", "test2")
// name NOT LIKE "test1%" OR name NOT LIKE "test2%"
dbx.OrNotLike("name", "test1", "test2").Match(false, true)
```

--------------------------------

### PocketBase: After Create Success Hook

Source: https://pocketbase.io/docs/js-event-hooks

The onModelAfterCreateSuccess hook is executed only after a model has been successfully persisted to the database. For transactions, this hook fires after the transaction is committed, ensuring the data is permanently stored.

```javascript
// fires for every model
onModelAfterCreateSuccess((e) => {
  // e.app
  // e.model
  e.next()
})
```

--------------------------------

### PocketBase: Specific Model Create Hook

Source: https://pocketbase.io/docs/js-event-hooks

The onModelCreate hook can be configured to trigger only for specific models, such as 'users' and 'articles'. This provides targeted execution of custom logic based on the model type.

```javascript
// fires only for "users" and "articles" models
onModelCreate((e) => {
  // e.app
  // e.model
  e.next()
}, "users", "articles")
```

--------------------------------

### PocketBase App Hook: onBackupCreate

Source: https://pocketbase.io/docs/js-event-hooks

The onBackupCreate hook is triggered on each call to `$app.createBackup`. It provides access to the event object `e`, which includes `e.app`, `e.name` (backup name), and `e.exclude` (list of entries to exclude from the backup).

```javascript
onBackupCreate((e) => {
    // e.app
    // e.name    - the name of the backup to create
    // e.exclude - list of pb_data dir entries to exclude from the backup
})
```

--------------------------------

### PocketBase onSettingsUpdateRequest Hook

Source: https://pocketbase.io/docs/js-event-hooks

The onSettingsUpdateRequest hook fires for each API Settings update request. It can be utilized for additional validation of request data or to implement custom persistence behavior. The hook provides e.app, e.oldSettings, and e.newSettings in the RequestEvent. Call e.next() to complete the update.

```javascript
onSettingsUpdateRequest((e) => {
  // e.app
  // e.oldSettings
  // e.newSettings
  // and all RequestEvent fields...
  e.next()
})
```

--------------------------------

### PocketBase dbx.Expression: OrLike() Clause

Source: https://pocketbase.io/docs/go-database

Illustrates creating `LIKE` conditions where the column must match at least one of the provided values using `dbx.OrLike()`. Multiple values are combined with `OR`.

```go
// name LIKE "%test1%" OR name LIKE "%test2%"
dbx.OrLike("name", "test1", "test2")
// name LIKE "test1%" OR name LIKE "test2%"
dbx.OrLike("name", "test1", "test2").Match(false, true)
```

--------------------------------

### PocketBase: All Collections onCollectionAfterDeleteSuccess Hook

Source: https://pocketbase.io/docs/js-event-hooks

This hook is triggered after each successful collection database deletion persistence. It executes only after the transaction has been committed, guaranteeing the deletion. It is not triggered if the transaction fails or rollbacks.

```javascript
onCollectionAfterDeleteSuccess((e) => {
  // e.app
  // e.collection
  e.next()
})
```

--------------------------------

### PocketBase onCollectionCreate Hook

Source: https://pocketbase.io/docs/js-event-hooks

The onCollectionCreate hook is triggered before Collection validation and INSERT DB statement. It can be used to perform operations before or after the default validation and save process. It also supports filtering by specific collection names.

```javascript
// fires for every collection
onCollectionCreate((e) => {
  // e.app
  // e.collection
  e.next()
})

// fires only for "users" and "articles" collections
onCollectionCreate((e) => {
  // e.app
  // e.collection
  e.next()
}, "users", "articles")
```

--------------------------------

### PocketBase: After Create Error Hook

Source: https://pocketbase.io/docs/js-event-hooks

The onModelAfterCreateError hook is triggered when a model creation persistence fails. The execution can be immediate for save failures or delayed for transaction rollbacks, allowing for error handling logic.

```javascript
// fires for every model
onModelAfterCreateError((e) => {
  // e.app
  // e.model
  // e.error
  e.next()
})
```

--------------------------------

### PocketBase Collection Update Hook: onCollectionUpdateExecute

Source: https://pocketbase.io/docs/js-event-hooks

The onCollectionUpdateExecute hook is triggered after successful Collection validation and right before the model UPDATE DB statement execution. It allows for pre-persistence logic and can be scoped to specific collections.

```javascript
// fires for every collection
onCollectionUpdateExecute((e) => {
  // e.app
  // e.collection
  e.next()
})

// fires only for "users" and "articles" collections
onCollectionUpdateExecute((e) => {
  // e.app
  // e.collection
  e.next()
}, "users", "articles")
```

--------------------------------

### PocketBase dbx.Expression: NotLike() Clause

Source: https://pocketbase.io/docs/go-database

Details the usage of `dbx.NotLike()` for creating `NOT LIKE` conditions, similar to `Like()`, allowing exclusion of specific string patterns.

```go
// name NOT LIKE "%test1%" AND name NOT LIKE "%test2%"
dbx.NotLike("name", "test1", "test2")
// name NOT LIKE "test1%"
dbx.NotLike("name", "test1").Match(false, true)
```

--------------------------------

### PocketBase Mailer Hook: onMailerRecordAuthAlertSend

Source: https://pocketbase.io/docs/js-event-hooks

This hook triggers when a new device login alert email is sent, providing an opportunity to intercept and customize the email content. The `e` object includes `e.app`, `e.mailer`, `e.message`, `e.record`, and `e.meta`. Call `e.next()` to proceed.

```javascript
onMailerRecordAuthAlertSend((e) => {
    // e.app
    // e.mailer
    // e.message
    // e.record
    // e.meta
    // ex. change the mail subject
    e.message.subject = "new subject"

    e.next()
})
```

--------------------------------

### PocketBase - Generating Record Auth Response

Source: https://pocketbase.io/docs/js-routing

Shows how to use the `$apis.recordAuthResponse()` helper to create a standardized JSON response for user authentication, including the authentication token and record data. This is typically used in custom authentication routes.

```javascript
routerAdd("POST", "/phone-login", (e) => {
    const data = new DynamicModel({ phone: "", password: "" })
    e.bindBody(data)
    let record = e.app.findFirstRecordByData("users", "phone", data.phone)
    if !record.validatePassword(data.password) {
        // return generic 400 error as a basic enumeration protection
        throw new BadRequestError("Invalid credentials")
    }
    return $apis.recordAuthResponse(e, record, "phone")
})
```

--------------------------------

### PocketBase onCollectionCreateExecute Hook

Source: https://pocketbase.io/docs/js-event-hooks

The onCollectionCreateExecute hook is triggered after successful Collection validation and right before the model INSERT DB statement execution. This hook is part of the save process and can be filtered by collection name.

```javascript
// fires for every collection
onCollectionCreateExecute((e) => {
  // e.app
  // e.collection
  e.next()
})

// fires only for "users" and "articles" collections
onCollectionCreateExecute((e) => {
  // e.app
  // e.collection
  e.next()
}, "users", "articles")
```

--------------------------------

### PocketBase onCollectionAfterCreateError Hook

Source: https://pocketbase.io/docs/js-event-hooks

The onCollectionAfterCreateError hook is triggered after each failed Collection DB create persistence. It handles errors during the save process, either immediately or delayed depending on transaction rollback. It can be filtered by collection name.

```javascript
// fires for every collection
onCollectionAfterCreateError((e) => {
  // e.app
  // e.collection
  // e.error
  e.next()
})

// fires only for "users" and "articles" collections
onCollectionAfterCreateError((e) => {
  // e.app
  // e.collection
  // e.error
  e.next()
}, "users", "articles")
```

--------------------------------

### PocketBase: Execute Hook on Model Create

Source: https://pocketbase.io/docs/js-event-hooks

The onModelCreateExecute hook is triggered after successful model validation and just before the database INSERT statement. It's part of the standard save flow and allows logic execution immediately before persistence.

```javascript
// fires for every model
onModelCreateExecute((e) => {
  // e.app
  // e.model
  e.next()
})
```

--------------------------------

### Register Custom Route with Dynamic HTML Rendering in PocketBase

Source: https://pocketbase.io/docs/js-rendering-templates

Registers a GET route in PocketBase that captures a name from the URL and renders a dynamic HTML page using composed templates. It loads layout and content templates, passes data, and returns an HTML response.

```javascript
routerAdd("get", "/hello/{name}", (e) => {
    const name = e.request.pathValue("name")
    const html = $template.loadFiles(
        `${__hooks}/views/layout.html`,
        `${__hooks}/views/hello.html`,
    ).render({"name": name})
    return e.html(200, html)
})
```

--------------------------------

### PocketBase onRecordAfterCreateError Hook Example

Source: https://pocketbase.io/docs/js-event-hooks

The onRecordAfterCreateError hook is triggered when record creation persistence fails. Execution can be immediate or delayed depending on the nature of the error (e.g., transaction rollback). This hook can be applied globally or to specific collections.

```javascript
// fires for every record
onRecordAfterCreateError((e) => {
  // e.app
  // e.record
  // e.error
  e.next()
})

// fires only for "users" and "articles" records
onRecordAfterCreateError((e) => {
  // e.app
  // e.record
  // e.error
  e.next()
}, "users", "articles")
```

--------------------------------

### Reading Client IP

Source: https://pocketbase.io/docs/js-routing

Retrieves the IP address of the client connecting to the server. `remoteIP()` returns the direct client IP, while `realIP()` considers trusted proxy headers for more accurate client identification.

```javascript
let ip = e.remoteIP()
let ip = e.realIP()
```

--------------------------------

### PocketBase: All Model Create Hook

Source: https://pocketbase.io/docs/js-event-hooks

The onModelCreate hook is triggered for every model creation event, before and after validation and database insertion. It allows for pre- and post-operation logic. Execution does not guarantee persistence if the wrapping transaction fails.

```javascript
// fires for every model
onModelCreate((e) => {
  // e.app
  // e.model
  e.next()
})
```

--------------------------------

### PocketBase onCollectionUpdateRequest Hook

Source: https://pocketbase.io/docs/js-event-hooks

The onCollectionUpdateRequest hook is invoked for each API Collection update request. Developers can use this to perform extra validation on request data or define alternative persistence mechanisms. The hook provides e.app and e.collection in the RequestEvent. The request proceeds upon calling e.next().

```javascript
onCollectionUpdateRequest((e) => {
  // e.app
  // e.collection
  // and all RequestEvent fields...
  e.next()
})
```

--------------------------------

### PocketBase dbx.Expression: NotIn() Clause

Source: https://pocketbase.io/docs/go-database

Demonstrates creating a `NOT IN` clause for a column and a list of values using the `dbx.NotIn()` function.

```go
// status NOT IN ("public", "reviewed")
dbx.NotIn("status", "public", "reviewed")
```

--------------------------------

### PocketBase Go Custom SQLite Driver: github.com/mattn/go-sqlite3

Source: https://pocketbase.io/docs/go-overview

This Go code configures PocketBase to use the github.com/mattn/go-sqlite3 driver with custom PRAGMA settings. The `init` function registers the driver with specific connection hooks for optimal performance and behavior. PocketBase is then initialized with a custom `DBConnect` function.

```go
package main

import (
	"database/sql"
	"log"

	"github.com/mattn/go-sqlite3"
	"github.com/pocketbase/dbx"
	"github.com/pocketbase/pocketbase"
)

// register a new driver with default PRAGMAs and the same query
// builder implementation as the already existing sqlite3 builder
func init() {
	// initialize default PRAGMAs for each new connection
	sql.Register("pb_sqlite3", &sqlite3.SQLiteDriver{
			ConnectHook: func(conn *sqlite3.SQLiteConn) error {
				_, err := conn.Exec(`
					PRAGMA busy_timeout       = 10000;
					PRAGMA journal_mode       = WAL;
					PRAGMA journal_size_limit = 200000000;
					PRAGMA synchronous        = NORMAL;
					PRAGMA foreign_keys       = ON;
					PRAGMA temp_store         = MEMORY;
					PRAGMA cache_size         = -16000;
				`, nil)
				return err
			},
		})

	dbx.BuilderFuncMap["pb_sqlite3"] = dbx.BuilderFuncMap["sqlite3"]
}

func main() {
	app := pocketbase.NewWithConfig(pocketbase.Config{
		DBConnect: func(dbPath string) (*dbx.DB, error) { return dbx.Open("pb_sqlite3", dbPath) },
	})

	// any custom hooks or plugins...
	if err := app.Start(); err != nil {
		log.Fatal(err)
	}
}
```

--------------------------------

### PocketBase onCollectionsListRequest Hook

Source: https://pocketbase.io/docs/js-event-hooks

The onCollectionsListRequest hook is triggered on each API Collections list request. It can be used to validate or modify the response before it's returned to the client. The hook receives a RequestEvent object with properties like e.app, e.collections, and e.result. Calling e.next() continues the request lifecycle.

```javascript
onCollectionsListRequest((e) => {
  // e.app
  // e.collections
  // e.result
  // and all RequestEvent fields...
  e.next()
})
```

--------------------------------

### PocketBase: Specific After Create Error Hook

Source: https://pocketbase.io/docs/js-event-hooks

This variant of onModelAfterCreateError enables the hook to be triggered only for specific models, like 'users' or 'articles', when their creation persistence encounters an error, facilitating model-specific error management.

```javascript
// fires only for "users" and "articles" models
onModelAfterCreateError((e) => {
  // e.app
  // e.model
  // e.error
  e.next()
}, "users", "articles")
```

--------------------------------

### PocketBase Mailer Hook: onMailerRecordEmailChangeSend

Source: https://pocketbase.io/docs/js-event-hooks

Intercept and customize confirmation emails for address changes sent to authentication records. The hook provides access to `e.app`, `e.mailer`, `e.message`, `e.record`, and `e.meta`. Call `e.next()` to send the modified email.

```javascript
onMailerRecordEmailChangeSend((e) => {
    // e.app
    // e.mailer
    // e.message
    // e.record
    // e.meta
    // ex. change the mail subject
    e.message.subject = "new subject"

    e.next()
})
```

--------------------------------

### PocketBase onCollectionViewRequest Hook

Source: https://pocketbase.io/docs/js-event-hooks

The onCollectionViewRequest hook is triggered on each API Collection view request. This hook allows for validation or modification of the response prior to client delivery. It provides access to e.app and e.collection within the RequestEvent object. Ensure e.next() is called to proceed.

```javascript
onCollectionViewRequest((e) => {
  // e.app
  // e.collection
  // and all RequestEvent fields...
  e.next()
})
```

--------------------------------

### PocketBase IO: Handle Record Delete Requests

Source: https://pocketbase.io/docs/js-event-hooks

The `onRecordDeleteRequest` hook is triggered on every API Record delete request. It provides a way to validate request data or implement custom deletion logic. This hook can be applied to all collections or specific ones.

```javascript
// fires for every collection
onRecordDeleteRequest((e) => {
// e.app
// e.collection
// e.record
// and all RequestEvent fields...
     e.next()
})

// fires only for "users" and "articles" collections
onRecordDeleteRequest((e) => {
// e.app
// e.collection
// e.record
// and all RequestEvent fields...
     e.next()
}, "users", "articles")
```

--------------------------------

### PocketBase: All Collections onCollectionDelete Hook

Source: https://pocketbase.io/docs/js-event-hooks

This hook is triggered before collection validation and UPDATE DB statement when any collection is deleted. It allows for pre-deletion operations. Note that successful execution does not guarantee deletion if the transaction is not committed.

```javascript
onCollectionDelete((e) => {
  // e.app
  // e.collection
  e.next()
})
```

--------------------------------

### PocketBase: Listen for Failed Model Deletion Persistence

Source: https://pocketbase.io/docs/js-event-hooks

This snippet illustrates the use of the onModelAfterDeleteError hook, triggered after a failed model deletion persistence. The execution can be immediate or delayed depending on the error context (e.g., transaction rollback). It supports filtering by model names.

```javascript
onModelAfterDeleteError((e) => {
  // e.app
  // e.model
  // e.error
  e.next()
})
```

--------------------------------

### PocketBase onCollectionDeleteRequest Hook

Source: https://pocketbase.io/docs/js-event-hooks

The onCollectionDeleteRequest hook triggers on every API Collection delete request. It enables custom validation of deletion requests or the implementation of unique delete behaviors. The RequestEvent object includes e.app and e.collection. Call e.next() to complete the deletion process.

```javascript
onCollectionDeleteRequest((e) => {
  // e.app
  // e.collection
  // and all RequestEvent fields...
  e.next()
})
```

--------------------------------

### PocketBase: Specific Collections onCollectionAfterDeleteError Hook

Source: https://pocketbase.io/docs/js-event-hooks

This hook is triggered after each failed collection database deletion persistence, but only for specified collections ('users', 'articles'). Its execution is either immediate on `$app.delete()` failure or delayed on transaction rollback. It allows for error handling related to specific collection deletion.

```javascript
onCollectionAfterDeleteError((e) => {
  // e.app
  // e.collection
  // e.error
  e.next()
}, "users", "articles")
```

--------------------------------

### Writing Response Body

Source: https://pocketbase.io/docs/js-routing

Demonstrates various methods for sending responses from an API endpoint, including JSON, string, HTML, redirects, no content, files, streams, and blobs.

```APIDOC
## Writing Response Body

### Description
Provides methods to send different types of responses back to the client.

### Methods
- `e.json(statusCode, body)`: Sends a JSON response.
- `e.string(statusCode, body)`: Sends a plain text string response.
- `e.html(statusCode, body)`: Sends an HTML response.
- `e.redirect(statusCode, url)`: Redirects the client to a new URL.
- `e.noContent(statusCode)`: Sends a response with no body.
- `e.fileFS(fileSystem, filename)`: Serves a file from a file system.
- `e.stream(statusCode, contentType, reader)`: Streams data from a reader.
- `e.blob(statusCode, contentType, byteArray)`: Sends a byte array (blob) as a response.

### Request Example
```javascript
// send response with JSON body
e.json(200, {"name": "John"})

// send response with string body
e.string(200, "Lorem ipsum...")

// send response with HTML body
e.html(200, "<h1>Hello!</h1>")

// redirect
e.redirect(307, "https://example.com")

// send response with no body
e.noContent(204)

// serve a single file
e.fileFS($os.dirFS("..."), "example.txt")

// stream the specified reader
e.stream(200, "application/octet-stream", reader)

// send response with blob (bytes array) body
e.blob(200, "application/octet-stream", [ ... ])
```
```

--------------------------------

### Apply Condition to Each Array Item with :each Modifier

Source: https://pocketbase.io/docs/api-rules-and-filters

The :each modifier applies a condition to each item in multiple select, file, and relation type fields. It works only with these field types. It does not support checking for new uploaded files.

```pocketbase
// check if all submitted select options contain the "create" text @request.body.someSelectField:each ~ "create"
// check if all existing someSelectField has "pb_" prefix someSelectField:each ~ "pb_%"
```

--------------------------------

### Manage Record Authentication with Password using onRecordAuthWithPasswordRequest

Source: https://pocketbase.io/docs/js-event-hooks

The `onRecordAuthWithPasswordRequest` hook is executed for each Record authentication request using a password. `e.record` can be null if no match is found, enabling manual record lookup. This hook supports global or collection-specific application.

```javascript
onRecordAuthWithPasswordRequest((e) => {
  // e.app
  // e.collection
  // e.record (could be null)
  // e.identity
  // e.identityField
  // e.password
  // and all RequestEvent fields...
  e.next()
})

onRecordAuthWithPasswordRequest((e) => {
  // e.app
  // e.collection
  // e.record (could be null)
  // e.identity
  // e.identityField
  // e.password
  // and all RequestEvent fields...
  e.next()
}, "users", "managers")
```

--------------------------------

### SelectField Modifiers in PocketBase

Source: https://pocketbase.io/docs/collections

Shows how to append, prepend, or subtract values from SelectFields in PocketBase. This applies to both single and multiple select options, allowing dynamic management of predefined choices.

```json
{
  "permissions+": "optionA",
  "roles-": ["staff", "editor"]
}
```

--------------------------------

### Failed Model Update Persistence Hook (onModelAfterUpdateError)

Source: https://pocketbase.io/docs/js-event-hooks

The `onModelAfterUpdateError` hook is triggered after a model's database update persistence fails. Execution can be immediate for `$app.save()` failures or delayed for transaction rollbacks. It provides access to the error object.

```javascript
// fires for every model
onModelAfterUpdateError((e) => {
  // e.app
  // e.model
  // e.error
  e.next()
})

// fires only for "users" and "articles" models
onModelAfterUpdateError((e) => {
  // e.app
  // e.model
  // e.error
  e.next()
}, "users", "articles")
```

--------------------------------

### General Model Update Hook (onModelUpdate)

Source: https://pocketbase.io/docs/js-event-hooks

The `onModelUpdate` hook is triggered for any model update. Operations before `e.next()` run before validation and DB update, while operations after `e.next()` run after. This hook is not guaranteed to persist if the transaction rolls back.

```javascript
// fires for every model
onModelUpdate((e) => {
  // e.app
  // e.model
  e.next()
})

// fires only for "users" and "articles" models
onModelUpdate((e) => {
  // e.app
  // e.model
  e.next()
}, "users", "articles")
```

--------------------------------

### Using the Query Builder

Source: https://pocketbase.io/docs/js-database

Construct SQL queries programmatically using the PocketBase query builder API, which provides methods for common SQL clauses like SELECT, FROM, WHERE, JOIN, etc.

```APIDOC
## Using the Query Builder

### Description
Compose SQL statements programmatically using the query builder API instead of writing raw SQL. Each SQL keyword has a corresponding method (e.g., `select()`, `from()`, `where()`).

### Methods
- `select(...cols)`: Initializes a `SELECT` query.
- `andSelect(...cols)`: Adds columns to an existing `SELECT` query.
- `distinct(true)`: Selects distinct rows.
- `from(...tables)`: Specifies the tables to select from.
- `join(type, table, on)`: Adds a `JOIN` clause.
- `innerJoin(table, on)`: Shortcut for `INNER JOIN`.
- `leftJoin(table, on)`: Shortcut for `LEFT JOIN`.
- `rightJoin(table, on)`: Shortcut for `RIGHT JOIN`.
- `andWhere(expression)`: Adds a `WHERE` condition.
- `limit(count)`: Sets the `LIMIT` clause.
- `orderBy(column, direction)`: Sets the `ORDER BY` clause.

### Request Example (Basic Select)
```javascript
const result = arrayOf(new DynamicModel({
  "id": "",
  "email": "",
}))

$app.db()
  .select("id", "email")
  .from("users")
  .andWhere($dbx.like("email", "example.com"))
  .limit(100)
  .orderBy("created ASC")
  .all(result)
```

### Request Example (Advanced Select with Joins)
```javascript
$app.db()
  .select("users.*")
  .from("users")
  .innerJoin("profiles", $dbx.exp("profiles.user_id = users.id"))
  .join("FULL OUTER JOIN", "department", $dbx.exp("department.id = {:id}", {id: "someId"}))
  // ... more query building methods
```

### Request Example (Select with Aliases and Distinct)
```javascript
$app.db()
  .select("id", "avatar as image")
  .andSelect("(firstName || ' ' || lastName) as fullName")
  .distinct(true)
  // ... more query building methods
```
```

--------------------------------

### PocketBase IO: Handle Record Create Requests

Source: https://pocketbase.io/docs/js-event-hooks

The `onRecordCreateRequest` hook executes on every API Record create request. It is suitable for additional request data validation or implementing custom persistence logic. The hook can be globally applied or restricted to specific collections.

```javascript
// fires for every collection
onRecordCreateRequest((e) => {
// e.app
// e.collection
// e.record
// and all RequestEvent fields...
     e.next()
})

// fires only for "users" and "articles" collections
onRecordCreateRequest((e) => {
// e.app
// e.collection
// e.record
// and all RequestEvent fields...
     e.next()
}, "users", "articles")
```

--------------------------------

### PocketBase: Listen to Specific Model Deletions

Source: https://pocketbase.io/docs/js-event-hooks

This snippet shows how to use the onModelDelete hook to specifically listen for deletion events on 'users' and 'articles' models. The hook fires before model validation and the database update.

```javascript
onModelDelete((e) => {
  // e.app
  // e.model
  e.next()
}, "users", "articles")
```

--------------------------------

### PocketBase Password Reset Request and Confirmation

Source: https://pocketbase.io/docs/api-records

Manages the password reset process for users. The request function sends a password reset email, invalidating all previous auth tokens upon successful reset. The confirm function uses a token and new password to finalize the reset. Examples are available in JavaScript and Dart.

```javascript
import PocketBase from 'pocketbase';
const pb = new PocketBase('http://127.0.0.1:8090');

// Request password reset
await pb.collection('users').requestPasswordReset('test@example.com');

// Confirm password reset (in your custom confirmation page)
// note: after this call all previously issued auth tokens are invalidated
await pb.collection('users').confirmPasswordReset('RESET_TOKEN', 'NEW_PASSWORD', 'NEW_PASSWORD_CONFIRM');
```

```dart
import 'package:pocketbase/pocketbase.dart';

final pb = PocketBase('http://127.0.0.1:8090');

// Request password reset
await pb.collection('users').requestPasswordReset('test@example.com');

// Confirm password reset (in your custom confirmation page)
// note: after this call all previously issued auth tokens are invalidated
await pb.collection('users').confirmPasswordReset('RESET_TOKEN', 'NEW_PASSWORD', 'NEW_PASSWORD_CONFIRM');
```

--------------------------------

### Enrich Record with External Data using HTTP Request (PocketBase)

Source: https://pocketbase.io/docs/js-sending-http-requests

An example of using $http.send within an onRecordCreateRequest hook to fetch book data from an external API (openlibrary.org) based on an ISBN and update the record's 'published' field. Handles successful responses and logs errors.

```javascript
onRecordCreateRequest((e) => {
  let isbn = e.record.get("isbn");
  // try to update with the published date from the openlibrary API
  try {
    const res = $http.send({
      url: "https://openlibrary.org/isbn/" + isbn + ".json",
      headers: {"content-type": "application/json"}
    })
    if (res.statusCode == 200) {
      e.record.set("published", res.json.publish_date)
    }
  } catch (err) {
    e.app.logger().error("Failed to retrieve book data", "error", err);
  }
  return e.next()
}, "books")
```

--------------------------------

### PocketBase: Execute Before Model Delete DB Statement

Source: https://pocketbase.io/docs/js-event-hooks

This snippet illustrates the use of the onModelDeleteExecute hook, which is triggered right before the model's DELETE DB statement. It's useful for actions that must occur immediately before data is removed from the database. It also supports filtering by model names.

```javascript
onModelDeleteExecute((e) => {
  // e.app
  // e.model
  e.next()
})
```

--------------------------------

### Model Update Execution Hook (onModelUpdateExecute)

Source: https://pocketbase.io/docs/js-event-hooks

The `onModelUpdateExecute` hook fires after successful model validation and immediately before the database UPDATE statement. It's part of the `$app.save()` sequence. Similar to `onModelUpdate`, persistence is not guaranteed if the transaction fails.

```javascript
// fires for every model
onModelUpdateExecute((e) => {
  // e.app
  // e.model
  e.next()
})

// fires only for "users" and "articles" models
onModelUpdateExecute((e) => {
  // e.app
  // e.model
  e.next()
}, "users", "articles")
```

--------------------------------

### PocketBase: Specific Collections onCollectionDelete Hook

Source: https://pocketbase.io/docs/js-event-hooks

This hook is triggered before collection validation and UPDATE DB statement, but only for specified collections ('users', 'articles'). It allows for targeted pre-deletion operations. Note that successful execution does not guarantee deletion if the transaction is not committed.

```javascript
onCollectionDelete((e) => {
  // e.app
  // e.collection
  e.next()
}, "users", "articles")
```

--------------------------------

### PocketBase: Specific Collections onCollectionAfterDeleteSuccess Hook

Source: https://pocketbase.io/docs/js-event-hooks

This hook is triggered after each successful collection database deletion persistence, but only for specified collections ('users', 'articles'). It executes only after the transaction has been committed, guaranteeing the deletion. It is not triggered if the transaction fails or rollbacks.

```javascript
onCollectionAfterDeleteSuccess((e) => {
  // e.app
  // e.collection
  e.next()
}, "users", "articles")
```

--------------------------------

### Go: Query Builder - Join Clauses

Source: https://pocketbase.io/docs/go-database

Illustrates adding `JOIN` clauses to queries. Shows the generic `Join()` method with different join types and the convenient shortcuts like `InnerJoin()`, `LeftJoin()`, and `RightJoin()`.

```Go
app.DB(). Select("users.*").
 From("users").
 InnerJoin("profiles", dbx.NewExp("profiles.user_id = users.id")).
 Join("FULL OUTER JOIN", "department", dbx.NewExp("department.id = {:id}", dbx.Params{
  "id": "someId",
 })) ...
```

--------------------------------

### Execute Custom Logic Before Record Update (PocketBase Hook)

Source: https://pocketbase.io/docs/js-event-hooks

The `onRecordUpdate` hook allows custom logic execution before the record validation and database update statement. It can be configured to trigger for all records or specific collections. The `e.next()` call is crucial for proceeding with the update process.

```javascript
// fires for every record
onRecordUpdate((e) => {
  // e.app
  // e.record
  e.next()
})

// fires only for "users" and "articles" records
onRecordUpdate((e) => {
  // e.app
  // e.record
  e.next()
}, "users", "articles")
```

--------------------------------

### Control Verification Requests with onRecordRequestVerificationRequest

Source: https://pocketbase.io/docs/js-event-hooks

The `onRecordRequestVerificationRequest` hook is invoked for each Record request verification API request. Use this hook to validate loaded request data or implement custom verification behaviors. It can be applied globally or to specific auth collections.

```javascript
onRecordRequestVerificationRequest((e) => {
  // e.app
  // e.collection
  // e.record
  // and all RequestEvent fields...
  e.next()
})

onRecordRequestVerificationRequest((e) => {
  // e.app
  // e.collection
  // e.record
  // and all RequestEvent fields...
  e.next()
}, "users", "managers")
```

--------------------------------

### PocketBase: Listen for Successful Model Deletion Persistence

Source: https://pocketbase.io/docs/js-event-hooks

This snippet shows how to use the onModelAfterDeleteSuccess hook, which is triggered after a model has been successfully persisted as deleted in the database. This hook is delayed if part of a transaction and not triggered on rollback. It can be filtered by model names.

```javascript
onModelAfterDeleteSuccess((e) => {
  // e.app
  // e.model
  e.next()
})
```

--------------------------------

### Generate Random Strings (Go)

Source: https://pocketbase.io/docs/go-miscellaneous

Shows how to generate random strings of a specified length using PocketBase's security helpers in Go. Supports generating strings with a default alphabet or a custom alphabet.

```Go
secret := security.RandomString(10) // e.g. a35Vdb10Z4
secret = security.RandomStringWithAlphabet(5, "1234567890") // e.g. 33215
```

--------------------------------

### Modify Password Reset Confirmation with onRecordConfirmPasswordResetRequest

Source: https://pocketbase.io/docs/js-event-hooks

The `onRecordConfirmPasswordResetRequest` hook is executed for each Record confirm password reset API request. It can be used to validate request data or implement custom persistence logic for password resets. This hook supports global or collection-specific application.

```javascript
onRecordConfirmPasswordResetRequest((e) => {
  // e.app
  // e.collection
  // e.record
  // and all RequestEvent fields...
  e.next()
})

onRecordConfirmPasswordResetRequest((e) => {
  // e.app
  // e.collection
  // e.record
  // and all RequestEvent fields...
  e.next()
}, "users", "managers")
```

--------------------------------

### PocketBase Go Custom SQLite Driver: github.com/ncruces/go-sqlite3

Source: https://pocketbase.io/docs/go-overview

This Go code sets up PocketBase to use the github.com/ncruces/go-sqlite3 driver. It configures the database connection string with specific PRAGMA settings directly within the `DBConnect` function using a query string format. The necessary driver and embed packages are imported.

```go
package main

import (
	"log"

	"github.com/pocketbase/dbx"
	"github.com/pocketbase/pocketbase"
	_ "github.com/ncruces/go-sqlite3/driver"
	_ "github.com/ncruces/go-sqlite3/embed"
)

func main() {
	app := pocketbase.NewWithConfig(pocketbase.Config{
		DBConnect: func(dbPath string) (*dbx.DB, error) {
			const pragmas = "?_pragma=busy_timeout(10000)&_pragma=journal_mode(WAL)&_pragma=journal_size_limit(200000000)&_pragma=synchronous(NORMAL)&_pragma=foreign_keys(ON)&_pragma=temp_store(MEMORY)&_pragma=cache_size(-16000)"
			return dbx.Open("sqlite3", "file:"+dbPath+pragmas)
		},
	})

	// custom hooks and plugins...
	if err := app.Start(); err != nil {
		log.Fatal(err)
	}
}
```

--------------------------------

### PocketBase dbx.Expression: NotExists() Subquery

Source: https://pocketbase.io/docs/go-database

Shows how to use `dbx.NotExists()` to prefix an expression, usually a subquery, with the `NOT EXISTS` operator.

```go
// NOT EXISTS (SELECT 1 FROM users WHERE status = 'active')
dbx.NotExists(dbx.NewExp("SELECT 1 FROM users WHERE status = 'active'"))
```

--------------------------------

### PocketBase dbx.Expression: In() Clause

Source: https://pocketbase.io/docs/go-database

Shows how to generate an `IN` clause for a specified column with a list of allowed values using `dbx.In()`.

```go
// status IN ("public", "reviewed")
dbx.In("status", "public", "reviewed")
```

--------------------------------

### PocketBase Record Validation Hook

Source: https://pocketbase.io/docs/js-event-hooks

The onRecordValidate hook is a Record proxy model hook called every time a Record is validated, for instance, by $app.validate() or $app.save(). It provides access to the application and record objects for validation logic. It can be configured to fire for all records or specific collections.

```javascript
// fires for every record
onRecordValidate((e) => {
  // e.app
  // e.record
  e.next()
})
```

```javascript
// fires only for "users" and "articles" records
onRecordValidate((e) => {
  // e.app
  // e.record
  e.next()
}, "users", "articles")
```

--------------------------------

### PocketBase: Listen to All Model Deletions

Source: https://pocketbase.io/docs/js-event-hooks

This snippet demonstrates how to use the onModelDelete hook to listen for any model deletion event. The hook fires before model validation and the database update. It accepts an optional list of model names to filter the events.

```javascript
onModelDelete((e) => {
  // e.app
  // e.model
  e.next()
})
```

--------------------------------

### Execute Custom Logic Before DB Update (PocketBase Hook)

Source: https://pocketbase.io/docs/js-event-hooks

The `onRecordUpdateExecute` hook is triggered after successful record validation and just before the database UPDATE statement. This is useful for logic that needs to run right before persistence, but after validation has passed. Like `onRecordUpdate`, it can be scoped to specific collections.

```javascript
// fires for every record
onRecordUpdateExecute((e) => {
  // e.app
  // e.record
  e.next()
})

// fires only for "users" and "articles" records
onRecordUpdateExecute((e) => {
  // e.app
  // e.record
  e.next()
}, "users", "articles")
```

--------------------------------

### PocketBase: All Collections onCollectionDeleteExecute Hook

Source: https://pocketbase.io/docs/js-event-hooks

This hook is triggered right before the collection model DELETE DB statement execution, after internal delete checks. It's useful for operations immediately preceding the database deletion. Note that successful execution does not guarantee deletion if the transaction is not committed.

```javascript
onCollectionDeleteExecute((e) => {
  // e.app
  // e.collection
  e.next()
})
```

--------------------------------

### PocketBase dbx.Expression: Exists() Subquery

Source: https://pocketbase.io/docs/go-database

Demonstrates how to use `dbx.Exists()` to prefix an expression, typically a subquery, with the `EXISTS` operator.

```go
// EXISTS (SELECT 1 FROM users WHERE status = 'active')
dbx.Exists(dbx.NewExp("SELECT 1 FROM users WHERE status = 'active'"))
```

--------------------------------

### PocketBase IO: Handle Record View Requests

Source: https://pocketbase.io/docs/js-event-hooks

The `onRecordViewRequest` hook is triggered on each API Record view request. It allows for validation or modification of the response before client delivery. Like `onRecordsListRequest`, it can be filtered by collection names. For computed fields, `onRecordEnrich` is recommended.

```javascript
// fires for every collection
onRecordViewRequest((e) => {
// e.app
// e.collection
// e.record
// and all RequestEvent fields...
     e.next()
})

// fires only for "users" and "articles" collections
onRecordViewRequest((e) => {
// e.app
// e.collection
// e.record
// and all RequestEvent fields...
     e.next()
}, "users", "articles")
```

--------------------------------

### PocketBase IO: Handle Record Update Requests

Source: https://pocketbase.io/docs/js-event-hooks

The `onRecordUpdateRequest` hook is invoked for each API Record update request. This hook can be used for further validation of request data or to define alternative data update mechanisms. It supports both global and collection-specific configurations.

```javascript
// fires for every collection
onRecordUpdateRequest((e) => {
// e.app
// e.collection
// e.record
// and all RequestEvent fields...
     e.next()
})

// fires only for "users" and "articles" collections
onRecordUpdateRequest((e) => {
// e.app
// e.collection
// e.record
// and all RequestEvent fields...
     e.next()
}, "users", "articles")
```

--------------------------------

### Successful Model Update Persistence Hook (onModelAfterUpdateSuccess)

Source: https://pocketbase.io/docs/js-event-hooks

The `onModelAfterUpdateSuccess` hook is invoked after a model's database update is successfully persisted. If the update is part of a transaction, this hook executes only after the transaction commits. It is not triggered on transaction rollback.

```javascript
// fires for every model
onModelAfterUpdateSuccess((e) => {
  // e.app
  // e.model
  e.next()
})

// fires only for "users" and "articles" models
onModelAfterUpdateSuccess((e) => {
  // e.app
  // e.model
  e.next()
}, "users", "articles")
```

--------------------------------

### PocketBase onModelValidate Hook (All Models)

Source: https://pocketbase.io/docs/js-event-hooks

The onModelValidate hook is called whenever a Model is being validated, typically by $app.validate() or $app.save(). This hook listens to all models implementing the Model DB interface. It provides access to e.app and e.model. Call e.next() to proceed with validation.

```javascript
// fires for every model
onModelValidate((e) => {
  // e.app
  // e.model
  e.next()
})
```

--------------------------------

### PocketBase: Specific Collections onCollectionDeleteExecute Hook

Source: https://pocketbase.io/docs/js-event-hooks

This hook is triggered right before the collection model DELETE DB statement execution, but only for specified collections ('users', 'articles'). It allows for targeted operations immediately preceding database deletion. Note that successful execution does not guarantee deletion if the transaction is not committed.

```javascript
onCollectionDeleteExecute((e) => {
  // e.app
  // e.collection
  e.next()
}, "users", "articles")
```

--------------------------------

### Handle Record Authentication Requests with onRecordAuthRequest

Source: https://pocketbase.io/docs/js-event-hooks

The `onRecordAuthRequest` hook is invoked for every successful record authentication (sign-in, token refresh). It can be used to further validate or alter authenticated record data and tokens. The hook can be applied globally or to specific auth collections.

```javascript
onRecordAuthRequest((e) => {
  // e.app
  // e.record
  // e.token
  // e.meta
  // e.authMethod
  // and all RequestEvent fields...
  e.next()
})

onRecordAuthRequest((e) => {
  // e.app
  // e.record
  // e.token
  // e.meta
  // e.authMethod
  // and all RequestEvent fields...
  e.next()
}, "users", "managers")
```

--------------------------------

### PocketBase IO: Handle Record List Requests

Source: https://pocketbase.io/docs/js-event-hooks

The `onRecordsListRequest` hook is executed for every API Records list request. It can be used to validate or modify the response before it's sent to the client. For modifying computed fields, `onRecordEnrich` is preferred. This hook accepts optional collection names to filter its execution.

```javascript
// fires for every collection
onRecordsListRequest((e) => {
// e.app
// e.collection
// e.records
// e.result
// and all RequestEvent fields...
     e.next()
})

// fires only for "users" and "articles" collections
onRecordsListRequest((e) => {
// e.app
// e.collection
// e.records
// e.result
// and all RequestEvent fields...
     e.next()
}, "users", "articles")
```

--------------------------------

### Load and Render Templates with PocketBase Go Utility

Source: https://pocketbase.io/docs/go-rendering-templates

Demonstrates how to load multiple template files (base and partials) and render them with provided data using PocketBase's template registry. Handles potential rendering errors. This utility is safe for concurrent use by multiple goroutines.

```go
import (
	"github.com/pocketbase/pocketbase/tools/template"
)

// ... inside a function or method ...
data := map[string]any{"name": "John"}

html, err := template.NewRegistry().LoadFiles(
	"views/base.html",
	"views/partial1.html",
	"views/partial2.html",
).Render(data)
```

--------------------------------

### PocketBase onModelValidate Hook (Specific Models)

Source: https://pocketbase.io/docs/js-event-hooks

This variant of the onModelValidate hook allows specifying particular models to listen to, such as 'users' and 'articles'. It's called when these specific models are being validated via $app.validate() or $app.save(). The hook provides e.app and e.model. Call e.next() to continue.

```javascript
// fires only for "users" and "articles" models
onModelValidate((e) => {
  // e.app
  // e.model
  e.next()
}, "users", "articles")
```

--------------------------------

### Handle Successful Record Update Persistence (PocketBase Hook)

Source: https://pocketbase.io/docs/js-event-hooks

The `onRecordAfterUpdateSuccess` hook executes after a record has been successfully updated and persisted in the database. It is also triggered after a transaction commit. This hook is ideal for post-persistence actions that depend on the data being successfully saved.

```javascript
// fires for every record
onRecordAfterUpdateSuccess((e) => {
  // e.app
  // e.record
  e.next()
})

// fires only for "users" and "articles" records
onRecordAfterUpdateSuccess((e) => {
  // e.app
  // e.record
  e.next()
}, "users", "articles")
```

--------------------------------

### Generate Protected File Token

Source: https://pocketbase.io/docs/api-files

This code snippet shows how to generate a short-lived token for accessing protected files in PocketBase. This requires the client to be authenticated as a superuser or via a regular authorization token sent in the request headers. The generated token can then be used to access protected file resources.

```javascript
/*
  Requires an existing authorization token and superuser or authenticated record access.
  POST /api/files/token
  Headers: {
    "Authorization": "YOUR_AUTH_TOKEN"
  }
  Example Response:
  {
    "token": "your_generated_file_token"
  }
*/
```

--------------------------------

### Enrich Records with Default Expands using $apis.enrichRecords

Source: https://pocketbase.io/docs/js-routing

Demonstrates how to enrich a list of records by expanding a specific relation (e.g., 'categories') as a default expand. This function helps in retrieving related data efficiently. It ensures sensitive authentication information is only visible to authorized users.

```javascript
routerAdd("GET", "/custom-article", (e) => {
  let records = e.app.findRecordsByFilter("article", "status = 'active'", "-created", 40, 0)
  // enrich the records with the "categories" relation as default expand
  $apis.enrichRecords(e, records, "categories")
  return e.json(200, records)
})
```

--------------------------------

### Customize Password Reset Requests with onRecordRequestPasswordResetRequest

Source: https://pocketbase.io/docs/js-event-hooks

The `onRecordRequestPasswordResetRequest` hook is triggered for each Record request password reset API request. It allows for validation of request data or implementation of custom password reset behaviors. This hook can be applied globally or to specific auth collections.

```javascript
onRecordRequestPasswordResetRequest((e) => {
  // e.app
  // e.collection
  // e.record
  // and all RequestEvent fields...
  e.next()
})

onRecordRequestPasswordResetRequest((e) => {
  // e.app
  // e.collection
  // e.record
  // and all RequestEvent fields...
  e.next()
}, "users", "managers")
```

--------------------------------

### Handle OAuth2 Authentication with onRecordAuthWithOAuth2Request

Source: https://pocketbase.io/docs/js-event-hooks

The `onRecordAuthWithOAuth2Request` hook is called for Record OAuth2 sign-in/sign-up requests after token exchange and before provider linking. If `e.record` is unset, a new auth record is attempted. Existing records can be linked by modifying `e.record`. This hook can be applied globally or to specific collections.

```javascript
onRecordAuthWithOAuth2Request((e) => {
  // e.app
  // e.collection
  // e.providerName
  // e.providerClient
  // e.record (could be null)
  // e.oauth2User
  // e.createData
  // e.isNewRecord
  // and all RequestEvent fields...
  e.next()
})

onRecordAuthWithOAuth2Request((e) => {
  // e.app
  // e.collection
  // e.providerName
  // e.providerClient
  // e.record (could be null)
  // e.oauth2User
  // e.createData
  // e.isNewRecord
  // and all RequestEvent fields...
  e.next()
}, "users", "managers")
```

--------------------------------

### Multi-factor Authentication (MFA) with Email/Password + OTP

Source: https://pocketbase.io/docs/authentication

Demonstrates the two-step authentication process for Multi-factor Authentication (MFA) in PocketBase v0.23+. It shows how to first authenticate with a primary method (e.g., email/password) and then use the `mfaId` from the 401 response to authenticate with a second method (e.g., OTP).

```javascript
import PocketBase from 'pocketbase';

const pb = new PocketBase('http://127.0.0.1:8090');

...

try {
  await pb.collection('users').authWithPassword('test@example.com', '1234567890');
} catch (err) {
  const mfaId = err.response?.mfaId;
  if (!mfaId) {
    throw err; // not mfa -> rethrow
  }
  // the user needs to authenticate again with another auth method, for example OTP
  const result = await pb.collection('users').requestOTP('test@example.com');
  // ... show a modal for users to check their email and to enter the received code ...
  await pb.collection('users').authWithOTP(result.otpId, 'EMAIL_CODE', { 'mfaId': mfaId });
}
```

--------------------------------

### Handle Failed Record Update Persistence (PocketBase Hook)

Source: https://pocketbase.io/docs/js-event-hooks

The `onRecordAfterUpdateError` hook is designed to catch and handle errors that occur during record update persistence. It can fire immediately upon `$app.save()` failure or be delayed if the error occurs during a transaction rollback. The `e.error` property contains details about the failure.

```javascript
// fires for every record
onRecordAfterUpdateError((e) => {
  // e.app
  // e.record
  // e.error
  e.next()
})

// fires only for "users" and "articles" records
onRecordAfterUpdateError((e) => {
  // e.app
  // e.record
  // e.error
  e.next()
}, "users", "articles")
```

--------------------------------

### PocketBase Filter Example with Datetime Macro

Source: https://pocketbase.io/docs/api-rules-and-filters

A practical example of using a datetime macro within a PocketBase filter expression to compare a collection field against the current time.

```plaintext
`@request.body.publicDate >= @now`
```

--------------------------------

### Go: Query Builder - From Clause

Source: https://pocketbase.io/docs/go-database

Shows how to specify the table(s) to select from using the `From()` method. Supports selecting from multiple tables, with table names automatically quoted.

```Go
app.DB(). Select("table1.id", "table2.name"). From("table1", "table2") ...
```

--------------------------------

### Get Log Statistics

Source: https://pocketbase.io/docs/api-logs

Retrieves hourly aggregated log statistics. This endpoint requires authentication, and only superusers can access it. It supports filtering logs based on various criteria and selecting specific fields in the response. Both JavaScript and Dart examples demonstrate how to authenticate and fetch statistics with a filter.

```javascript
import PocketBase from 'pocketbase';
const pb = new PocketBase('http://127.0.0.1:8090');

// Authenticate as a superuser
await pb.collection("_superusers").authWithPassword('test@example.com', '123456');

// Fetch log statistics, filtering for entries where the status is 400 or greater
const stats = await pb.logs.getStats({ filter: 'data.status >= 400' });
```

```dart
import 'package:pocketbase/pocketbase.dart';

final pb = PocketBase('http://127.0.0.1:8090');

// Authenticate as a superuser
await pb.collection("_superusers").authWithPassword('test@example.com', '123456');

// Fetch log statistics, filtering for entries where the status is 400 or greater
final stats = await pb.logs.getStats(
    filter: 'data.status >= 400'
);
```

--------------------------------

### Order Query Results: OrderBy and AndOrderBy

Source: https://pocketbase.io/docs/go-database

Specifies the ORDER BY clause for SQL queries. Columns can include 'ASC' or 'DESC' for ordering direction. `AndOrderBy` appends additional columns to an existing ORDER BY clause.

```go
app.DB(). Select("users.*"). From("users"). OrderBy("created ASC", "updated DESC"). AndOrderBy("title ASC") ...
```

--------------------------------

### PocketBase OnBootstrap Hook Example (Go)

Source: https://pocketbase.io/docs/go-event-hooks

Demonstrates how to use the OnBootstrap hook in PocketBase. This hook is triggered during the initialization of the main application resources. It's crucial to call e.Next() before accessing the database to avoid errors.

```go
package main

import (
	"log"
	"github.com/pocketbase/pocketbase"
	"github.com/pocketbase/pocketbase/core"
)

func main() {
	app := pocketbase.New()

	app.OnBootstrap().BindFunc(func(e *core.BootstrapEvent) error {
		if err := e.Next(); err != nil {
			return err
		}
		// e.App
		return nil
	})

	if err := app.Start(); err != nil {
		log.Fatal(err)
	}
}
```

--------------------------------

### Create New PocketBase Collection (Go)

Source: https://pocketbase.io/docs/go-collections

Provides a detailed example of creating a new collection in PocketBase using the Go SDK. This includes setting collection rules (View, Create, Update), adding various field types (Text, Relation, Autodate), defining indexes, and persisting the collection.

```Go
import (
	"github.com/pocketbase/pocketbase/core"
	"github.com/pocketbase/pocketbase/tools/types"
)

// Create a new base collection
collection := core.NewBaseCollection("example")

// Set rules
collection.ViewRule = types.Pointer("@request.auth.id != ''")
collection.CreateRule = types.Pointer("@request.auth.id != '' && @request.body.user = @request.auth.id")
collection.UpdateRule = types.Pointer(`
    @request.auth.id != '' &&
    user = @request.auth.id &&
    (@request.body.user:isset = false || @request.body.user = @request.auth.id)
`)

// Add text field
collection.Fields.Add(&core.TextField{
    Name: "title",
    Required: true,
    Max: 100,
})

// Add relation field
usersCollection, err := app.FindCollectionByNameOrId("users")
if err != nil {
    return err
}
collection.Fields.Add(&core.RelationField{
    Name: "user",
    Required: true,
    Max: 100,
    CascadeDelete: true,
    CollectionId:  usersCollection.Id,
})

// Add autodate/timestamp fields
collection.Fields.Add(&core.AutodateField{
    Name: "created",
    OnCreate: true,
})
collection.Fields.Add(&core.AutodateField{
    Name: "updated",
    OnCreate: true,
    OnUpdate: true,
})

// Add an index
collection.AddIndex("idx_example_user", true, "user", "")

// Validate and persist the collection
err = app.Save(collection)
if err != nil {
    return err
}
```

--------------------------------

### Executing Raw SQL Queries

Source: https://pocketbase.io/docs/go-database

Demonstrates how to execute various types of SQL statements using the `dbx.Builder` obtained from `core.App.DB()`.

```APIDOC
## Executing Raw SQL Queries

### Description
This section details how to execute different types of SQL queries directly using the PocketBase database interface.

### Method
Uses `app.DB().NewQuery("SQL_STATEMENT")` followed by an execution method.

### Endpoints
N/A (This is a programmatic API usage pattern).

### Query Execution Methods

*   **`Execute()`**: For statements that do not retrieve data (e.g., `INSERT`, `UPDATE`, `DELETE`).
    ```go
    res, err := app.DB().NewQuery("DELETE FROM articles WHERE status = 'archived'").Execute()
    ```
*   **`One(&struct)`**: To populate a single row into a provided struct.
    ```go
    type User struct {
        Id     string `db:"id" json:"id"`
        Status bool   `db:"status" json:"status"`
        Age    int    `db:"age" json:"age"`
        Roles  types.JSONArray[string] `db:"roles" json:"roles"`
    }
    user := User{}
    err := app.DB().NewQuery("SELECT id, status, age, roles FROM users WHERE id=1").One(&user)
    ```
*   **`All(&[]struct)`**: To populate multiple rows into a slice of structs.
    ```go
    type User struct {
        Id     string `db:"id" json:"id"`
        Status bool   `db:"status" json:"status"`
        Age    int    `db:"age" json:"age"`
        Roles  types.JSONArray[string] `db:"roles" json:"roles"`
    }
    users := []User{}
    err := app.DB().NewQuery("SELECT id, status, age, roles FROM users LIMIT 100").All(&users)
    ```

### Response Example (for `One` and `All`)
```json
{
  "example": "User struct or []User slice populated with data"
}
```
```

--------------------------------

### Send Custom Requests to API Routes using PocketBase SDKs

Source: https://pocketbase.io/docs/js-routing

Shows how to send custom HTTP requests to your PocketBase backend's API routes using the internal `send()` method provided by the official SDKs. This is useful for interacting with custom endpoints beyond standard CRUD operations. It allows for passing query parameters.

```javascript
import PocketBase from 'pocketbase';
const pb = new PocketBase('http://127.0.0.1:8090');
await pb.send("/hello", {
  // for other options check
  // https://developer.mozilla.org/en-US/docs/Web/API/fetch#options
  query: {
    "abc": 123
  },
});
```

```dart
import 'package:pocketbase/pocketbase.dart';

final pb = PocketBase('http://127.0.0.1:8090');
await pb.send("/hello", query: {
  "abc": 123
})
```

--------------------------------

### Ordering Query Results

Source: https://pocketbase.io/docs/js-database

Use orderBy() and andOrderBy() to specify the ORDER BY clause for sorting query results. Columns can be ordered ascending (ASC) or descending (DESC).

```APIDOC
## POST /api/query

### Description
Allows specifying the ORDER BY clause for query results.

### Method
POST (or applicable HTTP method for query execution)

### Endpoint
`/api/query` (Illustrative endpoint, actual execution might differ)

### Parameters
#### Request Body
- **cols** (array of strings) - Required - The columns to order by, with optional ASC/DESC direction.

### Request Example
```json
{
  "select": "users.*",
  "from": "users",
  "orderBy": ["created ASC", "updated DESC"],
  "andOrderBy": ["title ASC"]
}
```

### Response
#### Success Response (200)
- **data** (array) - The query results.

#### Response Example
```json
{
  "data": [
    { "id": "1", "created": "...", "updated": "...", "title": "..." },
    { "id": "2", "created": "...", "updated": "...", "title": "..." }
  ]
}
```
```

--------------------------------

### Intercept Record Authentication Refresh Requests with onRecordAuthRefreshRequest

Source: https://pocketbase.io/docs/js-event-hooks

The `onRecordAuthRefreshRequest` hook triggers before a new auth token is generated during a Record auth refresh API request. This allows for request data validation or custom refresh logic. It can be applied globally or to specific auth collections.

```javascript
onRecordAuthRefreshRequest((e) => {
  // e.app
  // e.collection
  // e.record
  // and all RequestEvent fields...
  e.next()
})

onRecordAuthRefreshRequest((e) => {
  // e.app
  // e.collection
  // e.record
  // and all RequestEvent fields...
  e.next()
}, "users", "managers")
```

--------------------------------

### Query Builder API

Source: https://pocketbase.io/docs/go-database

Introduces the PocketBase query builder API for programmatically constructing SQL statements without writing raw SQL.

```APIDOC
## Query Builder API

### Description
PocketBase provides a fluent query builder API that allows you to construct SQL queries programmatically, offering a more structured and potentially safer alternative to writing raw SQL.

### Method
Chain methods like `Select()`, `From()`, `Where()`, `Join()`, etc., on a query builder instance obtained from `app.DB()`.

### Endpoint
N/A (Programmatic API usage).

### Core Query Builder Methods

*   **`Select(...cols)`**: Initializes a `SELECT` query. Accepts column names.
*   **`AndSelect(...cols)`**: Adds more columns to an existing `SELECT` query.
*   **`Distinct(bool)`**: Sets the query to return distinct rows.
*   **`From(...tables)`**: Specifies the table(s) to select from.
*   **`Join(type, table, on)`**: Adds a `JOIN` clause. Parameters: join type (string), table name (string), `dbx.Expression` for the `ON` condition.
    *   **Shortcuts**: `InnerJoin(table, on)`, `LeftJoin(table, on)`, `RightJoin(table, on)` are available.
*   **`AndWhere(expression)`**: Adds a `WHERE` condition.
*   **`Limit(int)`**: Sets the `LIMIT` clause.
*   **`OrderBy(order)`**: Sets the `ORDER BY` clause.

### Usage Example
```go
users := []struct {
    Id    string `db:"id" json:"id"`
    Email string `db:"email" json:"email"`
}{}

app.DB().
    Select("id", "email").
    From("users").
    AndWhere(dbx.Like("email", "example.com")).
    Limit(100).
    OrderBy("created ASC").
    All(&users)

// Example with Join
app.DB().
    Select("users.* ").
    From("users").
    InnerJoin("profiles", dbx.NewExp("profiles.user_id = users.id") ).
    Join("FULL OUTER JOIN", "department", dbx.NewExp("department.id = {:id}", dbx.Params{ "id": "someId" })).
    All(&users)

// Example with Select and AndSelect
app.DB().
    Select("id", "avatar as image").
    AndSelect("(firstName || ' ' || lastName) as fullName").
    Distinct(true).
    From("users").
    All(&users)
```

### Response Example
```json
{
  "example": "[]struct slice populated with data"
}
```
```

--------------------------------

### Filter Groups: Having and AndHaving/OrHaving

Source: https://pocketbase.io/docs/go-database

Specifies the HAVING clause, which filters groups based on a condition. Accepts a `dbx.Expression`. `AndHaving` and `OrHaving` append conditions to an existing HAVING clause.

```go
app.DB(). Select("users.*"). From("users"). GroupBy("department", "level"). Having(dbx.NewExp("sum(level) > {:sum}", dbx.Params{ sum: 10 })) ...
```

--------------------------------

### PocketBase Datetime Macros

Source: https://pocketbase.io/docs/api-rules-and-filters

Provides a list of available datetime macros that can be used within PocketBase filter expressions. These macros represent specific points in time or time intervals, all based on UTC.

```plaintext
`@now` - current datetime
`@second` - current second (0-59)
`@minute` - current minute (0-59)
`@hour` - current hour (0-23)
`@weekday` - current weekday (0-6)
`@day` - current day of the month
`@month` - current month number
`@year` - current year number
`@yesterday` - yesterday's datetime
`@tomorrow` - tomorrow's datetime
`@todayStart` - start of current day
`@todayEnd` - end of current day
`@monthStart` - start of current month
`@monthEnd` - end of current month
`@yearStart` - start of current year
`@yearEnd` - end of current year
```

--------------------------------

### Subscribe to Realtime Events (Dart)

Source: https://pocketbase.io/docs/go-realtime

Subscribes to a custom realtime topic named 'example' from the client-side using the PocketBase Dart SDK. It prints any received event data to the console. Requires the PocketBase Dart SDK and an active PocketBase instance.

```Dart
import 'package:pocketbase/pocketbase.dart';

final pb = PocketBase('http://127.0.0.1:8090');

// ... other client-side logic

await pb.realtime.subscribe('example', (e) {
    print(e);
});
```

--------------------------------

### Upload Multiple Files (Dart)

Source: https://pocketbase.io/docs/files-handling

Creates a new record and uploads multiple files to a 'documents' file field using the PocketBase Dart SDK. Utilizes http.MultipartFile for file representation.

```dart
import 'package:pocketbase/pocketbase.dart';
import 'package:http/http.dart' as http;

final pb = PocketBase('http://127.0.0.1:8090');

// create a new record and upload multiple files
final record = await pb.collection('example').create(
  body: {
    'title': 'Hello world!', // regular text field
  },
  files: [
    http.MultipartFile.fromString(
      'documents',
      'example content 1...',
      filename: 'file1.txt',
    ),
    http.MultipartFile.fromString(
      'documents',
      'example content 2...',
      filename: 'file2.txt',
    ),
  ],
);
```